<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="robots" content="noindex">

	<title>File admin.php | Object Sync for Salesforce</title>

	<link rel="stylesheet" href="resources/style.css?c2f33731c1948fbed7c333554678bfa68d4817da">

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
		</div>



		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-Object_Sync_Salesforce.html">Object_Sync_Salesforce</a></li>
				<li><a href="class-Object_Sync_Sf_Activate.html">Object_Sync_Sf_Activate</a></li>
				<li><a href="class-Object_Sync_Sf_Admin.html">Object_Sync_Sf_Admin</a></li>
				<li><a href="class-Object_Sync_Sf_Admin_Notice.html">Object_Sync_Sf_Admin_Notice</a></li>
				<li><a href="class-Object_Sync_Sf_Deactivate.html">Object_Sync_Sf_Deactivate</a></li>
				<li><a href="class-Object_Sync_Sf_Logging.html">Object_Sync_Sf_Logging</a></li>
				<li><a href="class-Object_Sync_Sf_Mapping.html">Object_Sync_Sf_Mapping</a></li>
				<li><a href="class-Object_Sync_Sf_Salesforce.html">Object_Sync_Sf_Salesforce</a></li>
				<li><a href="class-Object_Sync_Sf_Salesforce_Pull.html">Object_Sync_Sf_Salesforce_Pull</a></li>
				<li><a href="class-Object_Sync_Sf_Salesforce_Push.html">Object_Sync_Sf_Salesforce_Push</a></li>
				<li><a href="class-Object_Sync_Sf_Salesforce_Select_Query.html">Object_Sync_Sf_Salesforce_Select_Query</a></li>
				<li><a href="class-Object_Sync_Sf_Salesforce_Soap_Partner.html">Object_Sync_Sf_Salesforce_Soap_Partner</a></li>
				<li><a href="class-Object_Sync_Sf_Schedule.html">Object_Sync_Sf_Schedule</a></li>
				<li><a href="class-Object_Sync_Sf_WordPress.html">Object_Sync_Sf_WordPress</a></li>
				<li><a href="class-Object_Sync_Sf_WordPress_Transient.html">Object_Sync_Sf_WordPress_Transient</a></li>
			</ul>



			<h3>Exceptions</h3>
			<ul>
				<li><a href="class-Object_Sync_Sf_Exception.html">Object_Sync_Sf_Exception</a></li>
				<li><a href="class-WordpressException.html">WordpressException</a></li>
			</ul>


		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="">
		<input type="hidden" name="ie" value="UTF-8">
		<input type="text" name="q" class="text" placeholder="Search">
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
<span>Class</span>			</li>
		</ul>
		<ul>
				<li>
					<a href="annotation-group-todo.html" title="List of elements with todo annotation">
						<span>Todo</span>
					</a>
				</li>
		</ul>
		<ul>
		</ul>
	</div>

<pre class="numbers"><code><span class="l"><a href="#1">   1: </a></span><span class="l"><a href="#2">   2: </a></span></span><span class="l"><a href="#3">   3: </a></span></span><span class="l"><a href="#4">   4: </a></span></span><span class="l"><a href="#5">   5: </a></span></span><span class="l"><a href="#6">   6: </a></span><span class="l"><a href="#7">   7: </a></span><span class="l"><a href="#8">   8: </a></span><span class="l"><a href="#9">   9: </a></span><span class="l"><a href="#10">  10: </a></span><span class="l"><a href="#11">  11: </a></span><span class="l"><a href="#12">  12: </a></span></span><span class="l"><a href="#13">  13: </a></span></span><span class="l"><a href="#14">  14: </a></span><span class="l"><a href="#15">  15: </a></span><span class="l"><a href="#16">  16: </a></span><span class="l"><a href="#17">  17: </a></span><span class="l"><a href="#18">  18: </a></span><span class="l"><a href="#19">  19: </a></span><span class="l"><a href="#20">  20: </a></span><span class="l"><a href="#21">  21: </a></span><span class="l"><a href="#22">  22: </a></span><span class="l"><a href="#23">  23: </a></span><span class="l"><a href="#24">  24: </a></span><span class="l"><a href="#25">  25: </a></span><span class="l"><a href="#26">  26: </a></span><span class="l"><a href="#27">  27: </a></span><span class="l"><a href="#28">  28: </a></span></span><span class="l"><a href="#29">  29: </a></span></span><span class="l"><a href="#30">  30: </a></span></span><span class="l"><a href="#31">  31: </a></span><span class="l"><a href="#32">  32: </a></span><span class="l"><a href="#33">  33: </a></span><span class="l"><a href="#34">  34: </a></span></span><span class="l"><a href="#35">  35: </a></span></span><span class="l"><a href="#36">  36: </a></span></span><span class="l"><a href="#37">  37: </a></span><span class="l"><a href="#38">  38: </a></span><span class="l"><a href="#39">  39: </a></span><span class="l"><a href="#40">  40: </a></span></span><span class="l"><a href="#41">  41: </a></span></span><span class="l"><a href="#42">  42: </a></span></span><span class="l"><a href="#43">  43: </a></span></span><span class="l"><a href="#44">  44: </a></span></span><span class="l"><a href="#45">  45: </a></span><span class="l"><a href="#46">  46: </a></span><span class="l"><a href="#47">  47: </a></span><span class="l"><a href="#48">  48: </a></span></span><span class="l"><a href="#49">  49: </a></span></span><span class="l"><a href="#50">  50: </a></span></span><span class="l"><a href="#51">  51: </a></span></span><span class="l"><a href="#52">  52: </a></span><span class="l"><a href="#53">  53: </a></span><span class="l"><a href="#54">  54: </a></span><span class="l"><a href="#55">  55: </a></span></span><span class="l"><a href="#56">  56: </a></span></span><span class="l"><a href="#57">  57: </a></span></span><span class="l"><a href="#58">  58: </a></span></span><span class="l"><a href="#59">  59: </a></span><span class="l"><a href="#60">  60: </a></span><span class="l"><a href="#61">  61: </a></span><span class="l"><a href="#62">  62: </a></span></span><span class="l"><a href="#63">  63: </a></span></span><span class="l"><a href="#64">  64: </a></span></span><span class="l"><a href="#65">  65: </a></span></span><span class="l"><a href="#66">  66: </a></span><span class="l"><a href="#67">  67: </a></span><span class="l"><a href="#68">  68: </a></span><span class="l"><a href="#69">  69: </a></span></span><span class="l"><a href="#70">  70: </a></span></span><span class="l"><a href="#71">  71: </a></span></span><span class="l"><a href="#72">  72: </a></span></span><span class="l"><a href="#73">  73: </a></span></span><span class="l"><a href="#74">  74: </a></span></span><span class="l"><a href="#75">  75: </a></span></span><span class="l"><a href="#76">  76: </a></span></span><span class="l"><a href="#77">  77: </a></span></span><span class="l"><a href="#78">  78: </a></span></span><span class="l"><a href="#79">  79: </a></span></span><span class="l"><a href="#80">  80: </a></span></span><span class="l"><a href="#81">  81: </a></span></span><span class="l"><a href="#82">  82: </a></span></span><span class="l"><a href="#83">  83: </a></span></span><span class="l"><a href="#84">  84: </a></span><span class="l"><a href="#85">  85: </a></span><span class="l"><a href="#86">  86: </a></span><span class="l"><a href="#87">  87: </a></span><span class="l"><a href="#88">  88: </a></span><span class="l"><a href="#89">  89: </a></span><span class="l"><a href="#90">  90: </a></span><span class="l"><a href="#91">  91: </a></span><span class="l"><a href="#92">  92: </a></span><span class="l"><a href="#93">  93: </a></span><span class="l"><a href="#94">  94: </a></span><span class="l"><a href="#95">  95: </a></span><span class="l"><a href="#96">  96: </a></span><span class="l"><a href="#97">  97: </a></span><span class="l"><a href="#98">  98: </a></span><span class="l"><a href="#99">  99: </a></span><span class="l"><a href="#100"> 100: </a></span><span class="l"><a href="#101"> 101: </a></span><span class="l"><a href="#102"> 102: </a></span><span class="l"><a href="#103"> 103: </a></span><span class="l"><a href="#104"> 104: </a></span><span class="l"><a href="#105"> 105: </a></span><span class="l"><a href="#106"> 106: </a></span><span class="l"><a href="#107"> 107: </a></span><span class="l"><a href="#108"> 108: </a></span><span class="l"><a href="#109"> 109: </a></span><span class="l"><a href="#110"> 110: </a></span><span class="l"><a href="#111"> 111: </a></span><span class="l"><a href="#112"> 112: </a></span><span class="l"><a href="#113"> 113: </a></span><span class="l"><a href="#114"> 114: </a></span><span class="l"><a href="#115"> 115: </a></span><span class="l"><a href="#116"> 116: </a></span><span class="l"><a href="#117"> 117: </a></span><span class="l"><a href="#118"> 118: </a></span><span class="l"><a href="#119"> 119: </a></span></span><span class="l"><a href="#120"> 120: </a></span></span><span class="l"><a href="#121"> 121: </a></span></span><span class="l"><a href="#122"> 122: </a></span><span class="l"><a href="#123"> 123: </a></span><span class="l"><a href="#124"> 124: </a></span><span class="l"><a href="#125"> 125: </a></span><span class="l"><a href="#126"> 126: </a></span><span class="l"><a href="#127"> 127: </a></span><span class="l"><a href="#128"> 128: </a></span><span class="l"><a href="#129"> 129: </a></span><span class="l"><a href="#130"> 130: </a></span><span class="l"><a href="#131"> 131: </a></span><span class="l"><a href="#132"> 132: </a></span><span class="l"><a href="#133"> 133: </a></span><span class="l"><a href="#134"> 134: </a></span><span class="l"><a href="#135"> 135: </a></span><span class="l"><a href="#136"> 136: </a></span><span class="l"><a href="#137"> 137: </a></span><span class="l"><a href="#138"> 138: </a></span><span class="l"><a href="#139"> 139: </a></span><span class="l"><a href="#140"> 140: </a></span><span class="l"><a href="#141"> 141: </a></span><span class="l"><a href="#142"> 142: </a></span><span class="l"><a href="#143"> 143: </a></span><span class="l"><a href="#144"> 144: </a></span><span class="l"><a href="#145"> 145: </a></span><span class="l"><a href="#146"> 146: </a></span><span class="l"><a href="#147"> 147: </a></span><span class="l"><a href="#148"> 148: </a></span><span class="l"><a href="#149"> 149: </a></span><span class="l"><a href="#150"> 150: </a></span></span><span class="l"><a href="#151"> 151: </a></span></span><span class="l"><a href="#152"> 152: </a></span></span><span class="l"><a href="#153"> 153: </a></span><span class="l"><a href="#154"> 154: </a></span><span class="l"><a href="#155"> 155: </a></span><span class="l"><a href="#156"> 156: </a></span><span class="l"><a href="#157"> 157: </a></span><span class="l"><a href="#158"> 158: </a></span><span class="l"><a href="#159"> 159: </a></span></span><span class="l"><a href="#160"> 160: </a></span></span><span class="l"><a href="#161"> 161: </a></span></span><span class="l"><a href="#162"> 162: </a></span></span><span class="l"><a href="#163"> 163: </a></span></span><span class="l"><a href="#164"> 164: </a></span></span><span class="l"><a href="#165"> 165: </a></span><span class="l"><a href="#166"> 166: </a></span><span class="l"><a href="#167"> 167: </a></span><span class="l"><a href="#168"> 168: </a></span><span class="l"><a href="#169"> 169: </a></span><span class="l"><a href="#170"> 170: </a></span><span class="l"><a href="#171"> 171: </a></span><span class="l"><a href="#172"> 172: </a></span><span class="l"><a href="#173"> 173: </a></span><span class="l"><a href="#174"> 174: </a></span><span class="l"><a href="#175"> 175: </a></span><span class="l"><a href="#176"> 176: </a></span><span class="l"><a href="#177"> 177: </a></span><span class="l"><a href="#178"> 178: </a></span><span class="l"><a href="#179"> 179: </a></span><span class="l"><a href="#180"> 180: </a></span><span class="l"><a href="#181"> 181: </a></span><span class="l"><a href="#182"> 182: </a></span><span class="l"><a href="#183"> 183: </a></span><span class="l"><a href="#184"> 184: </a></span><span class="l"><a href="#185"> 185: </a></span><span class="l"><a href="#186"> 186: </a></span><span class="l"><a href="#187"> 187: </a></span><span class="l"><a href="#188"> 188: </a></span><span class="l"><a href="#189"> 189: </a></span><span class="l"><a href="#190"> 190: </a></span><span class="l"><a href="#191"> 191: </a></span><span class="l"><a href="#192"> 192: </a></span><span class="l"><a href="#193"> 193: </a></span><span class="l"><a href="#194"> 194: </a></span><span class="l"><a href="#195"> 195: </a></span><span class="l"><a href="#196"> 196: </a></span><span class="l"><a href="#197"> 197: </a></span><span class="l"><a href="#198"> 198: </a></span><span class="l"><a href="#199"> 199: </a></span><span class="l"><a href="#200"> 200: </a></span><span class="l"><a href="#201"> 201: </a></span><span class="l"><a href="#202"> 202: </a></span><span class="l"><a href="#203"> 203: </a></span><span class="l"><a href="#204"> 204: </a></span><span class="l"><a href="#205"> 205: </a></span><span class="l"><a href="#206"> 206: </a></span><span class="l"><a href="#207"> 207: </a></span><span class="l"><a href="#208"> 208: </a></span><span class="l"><a href="#209"> 209: </a></span><span class="l"><a href="#210"> 210: </a></span><span class="l"><a href="#211"> 211: </a></span><span class="l"><a href="#212"> 212: </a></span><span class="l"><a href="#213"> 213: </a></span><span class="l"><a href="#214"> 214: </a></span><span class="l"><a href="#215"> 215: </a></span><span class="l"><a href="#216"> 216: </a></span><span class="l"><a href="#217"> 217: </a></span><span class="l"><a href="#218"> 218: </a></span><span class="l"><a href="#219"> 219: </a></span><span class="l"><a href="#220"> 220: </a></span><span class="l"><a href="#221"> 221: </a></span><span class="l"><a href="#222"> 222: </a></span><span class="l"><a href="#223"> 223: </a></span><span class="l"><a href="#224"> 224: </a></span><span class="l"><a href="#225"> 225: </a></span><span class="l"><a href="#226"> 226: </a></span><span class="l"><a href="#227"> 227: </a></span><span class="l"><a href="#228"> 228: </a></span><span class="l"><a href="#229"> 229: </a></span><span class="l"><a href="#230"> 230: </a></span><span class="l"><a href="#231"> 231: </a></span><span class="l"><a href="#232"> 232: </a></span><span class="l"><a href="#233"> 233: </a></span><span class="l"><a href="#234"> 234: </a></span><span class="l"><a href="#235"> 235: </a></span><span class="l"><a href="#236"> 236: </a></span><span class="l"><a href="#237"> 237: </a></span><span class="l"><a href="#238"> 238: </a></span><span class="l"><a href="#239"> 239: </a></span><span class="l"><a href="#240"> 240: </a></span><span class="l"><a href="#241"> 241: </a></span><span class="l"><a href="#242"> 242: </a></span><span class="l"><a href="#243"> 243: </a></span><span class="l"><a href="#244"> 244: </a></span><span class="l"><a href="#245"> 245: </a></span><span class="l"><a href="#246"> 246: </a></span><span class="l"><a href="#247"> 247: </a></span><span class="l"><a href="#248"> 248: </a></span><span class="l"><a href="#249"> 249: </a></span><span class="l"><a href="#250"> 250: </a></span><span class="l"><a href="#251"> 251: </a></span><span class="l"><a href="#252"> 252: </a></span><span class="l"><a href="#253"> 253: </a></span><span class="l"><a href="#254"> 254: </a></span><span class="l"><a href="#255"> 255: </a></span><span class="l"><a href="#256"> 256: </a></span><span class="l"><a href="#257"> 257: </a></span><span class="l"><a href="#258"> 258: </a></span><span class="l"><a href="#259"> 259: </a></span><span class="l"><a href="#260"> 260: </a></span><span class="l"><a href="#261"> 261: </a></span><span class="l"><a href="#262"> 262: </a></span><span class="l"><a href="#263"> 263: </a></span><span class="l"><a href="#264"> 264: </a></span><span class="l"><a href="#265"> 265: </a></span><span class="l"><a href="#266"> 266: </a></span><span class="l"><a href="#267"> 267: </a></span><span class="l"><a href="#268"> 268: </a></span><span class="l"><a href="#269"> 269: </a></span><span class="l"><a href="#270"> 270: </a></span><span class="l"><a href="#271"> 271: </a></span><span class="l"><a href="#272"> 272: </a></span><span class="l"><a href="#273"> 273: </a></span><span class="l"><a href="#274"> 274: </a></span><span class="l"><a href="#275"> 275: </a></span><span class="l"><a href="#276"> 276: </a></span><span class="l"><a href="#277"> 277: </a></span><span class="l"><a href="#278"> 278: </a></span><span class="l"><a href="#279"> 279: </a></span><span class="l"><a href="#280"> 280: </a></span><span class="l"><a href="#281"> 281: </a></span><span class="l"><a href="#282"> 282: </a></span><span class="l"><a href="#283"> 283: </a></span><span class="l"><a href="#284"> 284: </a></span><span class="l"><a href="#285"> 285: </a></span><span class="l"><a href="#286"> 286: </a></span><span class="l"><a href="#287"> 287: </a></span><span class="l"><a href="#288"> 288: </a></span><span class="l"><a href="#289"> 289: </a></span><span class="l"><a href="#290"> 290: </a></span><span class="l"><a href="#291"> 291: </a></span><span class="l"><a href="#292"> 292: </a></span><span class="l"><a href="#293"> 293: </a></span><span class="l"><a href="#294"> 294: </a></span><span class="l"><a href="#295"> 295: </a></span><span class="l"><a href="#296"> 296: </a></span><span class="l"><a href="#297"> 297: </a></span><span class="l"><a href="#298"> 298: </a></span><span class="l"><a href="#299"> 299: </a></span><span class="l"><a href="#300"> 300: </a></span><span class="l"><a href="#301"> 301: </a></span><span class="l"><a href="#302"> 302: </a></span><span class="l"><a href="#303"> 303: </a></span><span class="l"><a href="#304"> 304: </a></span><span class="l"><a href="#305"> 305: </a></span><span class="l"><a href="#306"> 306: </a></span><span class="l"><a href="#307"> 307: </a></span><span class="l"><a href="#308"> 308: </a></span><span class="l"><a href="#309"> 309: </a></span><span class="l"><a href="#310"> 310: </a></span><span class="l"><a href="#311"> 311: </a></span><span class="l"><a href="#312"> 312: </a></span><span class="l"><a href="#313"> 313: </a></span><span class="l"><a href="#314"> 314: </a></span><span class="l"><a href="#315"> 315: </a></span><span class="l"><a href="#316"> 316: </a></span><span class="l"><a href="#317"> 317: </a></span><span class="l"><a href="#318"> 318: </a></span><span class="l"><a href="#319"> 319: </a></span><span class="l"><a href="#320"> 320: </a></span><span class="l"><a href="#321"> 321: </a></span><span class="l"><a href="#322"> 322: </a></span><span class="l"><a href="#323"> 323: </a></span><span class="l"><a href="#324"> 324: </a></span><span class="l"><a href="#325"> 325: </a></span><span class="l"><a href="#326"> 326: </a></span><span class="l"><a href="#327"> 327: </a></span><span class="l"><a href="#328"> 328: </a></span><span class="l"><a href="#329"> 329: </a></span><span class="l"><a href="#330"> 330: </a></span><span class="l"><a href="#331"> 331: </a></span><span class="l"><a href="#332"> 332: </a></span><span class="l"><a href="#333"> 333: </a></span><span class="l"><a href="#334"> 334: </a></span><span class="l"><a href="#335"> 335: </a></span><span class="l"><a href="#336"> 336: </a></span><span class="l"><a href="#337"> 337: </a></span><span class="l"><a href="#338"> 338: </a></span><span class="l"><a href="#339"> 339: </a></span><span class="l"><a href="#340"> 340: </a></span><span class="l"><a href="#341"> 341: </a></span><span class="l"><a href="#342"> 342: </a></span><span class="l"><a href="#343"> 343: </a></span><span class="l"><a href="#344"> 344: </a></span><span class="l"><a href="#345"> 345: </a></span><span class="l"><a href="#346"> 346: </a></span><span class="l"><a href="#347"> 347: </a></span><span class="l"><a href="#348"> 348: </a></span><span class="l"><a href="#349"> 349: </a></span><span class="l"><a href="#350"> 350: </a></span><span class="l"><a href="#351"> 351: </a></span><span class="l"><a href="#352"> 352: </a></span><span class="l"><a href="#353"> 353: </a></span><span class="l"><a href="#354"> 354: </a></span><span class="l"><a href="#355"> 355: </a></span><span class="l"><a href="#356"> 356: </a></span><span class="l"><a href="#357"> 357: </a></span><span class="l"><a href="#358"> 358: </a></span><span class="l"><a href="#359"> 359: </a></span><span class="l"><a href="#360"> 360: </a></span><span class="l"><a href="#361"> 361: </a></span><span class="l"><a href="#362"> 362: </a></span><span class="l"><a href="#363"> 363: </a></span><span class="l"><a href="#364"> 364: </a></span><span class="l"><a href="#365"> 365: </a></span><span class="l"><a href="#366"> 366: </a></span><span class="l"><a href="#367"> 367: </a></span><span class="l"><a href="#368"> 368: </a></span><span class="l"><a href="#369"> 369: </a></span><span class="l"><a href="#370"> 370: </a></span><span class="l"><a href="#371"> 371: </a></span><span class="l"><a href="#372"> 372: </a></span><span class="l"><a href="#373"> 373: </a></span><span class="l"><a href="#374"> 374: </a></span></span><span class="l"><a href="#375"> 375: </a></span></span><span class="l"><a href="#376"> 376: </a></span></span><span class="l"><a href="#377"> 377: </a></span></span><span class="l"><a href="#378"> 378: </a></span><span class="l"><a href="#379"> 379: </a></span><span class="l"><a href="#380"> 380: </a></span><span class="l"><a href="#381"> 381: </a></span><span class="l"><a href="#382"> 382: </a></span><span class="l"><a href="#383"> 383: </a></span><span class="l"><a href="#384"> 384: </a></span><span class="l"><a href="#385"> 385: </a></span><span class="l"><a href="#386"> 386: </a></span><span class="l"><a href="#387"> 387: </a></span><span class="l"><a href="#388"> 388: </a></span><span class="l"><a href="#389"> 389: </a></span><span class="l"><a href="#390"> 390: </a></span><span class="l"><a href="#391"> 391: </a></span><span class="l"><a href="#392"> 392: </a></span><span class="l"><a href="#393"> 393: </a></span><span class="l"><a href="#394"> 394: </a></span><span class="l"><a href="#395"> 395: </a></span><span class="l"><a href="#396"> 396: </a></span><span class="l"><a href="#397"> 397: </a></span><span class="l"><a href="#398"> 398: </a></span><span class="l"><a href="#399"> 399: </a></span><span class="l"><a href="#400"> 400: </a></span><span class="l"><a href="#401"> 401: </a></span><span class="l"><a href="#402"> 402: </a></span></span><span class="l"><a href="#403"> 403: </a></span></span><span class="l"><a href="#404"> 404: </a></span></span><span class="l"><a href="#405"> 405: </a></span></span><span class="l"><a href="#406"> 406: </a></span></span><span class="l"><a href="#407"> 407: </a></span></span><span class="l"><a href="#408"> 408: </a></span></span><span class="l"><a href="#409"> 409: </a></span><span class="l"><a href="#410"> 410: </a></span><span class="l"><a href="#411"> 411: </a></span><span class="l"><a href="#412"> 412: </a></span><span class="l"><a href="#413"> 413: </a></span><span class="l"><a href="#414"> 414: </a></span><span class="l"><a href="#415"> 415: </a></span><span class="l"><a href="#416"> 416: </a></span><span class="l"><a href="#417"> 417: </a></span><span class="l"><a href="#418"> 418: </a></span><span class="l"><a href="#419"> 419: </a></span><span class="l"><a href="#420"> 420: </a></span><span class="l"><a href="#421"> 421: </a></span><span class="l"><a href="#422"> 422: </a></span><span class="l"><a href="#423"> 423: </a></span><span class="l"><a href="#424"> 424: </a></span><span class="l"><a href="#425"> 425: </a></span><span class="l"><a href="#426"> 426: </a></span><span class="l"><a href="#427"> 427: </a></span><span class="l"><a href="#428"> 428: </a></span><span class="l"><a href="#429"> 429: </a></span><span class="l"><a href="#430"> 430: </a></span><span class="l"><a href="#431"> 431: </a></span><span class="l"><a href="#432"> 432: </a></span><span class="l"><a href="#433"> 433: </a></span><span class="l"><a href="#434"> 434: </a></span><span class="l"><a href="#435"> 435: </a></span><span class="l"><a href="#436"> 436: </a></span><span class="l"><a href="#437"> 437: </a></span><span class="l"><a href="#438"> 438: </a></span><span class="l"><a href="#439"> 439: </a></span><span class="l"><a href="#440"> 440: </a></span><span class="l"><a href="#441"> 441: </a></span><span class="l"><a href="#442"> 442: </a></span><span class="l"><a href="#443"> 443: </a></span><span class="l"><a href="#444"> 444: </a></span><span class="l"><a href="#445"> 445: </a></span><span class="l"><a href="#446"> 446: </a></span><span class="l"><a href="#447"> 447: </a></span><span class="l"><a href="#448"> 448: </a></span><span class="l"><a href="#449"> 449: </a></span><span class="l"><a href="#450"> 450: </a></span><span class="l"><a href="#451"> 451: </a></span><span class="l"><a href="#452"> 452: </a></span><span class="l"><a href="#453"> 453: </a></span><span class="l"><a href="#454"> 454: </a></span><span class="l"><a href="#455"> 455: </a></span><span class="l"><a href="#456"> 456: </a></span><span class="l"><a href="#457"> 457: </a></span><span class="l"><a href="#458"> 458: </a></span><span class="l"><a href="#459"> 459: </a></span><span class="l"><a href="#460"> 460: </a></span><span class="l"><a href="#461"> 461: </a></span><span class="l"><a href="#462"> 462: </a></span><span class="l"><a href="#463"> 463: </a></span><span class="l"><a href="#464"> 464: </a></span><span class="l"><a href="#465"> 465: </a></span><span class="l"><a href="#466"> 466: </a></span><span class="l"><a href="#467"> 467: </a></span><span class="l"><a href="#468"> 468: </a></span><span class="l"><a href="#469"> 469: </a></span><span class="l"><a href="#470"> 470: </a></span><span class="l"><a href="#471"> 471: </a></span><span class="l"><a href="#472"> 472: </a></span><span class="l"><a href="#473"> 473: </a></span><span class="l"><a href="#474"> 474: </a></span><span class="l"><a href="#475"> 475: </a></span><span class="l"><a href="#476"> 476: </a></span><span class="l"><a href="#477"> 477: </a></span><span class="l"><a href="#478"> 478: </a></span><span class="l"><a href="#479"> 479: </a></span><span class="l"><a href="#480"> 480: </a></span><span class="l"><a href="#481"> 481: </a></span><span class="l"><a href="#482"> 482: </a></span><span class="l"><a href="#483"> 483: </a></span><span class="l"><a href="#484"> 484: </a></span><span class="l"><a href="#485"> 485: </a></span><span class="l"><a href="#486"> 486: </a></span><span class="l"><a href="#487"> 487: </a></span><span class="l"><a href="#488"> 488: </a></span><span class="l"><a href="#489"> 489: </a></span><span class="l"><a href="#490"> 490: </a></span><span class="l"><a href="#491"> 491: </a></span><span class="l"><a href="#492"> 492: </a></span><span class="l"><a href="#493"> 493: </a></span><span class="l"><a href="#494"> 494: </a></span><span class="l"><a href="#495"> 495: </a></span><span class="l"><a href="#496"> 496: </a></span><span class="l"><a href="#497"> 497: </a></span><span class="l"><a href="#498"> 498: </a></span><span class="l"><a href="#499"> 499: </a></span><span class="l"><a href="#500"> 500: </a></span><span class="l"><a href="#501"> 501: </a></span><span class="l"><a href="#502"> 502: </a></span><span class="l"><a href="#503"> 503: </a></span><span class="l"><a href="#504"> 504: </a></span><span class="l"><a href="#505"> 505: </a></span><span class="l"><a href="#506"> 506: </a></span><span class="l"><a href="#507"> 507: </a></span><span class="l"><a href="#508"> 508: </a></span><span class="l"><a href="#509"> 509: </a></span><span class="l"><a href="#510"> 510: </a></span><span class="l"><a href="#511"> 511: </a></span><span class="l"><a href="#512"> 512: </a></span><span class="l"><a href="#513"> 513: </a></span><span class="l"><a href="#514"> 514: </a></span><span class="l"><a href="#515"> 515: </a></span><span class="l"><a href="#516"> 516: </a></span><span class="l"><a href="#517"> 517: </a></span><span class="l"><a href="#518"> 518: </a></span><span class="l"><a href="#519"> 519: </a></span><span class="l"><a href="#520"> 520: </a></span><span class="l"><a href="#521"> 521: </a></span><span class="l"><a href="#522"> 522: </a></span><span class="l"><a href="#523"> 523: </a></span><span class="l"><a href="#524"> 524: </a></span><span class="l"><a href="#525"> 525: </a></span><span class="l"><a href="#526"> 526: </a></span><span class="l"><a href="#527"> 527: </a></span><span class="l"><a href="#528"> 528: </a></span><span class="l"><a href="#529"> 529: </a></span><span class="l"><a href="#530"> 530: </a></span><span class="l"><a href="#531"> 531: </a></span><span class="l"><a href="#532"> 532: </a></span><span class="l"><a href="#533"> 533: </a></span><span class="l"><a href="#534"> 534: </a></span><span class="l"><a href="#535"> 535: </a></span><span class="l"><a href="#536"> 536: </a></span><span class="l"><a href="#537"> 537: </a></span><span class="l"><a href="#538"> 538: </a></span><span class="l"><a href="#539"> 539: </a></span><span class="l"><a href="#540"> 540: </a></span><span class="l"><a href="#541"> 541: </a></span><span class="l"><a href="#542"> 542: </a></span><span class="l"><a href="#543"> 543: </a></span><span class="l"><a href="#544"> 544: </a></span><span class="l"><a href="#545"> 545: </a></span><span class="l"><a href="#546"> 546: </a></span><span class="l"><a href="#547"> 547: </a></span><span class="l"><a href="#548"> 548: </a></span><span class="l"><a href="#549"> 549: </a></span><span class="l"><a href="#550"> 550: </a></span><span class="l"><a href="#551"> 551: </a></span><span class="l"><a href="#552"> 552: </a></span><span class="l"><a href="#553"> 553: </a></span><span class="l"><a href="#554"> 554: </a></span><span class="l"><a href="#555"> 555: </a></span><span class="l"><a href="#556"> 556: </a></span><span class="l"><a href="#557"> 557: </a></span><span class="l"><a href="#558"> 558: </a></span><span class="l"><a href="#559"> 559: </a></span><span class="l"><a href="#560"> 560: </a></span><span class="l"><a href="#561"> 561: </a></span><span class="l"><a href="#562"> 562: </a></span><span class="l"><a href="#563"> 563: </a></span><span class="l"><a href="#564"> 564: </a></span><span class="l"><a href="#565"> 565: </a></span><span class="l"><a href="#566"> 566: </a></span><span class="l"><a href="#567"> 567: </a></span><span class="l"><a href="#568"> 568: </a></span><span class="l"><a href="#569"> 569: </a></span><span class="l"><a href="#570"> 570: </a></span><span class="l"><a href="#571"> 571: </a></span><span class="l"><a href="#572"> 572: </a></span><span class="l"><a href="#573"> 573: </a></span><span class="l"><a href="#574"> 574: </a></span><span class="l"><a href="#575"> 575: </a></span><span class="l"><a href="#576"> 576: </a></span><span class="l"><a href="#577"> 577: </a></span><span class="l"><a href="#578"> 578: </a></span><span class="l"><a href="#579"> 579: </a></span><span class="l"><a href="#580"> 580: </a></span><span class="l"><a href="#581"> 581: </a></span><span class="l"><a href="#582"> 582: </a></span><span class="l"><a href="#583"> 583: </a></span><span class="l"><a href="#584"> 584: </a></span><span class="l"><a href="#585"> 585: </a></span><span class="l"><a href="#586"> 586: </a></span><span class="l"><a href="#587"> 587: </a></span><span class="l"><a href="#588"> 588: </a></span><span class="l"><a href="#589"> 589: </a></span><span class="l"><a href="#590"> 590: </a></span><span class="l"><a href="#591"> 591: </a></span><span class="l"><a href="#592"> 592: </a></span><span class="l"><a href="#593"> 593: </a></span><span class="l"><a href="#594"> 594: </a></span><span class="l"><a href="#595"> 595: </a></span><span class="l"><a href="#596"> 596: </a></span><span class="l"><a href="#597"> 597: </a></span><span class="l"><a href="#598"> 598: </a></span><span class="l"><a href="#599"> 599: </a></span><span class="l"><a href="#600"> 600: </a></span><span class="l"><a href="#601"> 601: </a></span><span class="l"><a href="#602"> 602: </a></span><span class="l"><a href="#603"> 603: </a></span><span class="l"><a href="#604"> 604: </a></span><span class="l"><a href="#605"> 605: </a></span><span class="l"><a href="#606"> 606: </a></span><span class="l"><a href="#607"> 607: </a></span><span class="l"><a href="#608"> 608: </a></span><span class="l"><a href="#609"> 609: </a></span><span class="l"><a href="#610"> 610: </a></span><span class="l"><a href="#611"> 611: </a></span><span class="l"><a href="#612"> 612: </a></span><span class="l"><a href="#613"> 613: </a></span></span><span class="l"><a href="#614"> 614: </a></span></span><span class="l"><a href="#615"> 615: </a></span></span><span class="l"><a href="#616"> 616: </a></span></span><span class="l"><a href="#617"> 617: </a></span></span><span class="l"><a href="#618"> 618: </a></span></span><span class="l"><a href="#619"> 619: </a></span></span><span class="l"><a href="#620"> 620: </a></span><span class="l"><a href="#621"> 621: </a></span><span class="l"><a href="#622"> 622: </a></span><span class="l"><a href="#623"> 623: </a></span><span class="l"><a href="#624"> 624: </a></span><span class="l"><a href="#625"> 625: </a></span></span><span class="l"><a href="#626"> 626: </a></span></span><span class="l"><a href="#627"> 627: </a></span></span><span class="l"><a href="#628"> 628: </a></span></span><span class="l"><a href="#629"> 629: </a></span></span><span class="l"><a href="#630"> 630: </a></span></span><span class="l"><a href="#631"> 631: </a></span></span><span class="l"><a href="#632"> 632: </a></span><span class="l"><a href="#633"> 633: </a></span><span class="l"><a href="#634"> 634: </a></span><span class="l"><a href="#635"> 635: </a></span><span class="l"><a href="#636"> 636: </a></span><span class="l"><a href="#637"> 637: </a></span><span class="l"><a href="#638"> 638: </a></span><span class="l"><a href="#639"> 639: </a></span><span class="l"><a href="#640"> 640: </a></span><span class="l"><a href="#641"> 641: </a></span><span class="l"><a href="#642"> 642: </a></span><span class="l"><a href="#643"> 643: </a></span><span class="l"><a href="#644"> 644: </a></span><span class="l"><a href="#645"> 645: </a></span><span class="l"><a href="#646"> 646: </a></span><span class="l"><a href="#647"> 647: </a></span><span class="l"><a href="#648"> 648: </a></span><span class="l"><a href="#649"> 649: </a></span><span class="l"><a href="#650"> 650: </a></span><span class="l"><a href="#651"> 651: </a></span><span class="l"><a href="#652"> 652: </a></span><span class="l"><a href="#653"> 653: </a></span><span class="l"><a href="#654"> 654: </a></span><span class="l"><a href="#655"> 655: </a></span><span class="l"><a href="#656"> 656: </a></span><span class="l"><a href="#657"> 657: </a></span><span class="l"><a href="#658"> 658: </a></span><span class="l"><a href="#659"> 659: </a></span><span class="l"><a href="#660"> 660: </a></span><span class="l"><a href="#661"> 661: </a></span><span class="l"><a href="#662"> 662: </a></span><span class="l"><a href="#663"> 663: </a></span><span class="l"><a href="#664"> 664: </a></span><span class="l"><a href="#665"> 665: </a></span><span class="l"><a href="#666"> 666: </a></span><span class="l"><a href="#667"> 667: </a></span><span class="l"><a href="#668"> 668: </a></span><span class="l"><a href="#669"> 669: </a></span><span class="l"><a href="#670"> 670: </a></span><span class="l"><a href="#671"> 671: </a></span><span class="l"><a href="#672"> 672: </a></span><span class="l"><a href="#673"> 673: </a></span><span class="l"><a href="#674"> 674: </a></span><span class="l"><a href="#675"> 675: </a></span><span class="l"><a href="#676"> 676: </a></span><span class="l"><a href="#677"> 677: </a></span><span class="l"><a href="#678"> 678: </a></span><span class="l"><a href="#679"> 679: </a></span><span class="l"><a href="#680"> 680: </a></span><span class="l"><a href="#681"> 681: </a></span><span class="l"><a href="#682"> 682: </a></span><span class="l"><a href="#683"> 683: </a></span><span class="l"><a href="#684"> 684: </a></span><span class="l"><a href="#685"> 685: </a></span><span class="l"><a href="#686"> 686: </a></span><span class="l"><a href="#687"> 687: </a></span><span class="l"><a href="#688"> 688: </a></span><span class="l"><a href="#689"> 689: </a></span><span class="l"><a href="#690"> 690: </a></span><span class="l"><a href="#691"> 691: </a></span><span class="l"><a href="#692"> 692: </a></span><span class="l"><a href="#693"> 693: </a></span><span class="l"><a href="#694"> 694: </a></span><span class="l"><a href="#695"> 695: </a></span><span class="l"><a href="#696"> 696: </a></span><span class="l"><a href="#697"> 697: </a></span><span class="l"><a href="#698"> 698: </a></span><span class="l"><a href="#699"> 699: </a></span><span class="l"><a href="#700"> 700: </a></span><span class="l"><a href="#701"> 701: </a></span><span class="l"><a href="#702"> 702: </a></span><span class="l"><a href="#703"> 703: </a></span><span class="l"><a href="#704"> 704: </a></span><span class="l"><a href="#705"> 705: </a></span><span class="l"><a href="#706"> 706: </a></span><span class="l"><a href="#707"> 707: </a></span><span class="l"><a href="#708"> 708: </a></span><span class="l"><a href="#709"> 709: </a></span><span class="l"><a href="#710"> 710: </a></span></span><span class="l"><a href="#711"> 711: </a></span></span><span class="l"><a href="#712"> 712: </a></span></span><span class="l"><a href="#713"> 713: </a></span></span><span class="l"><a href="#714"> 714: </a></span></span><span class="l"><a href="#715"> 715: </a></span></span><span class="l"><a href="#716"> 716: </a></span></span><span class="l"><a href="#717"> 717: </a></span><span class="l"><a href="#718"> 718: </a></span><span class="l"><a href="#719"> 719: </a></span><span class="l"><a href="#720"> 720: </a></span><span class="l"><a href="#721"> 721: </a></span><span class="l"><a href="#722"> 722: </a></span><span class="l"><a href="#723"> 723: </a></span><span class="l"><a href="#724"> 724: </a></span><span class="l"><a href="#725"> 725: </a></span><span class="l"><a href="#726"> 726: </a></span><span class="l"><a href="#727"> 727: </a></span><span class="l"><a href="#728"> 728: </a></span><span class="l"><a href="#729"> 729: </a></span><span class="l"><a href="#730"> 730: </a></span><span class="l"><a href="#731"> 731: </a></span><span class="l"><a href="#732"> 732: </a></span><span class="l"><a href="#733"> 733: </a></span><span class="l"><a href="#734"> 734: </a></span><span class="l"><a href="#735"> 735: </a></span><span class="l"><a href="#736"> 736: </a></span><span class="l"><a href="#737"> 737: </a></span><span class="l"><a href="#738"> 738: </a></span><span class="l"><a href="#739"> 739: </a></span><span class="l"><a href="#740"> 740: </a></span><span class="l"><a href="#741"> 741: </a></span><span class="l"><a href="#742"> 742: </a></span><span class="l"><a href="#743"> 743: </a></span><span class="l"><a href="#744"> 744: </a></span><span class="l"><a href="#745"> 745: </a></span><span class="l"><a href="#746"> 746: </a></span><span class="l"><a href="#747"> 747: </a></span><span class="l"><a href="#748"> 748: </a></span><span class="l"><a href="#749"> 749: </a></span><span class="l"><a href="#750"> 750: </a></span><span class="l"><a href="#751"> 751: </a></span><span class="l"><a href="#752"> 752: </a></span><span class="l"><a href="#753"> 753: </a></span><span class="l"><a href="#754"> 754: </a></span><span class="l"><a href="#755"> 755: </a></span><span class="l"><a href="#756"> 756: </a></span><span class="l"><a href="#757"> 757: </a></span><span class="l"><a href="#758"> 758: </a></span><span class="l"><a href="#759"> 759: </a></span><span class="l"><a href="#760"> 760: </a></span><span class="l"><a href="#761"> 761: </a></span><span class="l"><a href="#762"> 762: </a></span><span class="l"><a href="#763"> 763: </a></span><span class="l"><a href="#764"> 764: </a></span><span class="l"><a href="#765"> 765: </a></span><span class="l"><a href="#766"> 766: </a></span><span class="l"><a href="#767"> 767: </a></span><span class="l"><a href="#768"> 768: </a></span><span class="l"><a href="#769"> 769: </a></span><span class="l"><a href="#770"> 770: </a></span><span class="l"><a href="#771"> 771: </a></span><span class="l"><a href="#772"> 772: </a></span><span class="l"><a href="#773"> 773: </a></span><span class="l"><a href="#774"> 774: </a></span><span class="l"><a href="#775"> 775: </a></span><span class="l"><a href="#776"> 776: </a></span><span class="l"><a href="#777"> 777: </a></span><span class="l"><a href="#778"> 778: </a></span><span class="l"><a href="#779"> 779: </a></span><span class="l"><a href="#780"> 780: </a></span><span class="l"><a href="#781"> 781: </a></span><span class="l"><a href="#782"> 782: </a></span><span class="l"><a href="#783"> 783: </a></span><span class="l"><a href="#784"> 784: </a></span><span class="l"><a href="#785"> 785: </a></span><span class="l"><a href="#786"> 786: </a></span><span class="l"><a href="#787"> 787: </a></span><span class="l"><a href="#788"> 788: </a></span><span class="l"><a href="#789"> 789: </a></span><span class="l"><a href="#790"> 790: </a></span><span class="l"><a href="#791"> 791: </a></span><span class="l"><a href="#792"> 792: </a></span><span class="l"><a href="#793"> 793: </a></span><span class="l"><a href="#794"> 794: </a></span><span class="l"><a href="#795"> 795: </a></span><span class="l"><a href="#796"> 796: </a></span><span class="l"><a href="#797"> 797: </a></span><span class="l"><a href="#798"> 798: </a></span><span class="l"><a href="#799"> 799: </a></span><span class="l"><a href="#800"> 800: </a></span><span class="l"><a href="#801"> 801: </a></span><span class="l"><a href="#802"> 802: </a></span><span class="l"><a href="#803"> 803: </a></span><span class="l"><a href="#804"> 804: </a></span><span class="l"><a href="#805"> 805: </a></span><span class="l"><a href="#806"> 806: </a></span><span class="l"><a href="#807"> 807: </a></span><span class="l"><a href="#808"> 808: </a></span><span class="l"><a href="#809"> 809: </a></span><span class="l"><a href="#810"> 810: </a></span><span class="l"><a href="#811"> 811: </a></span><span class="l"><a href="#812"> 812: </a></span><span class="l"><a href="#813"> 813: </a></span><span class="l"><a href="#814"> 814: </a></span><span class="l"><a href="#815"> 815: </a></span><span class="l"><a href="#816"> 816: </a></span><span class="l"><a href="#817"> 817: </a></span><span class="l"><a href="#818"> 818: </a></span><span class="l"><a href="#819"> 819: </a></span><span class="l"><a href="#820"> 820: </a></span><span class="l"><a href="#821"> 821: </a></span><span class="l"><a href="#822"> 822: </a></span><span class="l"><a href="#823"> 823: </a></span><span class="l"><a href="#824"> 824: </a></span><span class="l"><a href="#825"> 825: </a></span><span class="l"><a href="#826"> 826: </a></span><span class="l"><a href="#827"> 827: </a></span><span class="l"><a href="#828"> 828: </a></span><span class="l"><a href="#829"> 829: </a></span><span class="l"><a href="#830"> 830: </a></span><span class="l"><a href="#831"> 831: </a></span><span class="l"><a href="#832"> 832: </a></span><span class="l"><a href="#833"> 833: </a></span><span class="l"><a href="#834"> 834: </a></span><span class="l"><a href="#835"> 835: </a></span><span class="l"><a href="#836"> 836: </a></span><span class="l"><a href="#837"> 837: </a></span><span class="l"><a href="#838"> 838: </a></span><span class="l"><a href="#839"> 839: </a></span><span class="l"><a href="#840"> 840: </a></span><span class="l"><a href="#841"> 841: </a></span><span class="l"><a href="#842"> 842: </a></span><span class="l"><a href="#843"> 843: </a></span><span class="l"><a href="#844"> 844: </a></span><span class="l"><a href="#845"> 845: </a></span><span class="l"><a href="#846"> 846: </a></span><span class="l"><a href="#847"> 847: </a></span><span class="l"><a href="#848"> 848: </a></span><span class="l"><a href="#849"> 849: </a></span><span class="l"><a href="#850"> 850: </a></span><span class="l"><a href="#851"> 851: </a></span><span class="l"><a href="#852"> 852: </a></span><span class="l"><a href="#853"> 853: </a></span><span class="l"><a href="#854"> 854: </a></span><span class="l"><a href="#855"> 855: </a></span><span class="l"><a href="#856"> 856: </a></span><span class="l"><a href="#857"> 857: </a></span><span class="l"><a href="#858"> 858: </a></span><span class="l"><a href="#859"> 859: </a></span><span class="l"><a href="#860"> 860: </a></span><span class="l"><a href="#861"> 861: </a></span><span class="l"><a href="#862"> 862: </a></span><span class="l"><a href="#863"> 863: </a></span><span class="l"><a href="#864"> 864: </a></span><span class="l"><a href="#865"> 865: </a></span><span class="l"><a href="#866"> 866: </a></span><span class="l"><a href="#867"> 867: </a></span><span class="l"><a href="#868"> 868: </a></span><span class="l"><a href="#869"> 869: </a></span><span class="l"><a href="#870"> 870: </a></span><span class="l"><a href="#871"> 871: </a></span><span class="l"><a href="#872"> 872: </a></span><span class="l"><a href="#873"> 873: </a></span><span class="l"><a href="#874"> 874: </a></span><span class="l"><a href="#875"> 875: </a></span><span class="l"><a href="#876"> 876: </a></span><span class="l"><a href="#877"> 877: </a></span><span class="l"><a href="#878"> 878: </a></span><span class="l"><a href="#879"> 879: </a></span><span class="l"><a href="#880"> 880: </a></span><span class="l"><a href="#881"> 881: </a></span><span class="l"><a href="#882"> 882: </a></span><span class="l"><a href="#883"> 883: </a></span><span class="l"><a href="#884"> 884: </a></span><span class="l"><a href="#885"> 885: </a></span><span class="l"><a href="#886"> 886: </a></span><span class="l"><a href="#887"> 887: </a></span><span class="l"><a href="#888"> 888: </a></span><span class="l"><a href="#889"> 889: </a></span><span class="l"><a href="#890"> 890: </a></span><span class="l"><a href="#891"> 891: </a></span><span class="l"><a href="#892"> 892: </a></span><span class="l"><a href="#893"> 893: </a></span><span class="l"><a href="#894"> 894: </a></span></span><span class="l"><a href="#895"> 895: </a></span></span><span class="l"><a href="#896"> 896: </a></span></span><span class="l"><a href="#897"> 897: </a></span><span class="l"><a href="#898"> 898: </a></span><span class="l"><a href="#899"> 899: </a></span><span class="l"><a href="#900"> 900: </a></span><span class="l"><a href="#901"> 901: </a></span><span class="l"><a href="#902"> 902: </a></span><span class="l"><a href="#903"> 903: </a></span><span class="l"><a href="#904"> 904: </a></span><span class="l"><a href="#905"> 905: </a></span><span class="l"><a href="#906"> 906: </a></span><span class="l"><a href="#907"> 907: </a></span><span class="l"><a href="#908"> 908: </a></span><span class="l"><a href="#909"> 909: </a></span><span class="l"><a href="#910"> 910: </a></span><span class="l"><a href="#911"> 911: </a></span><span class="l"><a href="#912"> 912: </a></span><span class="l"><a href="#913"> 913: </a></span><span class="l"><a href="#914"> 914: </a></span><span class="l"><a href="#915"> 915: </a></span><span class="l"><a href="#916"> 916: </a></span><span class="l"><a href="#917"> 917: </a></span><span class="l"><a href="#918"> 918: </a></span><span class="l"><a href="#919"> 919: </a></span><span class="l"><a href="#920"> 920: </a></span><span class="l"><a href="#921"> 921: </a></span><span class="l"><a href="#922"> 922: </a></span><span class="l"><a href="#923"> 923: </a></span><span class="l"><a href="#924"> 924: </a></span><span class="l"><a href="#925"> 925: </a></span><span class="l"><a href="#926"> 926: </a></span><span class="l"><a href="#927"> 927: </a></span><span class="l"><a href="#928"> 928: </a></span><span class="l"><a href="#929"> 929: </a></span><span class="l"><a href="#930"> 930: </a></span><span class="l"><a href="#931"> 931: </a></span><span class="l"><a href="#932"> 932: </a></span><span class="l"><a href="#933"> 933: </a></span><span class="l"><a href="#934"> 934: </a></span><span class="l"><a href="#935"> 935: </a></span><span class="l"><a href="#936"> 936: </a></span><span class="l"><a href="#937"> 937: </a></span><span class="l"><a href="#938"> 938: </a></span><span class="l"><a href="#939"> 939: </a></span><span class="l"><a href="#940"> 940: </a></span><span class="l"><a href="#941"> 941: </a></span><span class="l"><a href="#942"> 942: </a></span><span class="l"><a href="#943"> 943: </a></span><span class="l"><a href="#944"> 944: </a></span><span class="l"><a href="#945"> 945: </a></span><span class="l"><a href="#946"> 946: </a></span><span class="l"><a href="#947"> 947: </a></span><span class="l"><a href="#948"> 948: </a></span><span class="l"><a href="#949"> 949: </a></span><span class="l"><a href="#950"> 950: </a></span><span class="l"><a href="#951"> 951: </a></span><span class="l"><a href="#952"> 952: </a></span><span class="l"><a href="#953"> 953: </a></span><span class="l"><a href="#954"> 954: </a></span><span class="l"><a href="#955"> 955: </a></span><span class="l"><a href="#956"> 956: </a></span><span class="l"><a href="#957"> 957: </a></span><span class="l"><a href="#958"> 958: </a></span><span class="l"><a href="#959"> 959: </a></span><span class="l"><a href="#960"> 960: </a></span><span class="l"><a href="#961"> 961: </a></span><span class="l"><a href="#962"> 962: </a></span><span class="l"><a href="#963"> 963: </a></span><span class="l"><a href="#964"> 964: </a></span></span><span class="l"><a href="#965"> 965: </a></span></span><span class="l"><a href="#966"> 966: </a></span></span><span class="l"><a href="#967"> 967: </a></span></span><span class="l"><a href="#968"> 968: </a></span></span><span class="l"><a href="#969"> 969: </a></span></span><span class="l"><a href="#970"> 970: </a></span></span><span class="l"><a href="#971"> 971: </a></span></span><span class="l"><a href="#972"> 972: </a></span><span class="l"><a href="#973"> 973: </a></span><span class="l"><a href="#974"> 974: </a></span><span class="l"><a href="#975"> 975: </a></span><span class="l"><a href="#976"> 976: </a></span><span class="l"><a href="#977"> 977: </a></span><span class="l"><a href="#978"> 978: </a></span><span class="l"><a href="#979"> 979: </a></span><span class="l"><a href="#980"> 980: </a></span><span class="l"><a href="#981"> 981: </a></span><span class="l"><a href="#982"> 982: </a></span><span class="l"><a href="#983"> 983: </a></span><span class="l"><a href="#984"> 984: </a></span><span class="l"><a href="#985"> 985: </a></span><span class="l"><a href="#986"> 986: </a></span><span class="l"><a href="#987"> 987: </a></span><span class="l"><a href="#988"> 988: </a></span><span class="l"><a href="#989"> 989: </a></span><span class="l"><a href="#990"> 990: </a></span><span class="l"><a href="#991"> 991: </a></span><span class="l"><a href="#992"> 992: </a></span><span class="l"><a href="#993"> 993: </a></span><span class="l"><a href="#994"> 994: </a></span><span class="l"><a href="#995"> 995: </a></span><span class="l"><a href="#996"> 996: </a></span><span class="l"><a href="#997"> 997: </a></span><span class="l"><a href="#998"> 998: </a></span><span class="l"><a href="#999"> 999: </a></span><span class="l"><a href="#1000">1000: </a></span><span class="l"><a href="#1001">1001: </a></span><span class="l"><a href="#1002">1002: </a></span><span class="l"><a href="#1003">1003: </a></span><span class="l"><a href="#1004">1004: </a></span><span class="l"><a href="#1005">1005: </a></span><span class="l"><a href="#1006">1006: </a></span><span class="l"><a href="#1007">1007: </a></span><span class="l"><a href="#1008">1008: </a></span><span class="l"><a href="#1009">1009: </a></span><span class="l"><a href="#1010">1010: </a></span><span class="l"><a href="#1011">1011: </a></span><span class="l"><a href="#1012">1012: </a></span><span class="l"><a href="#1013">1013: </a></span><span class="l"><a href="#1014">1014: </a></span><span class="l"><a href="#1015">1015: </a></span><span class="l"><a href="#1016">1016: </a></span><span class="l"><a href="#1017">1017: </a></span><span class="l"><a href="#1018">1018: </a></span><span class="l"><a href="#1019">1019: </a></span></span><span class="l"><a href="#1020">1020: </a></span></span><span class="l"><a href="#1021">1021: </a></span></span><span class="l"><a href="#1022">1022: </a></span></span><span class="l"><a href="#1023">1023: </a></span></span><span class="l"><a href="#1024">1024: </a></span></span><span class="l"><a href="#1025">1025: </a></span></span><span class="l"><a href="#1026">1026: </a></span><span class="l"><a href="#1027">1027: </a></span><span class="l"><a href="#1028">1028: </a></span><span class="l"><a href="#1029">1029: </a></span><span class="l"><a href="#1030">1030: </a></span><span class="l"><a href="#1031">1031: </a></span><span class="l"><a href="#1032">1032: </a></span><span class="l"><a href="#1033">1033: </a></span><span class="l"><a href="#1034">1034: </a></span><span class="l"><a href="#1035">1035: </a></span><span class="l"><a href="#1036">1036: </a></span><span class="l"><a href="#1037">1037: </a></span><span class="l"><a href="#1038">1038: </a></span><span class="l"><a href="#1039">1039: </a></span><span class="l"><a href="#1040">1040: </a></span><span class="l"><a href="#1041">1041: </a></span><span class="l"><a href="#1042">1042: </a></span><span class="l"><a href="#1043">1043: </a></span><span class="l"><a href="#1044">1044: </a></span><span class="l"><a href="#1045">1045: </a></span><span class="l"><a href="#1046">1046: </a></span><span class="l"><a href="#1047">1047: </a></span><span class="l"><a href="#1048">1048: </a></span><span class="l"><a href="#1049">1049: </a></span><span class="l"><a href="#1050">1050: </a></span><span class="l"><a href="#1051">1051: </a></span><span class="l"><a href="#1052">1052: </a></span><span class="l"><a href="#1053">1053: </a></span></span><span class="l"><a href="#1054">1054: </a></span></span><span class="l"><a href="#1055">1055: </a></span></span><span class="l"><a href="#1056">1056: </a></span></span><span class="l"><a href="#1057">1057: </a></span></span><span class="l"><a href="#1058">1058: </a></span></span><span class="l"><a href="#1059">1059: </a></span><span class="l"><a href="#1060">1060: </a></span><span class="l"><a href="#1061">1061: </a></span><span class="l"><a href="#1062">1062: </a></span><span class="l"><a href="#1063">1063: </a></span><span class="l"><a href="#1064">1064: </a></span><span class="l"><a href="#1065">1065: </a></span><span class="l"><a href="#1066">1066: </a></span><span class="l"><a href="#1067">1067: </a></span><span class="l"><a href="#1068">1068: </a></span><span class="l"><a href="#1069">1069: </a></span><span class="l"><a href="#1070">1070: </a></span><span class="l"><a href="#1071">1071: </a></span><span class="l"><a href="#1072">1072: </a></span><span class="l"><a href="#1073">1073: </a></span><span class="l"><a href="#1074">1074: </a></span><span class="l"><a href="#1075">1075: </a></span><span class="l"><a href="#1076">1076: </a></span><span class="l"><a href="#1077">1077: </a></span></span><span class="l"><a href="#1078">1078: </a></span></span><span class="l"><a href="#1079">1079: </a></span></span><span class="l"><a href="#1080">1080: </a></span></span><span class="l"><a href="#1081">1081: </a></span></span><span class="l"><a href="#1082">1082: </a></span></span><span class="l"><a href="#1083">1083: </a></span></span><span class="l"><a href="#1084">1084: </a></span><span class="l"><a href="#1085">1085: </a></span><span class="l"><a href="#1086">1086: </a></span><span class="l"><a href="#1087">1087: </a></span><span class="l"><a href="#1088">1088: </a></span><span class="l"><a href="#1089">1089: </a></span><span class="l"><a href="#1090">1090: </a></span><span class="l"><a href="#1091">1091: </a></span><span class="l"><a href="#1092">1092: </a></span><span class="l"><a href="#1093">1093: </a></span><span class="l"><a href="#1094">1094: </a></span><span class="l"><a href="#1095">1095: </a></span><span class="l"><a href="#1096">1096: </a></span><span class="l"><a href="#1097">1097: </a></span><span class="l"><a href="#1098">1098: </a></span><span class="l"><a href="#1099">1099: </a></span><span class="l"><a href="#1100">1100: </a></span><span class="l"><a href="#1101">1101: </a></span><span class="l"><a href="#1102">1102: </a></span><span class="l"><a href="#1103">1103: </a></span><span class="l"><a href="#1104">1104: </a></span><span class="l"><a href="#1105">1105: </a></span><span class="l"><a href="#1106">1106: </a></span><span class="l"><a href="#1107">1107: </a></span><span class="l"><a href="#1108">1108: </a></span></span><span class="l"><a href="#1109">1109: </a></span></span><span class="l"><a href="#1110">1110: </a></span></span><span class="l"><a href="#1111">1111: </a></span></span><span class="l"><a href="#1112">1112: </a></span></span><span class="l"><a href="#1113">1113: </a></span></span><span class="l"><a href="#1114">1114: </a></span><span class="l"><a href="#1115">1115: </a></span><span class="l"><a href="#1116">1116: </a></span><span class="l"><a href="#1117">1117: </a></span><span class="l"><a href="#1118">1118: </a></span><span class="l"><a href="#1119">1119: </a></span><span class="l"><a href="#1120">1120: </a></span><span class="l"><a href="#1121">1121: </a></span><span class="l"><a href="#1122">1122: </a></span><span class="l"><a href="#1123">1123: </a></span><span class="l"><a href="#1124">1124: </a></span><span class="l"><a href="#1125">1125: </a></span><span class="l"><a href="#1126">1126: </a></span><span class="l"><a href="#1127">1127: </a></span><span class="l"><a href="#1128">1128: </a></span><span class="l"><a href="#1129">1129: </a></span><span class="l"><a href="#1130">1130: </a></span><span class="l"><a href="#1131">1131: </a></span><span class="l"><a href="#1132">1132: </a></span></span><span class="l"><a href="#1133">1133: </a></span></span><span class="l"><a href="#1134">1134: </a></span></span><span class="l"><a href="#1135">1135: </a></span></span><span class="l"><a href="#1136">1136: </a></span></span><span class="l"><a href="#1137">1137: </a></span></span><span class="l"><a href="#1138">1138: </a></span><span class="l"><a href="#1139">1139: </a></span><span class="l"><a href="#1140">1140: </a></span><span class="l"><a href="#1141">1141: </a></span><span class="l"><a href="#1142">1142: </a></span><span class="l"><a href="#1143">1143: </a></span><span class="l"><a href="#1144">1144: </a></span><span class="l"><a href="#1145">1145: </a></span><span class="l"><a href="#1146">1146: </a></span><span class="l"><a href="#1147">1147: </a></span><span class="l"><a href="#1148">1148: </a></span><span class="l"><a href="#1149">1149: </a></span><span class="l"><a href="#1150">1150: </a></span><span class="l"><a href="#1151">1151: </a></span><span class="l"><a href="#1152">1152: </a></span><span class="l"><a href="#1153">1153: </a></span><span class="l"><a href="#1154">1154: </a></span></span><span class="l"><a href="#1155">1155: </a></span></span><span class="l"><a href="#1156">1156: </a></span></span><span class="l"><a href="#1157">1157: </a></span></span><span class="l"><a href="#1158">1158: </a></span></span><span class="l"><a href="#1159">1159: </a></span><span class="l"><a href="#1160">1160: </a></span><span class="l"><a href="#1161">1161: </a></span><span class="l"><a href="#1162">1162: </a></span><span class="l"><a href="#1163">1163: </a></span><span class="l"><a href="#1164">1164: </a></span><span class="l"><a href="#1165">1165: </a></span><span class="l"><a href="#1166">1166: </a></span><span class="l"><a href="#1167">1167: </a></span><span class="l"><a href="#1168">1168: </a></span><span class="l"><a href="#1169">1169: </a></span><span class="l"><a href="#1170">1170: </a></span><span class="l"><a href="#1171">1171: </a></span><span class="l"><a href="#1172">1172: </a></span><span class="l"><a href="#1173">1173: </a></span><span class="l"><a href="#1174">1174: </a></span><span class="l"><a href="#1175">1175: </a></span><span class="l"><a href="#1176">1176: </a></span><span class="l"><a href="#1177">1177: </a></span></span><span class="l"><a href="#1178">1178: </a></span></span><span class="l"><a href="#1179">1179: </a></span></span><span class="l"><a href="#1180">1180: </a></span></span><span class="l"><a href="#1181">1181: </a></span></span><span class="l"><a href="#1182">1182: </a></span></span><span class="l"><a href="#1183">1183: </a></span></span><span class="l"><a href="#1184">1184: </a></span><span class="l"><a href="#1185">1185: </a></span><span class="l"><a href="#1186">1186: </a></span><span class="l"><a href="#1187">1187: </a></span><span class="l"><a href="#1188">1188: </a></span><span class="l"><a href="#1189">1189: </a></span><span class="l"><a href="#1190">1190: </a></span><span class="l"><a href="#1191">1191: </a></span><span class="l"><a href="#1192">1192: </a></span><span class="l"><a href="#1193">1193: </a></span><span class="l"><a href="#1194">1194: </a></span><span class="l"><a href="#1195">1195: </a></span><span class="l"><a href="#1196">1196: </a></span><span class="l"><a href="#1197">1197: </a></span><span class="l"><a href="#1198">1198: </a></span><span class="l"><a href="#1199">1199: </a></span><span class="l"><a href="#1200">1200: </a></span><span class="l"><a href="#1201">1201: </a></span><span class="l"><a href="#1202">1202: </a></span><span class="l"><a href="#1203">1203: </a></span><span class="l"><a href="#1204">1204: </a></span><span class="l"><a href="#1205">1205: </a></span><span class="l"><a href="#1206">1206: </a></span><span class="l"><a href="#1207">1207: </a></span><span class="l"><a href="#1208">1208: </a></span><span class="l"><a href="#1209">1209: </a></span><span class="l"><a href="#1210">1210: </a></span><span class="l"><a href="#1211">1211: </a></span><span class="l"><a href="#1212">1212: </a></span><span class="l"><a href="#1213">1213: </a></span><span class="l"><a href="#1214">1214: </a></span><span class="l"><a href="#1215">1215: </a></span><span class="l"><a href="#1216">1216: </a></span><span class="l"><a href="#1217">1217: </a></span><span class="l"><a href="#1218">1218: </a></span><span class="l"><a href="#1219">1219: </a></span><span class="l"><a href="#1220">1220: </a></span><span class="l"><a href="#1221">1221: </a></span><span class="l"><a href="#1222">1222: </a></span><span class="l"><a href="#1223">1223: </a></span><span class="l"><a href="#1224">1224: </a></span><span class="l"><a href="#1225">1225: </a></span><span class="l"><a href="#1226">1226: </a></span><span class="l"><a href="#1227">1227: </a></span><span class="l"><a href="#1228">1228: </a></span><span class="l"><a href="#1229">1229: </a></span><span class="l"><a href="#1230">1230: </a></span><span class="l"><a href="#1231">1231: </a></span></span><span class="l"><a href="#1232">1232: </a></span></span><span class="l"><a href="#1233">1233: </a></span></span><span class="l"><a href="#1234">1234: </a></span></span><span class="l"><a href="#1235">1235: </a></span></span><span class="l"><a href="#1236">1236: </a></span></span><span class="l"><a href="#1237">1237: </a></span><span class="l"><a href="#1238">1238: </a></span><span class="l"><a href="#1239">1239: </a></span><span class="l"><a href="#1240">1240: </a></span><span class="l"><a href="#1241">1241: </a></span><span class="l"><a href="#1242">1242: </a></span><span class="l"><a href="#1243">1243: </a></span><span class="l"><a href="#1244">1244: </a></span><span class="l"><a href="#1245">1245: </a></span><span class="l"><a href="#1246">1246: </a></span><span class="l"><a href="#1247">1247: </a></span><span class="l"><a href="#1248">1248: </a></span><span class="l"><a href="#1249">1249: </a></span><span class="l"><a href="#1250">1250: </a></span><span class="l"><a href="#1251">1251: </a></span><span class="l"><a href="#1252">1252: </a></span></span><span class="l"><a href="#1253">1253: </a></span></span><span class="l"><a href="#1254">1254: </a></span></span><span class="l"><a href="#1255">1255: </a></span></span><span class="l"><a href="#1256">1256: </a></span></span><span class="l"><a href="#1257">1257: </a></span></span><span class="l"><a href="#1258">1258: </a></span></span><span class="l"><a href="#1259">1259: </a></span><span class="l"><a href="#1260">1260: </a></span><span class="l"><a href="#1261">1261: </a></span><span class="l"><a href="#1262">1262: </a></span><span class="l"><a href="#1263">1263: </a></span><span class="l"><a href="#1264">1264: </a></span><span class="l"><a href="#1265">1265: </a></span><span class="l"><a href="#1266">1266: </a></span><span class="l"><a href="#1267">1267: </a></span><span class="l"><a href="#1268">1268: </a></span><span class="l"><a href="#1269">1269: </a></span><span class="l"><a href="#1270">1270: </a></span><span class="l"><a href="#1271">1271: </a></span><span class="l"><a href="#1272">1272: </a></span><span class="l"><a href="#1273">1273: </a></span><span class="l"><a href="#1274">1274: </a></span><span class="l"><a href="#1275">1275: </a></span><span class="l"><a href="#1276">1276: </a></span><span class="l"><a href="#1277">1277: </a></span><span class="l"><a href="#1278">1278: </a></span><span class="l"><a href="#1279">1279: </a></span><span class="l"><a href="#1280">1280: </a></span><span class="l"><a href="#1281">1281: </a></span><span class="l"><a href="#1282">1282: </a></span><span class="l"><a href="#1283">1283: </a></span><span class="l"><a href="#1284">1284: </a></span><span class="l"><a href="#1285">1285: </a></span><span class="l"><a href="#1286">1286: </a></span><span class="l"><a href="#1287">1287: </a></span><span class="l"><a href="#1288">1288: </a></span><span class="l"><a href="#1289">1289: </a></span><span class="l"><a href="#1290">1290: </a></span><span class="l"><a href="#1291">1291: </a></span><span class="l"><a href="#1292">1292: </a></span><span class="l"><a href="#1293">1293: </a></span><span class="l"><a href="#1294">1294: </a></span><span class="l"><a href="#1295">1295: </a></span><span class="l"><a href="#1296">1296: </a></span><span class="l"><a href="#1297">1297: </a></span></span><span class="l"><a href="#1298">1298: </a></span></span><span class="l"><a href="#1299">1299: </a></span></span><span class="l"><a href="#1300">1300: </a></span></span><span class="l"><a href="#1301">1301: </a></span></span><span class="l"><a href="#1302">1302: </a></span></span><span class="l"><a href="#1303">1303: </a></span><span class="l"><a href="#1304">1304: </a></span><span class="l"><a href="#1305">1305: </a></span><span class="l"><a href="#1306">1306: </a></span><span class="l"><a href="#1307">1307: </a></span><span class="l"><a href="#1308">1308: </a></span><span class="l"><a href="#1309">1309: </a></span><span class="l"><a href="#1310">1310: </a></span><span class="l"><a href="#1311">1311: </a></span><span class="l"><a href="#1312">1312: </a></span><span class="l"><a href="#1313">1313: </a></span><span class="l"><a href="#1314">1314: </a></span><span class="l"><a href="#1315">1315: </a></span><span class="l"><a href="#1316">1316: </a></span><span class="l"><a href="#1317">1317: </a></span><span class="l"><a href="#1318">1318: </a></span></span><span class="l"><a href="#1319">1319: </a></span></span><span class="l"><a href="#1320">1320: </a></span></span><span class="l"><a href="#1321">1321: </a></span><span class="l"><a href="#1322">1322: </a></span><span class="l"><a href="#1323">1323: </a></span><span class="l"><a href="#1324">1324: </a></span><span class="l"><a href="#1325">1325: </a></span><span class="l"><a href="#1326">1326: </a></span><span class="l"><a href="#1327">1327: </a></span><span class="l"><a href="#1328">1328: </a></span><span class="l"><a href="#1329">1329: </a></span><span class="l"><a href="#1330">1330: </a></span><span class="l"><a href="#1331">1331: </a></span><span class="l"><a href="#1332">1332: </a></span><span class="l"><a href="#1333">1333: </a></span><span class="l"><a href="#1334">1334: </a></span><span class="l"><a href="#1335">1335: </a></span><span class="l"><a href="#1336">1336: </a></span><span class="l"><a href="#1337">1337: </a></span><span class="l"><a href="#1338">1338: </a></span><span class="l"><a href="#1339">1339: </a></span><span class="l"><a href="#1340">1340: </a></span><span class="l"><a href="#1341">1341: </a></span><span class="l"><a href="#1342">1342: </a></span><span class="l"><a href="#1343">1343: </a></span><span class="l"><a href="#1344">1344: </a></span><span class="l"><a href="#1345">1345: </a></span><span class="l"><a href="#1346">1346: </a></span><span class="l"><a href="#1347">1347: </a></span><span class="l"><a href="#1348">1348: </a></span><span class="l"><a href="#1349">1349: </a></span><span class="l"><a href="#1350">1350: </a></span><span class="l"><a href="#1351">1351: </a></span><span class="l"><a href="#1352">1352: </a></span><span class="l"><a href="#1353">1353: </a></span><span class="l"><a href="#1354">1354: </a></span><span class="l"><a href="#1355">1355: </a></span><span class="l"><a href="#1356">1356: </a></span><span class="l"><a href="#1357">1357: </a></span><span class="l"><a href="#1358">1358: </a></span><span class="l"><a href="#1359">1359: </a></span><span class="l"><a href="#1360">1360: </a></span><span class="l"><a href="#1361">1361: </a></span><span class="l"><a href="#1362">1362: </a></span><span class="l"><a href="#1363">1363: </a></span><span class="l"><a href="#1364">1364: </a></span><span class="l"><a href="#1365">1365: </a></span><span class="l"><a href="#1366">1366: </a></span><span class="l"><a href="#1367">1367: </a></span><span class="l"><a href="#1368">1368: </a></span><span class="l"><a href="#1369">1369: </a></span><span class="l"><a href="#1370">1370: </a></span><span class="l"><a href="#1371">1371: </a></span><span class="l"><a href="#1372">1372: </a></span><span class="l"><a href="#1373">1373: </a></span><span class="l"><a href="#1374">1374: </a></span><span class="l"><a href="#1375">1375: </a></span><span class="l"><a href="#1376">1376: </a></span><span class="l"><a href="#1377">1377: </a></span><span class="l"><a href="#1378">1378: </a></span><span class="l"><a href="#1379">1379: </a></span><span class="l"><a href="#1380">1380: </a></span><span class="l"><a href="#1381">1381: </a></span><span class="l"><a href="#1382">1382: </a></span><span class="l"><a href="#1383">1383: </a></span><span class="l"><a href="#1384">1384: </a></span><span class="l"><a href="#1385">1385: </a></span><span class="l"><a href="#1386">1386: </a></span><span class="l"><a href="#1387">1387: </a></span><span class="l"><a href="#1388">1388: </a></span><span class="l"><a href="#1389">1389: </a></span><span class="l"><a href="#1390">1390: </a></span><span class="l"><a href="#1391">1391: </a></span><span class="l"><a href="#1392">1392: </a></span><span class="l"><a href="#1393">1393: </a></span><span class="l"><a href="#1394">1394: </a></span><span class="l"><a href="#1395">1395: </a></span><span class="l"><a href="#1396">1396: </a></span><span class="l"><a href="#1397">1397: </a></span><span class="l"><a href="#1398">1398: </a></span><span class="l"><a href="#1399">1399: </a></span><span class="l"><a href="#1400">1400: </a></span><span class="l"><a href="#1401">1401: </a></span><span class="l"><a href="#1402">1402: </a></span><span class="l"><a href="#1403">1403: </a></span><span class="l"><a href="#1404">1404: </a></span><span class="l"><a href="#1405">1405: </a></span></span><span class="l"><a href="#1406">1406: </a></span></span><span class="l"><a href="#1407">1407: </a></span></span><span class="l"><a href="#1408">1408: </a></span><span class="l"><a href="#1409">1409: </a></span><span class="l"><a href="#1410">1410: </a></span><span class="l"><a href="#1411">1411: </a></span><span class="l"><a href="#1412">1412: </a></span><span class="l"><a href="#1413">1413: </a></span><span class="l"><a href="#1414">1414: </a></span><span class="l"><a href="#1415">1415: </a></span><span class="l"><a href="#1416">1416: </a></span><span class="l"><a href="#1417">1417: </a></span><span class="l"><a href="#1418">1418: </a></span><span class="l"><a href="#1419">1419: </a></span><span class="l"><a href="#1420">1420: </a></span><span class="l"><a href="#1421">1421: </a></span><span class="l"><a href="#1422">1422: </a></span><span class="l"><a href="#1423">1423: </a></span><span class="l"><a href="#1424">1424: </a></span><span class="l"><a href="#1425">1425: </a></span><span class="l"><a href="#1426">1426: </a></span><span class="l"><a href="#1427">1427: </a></span><span class="l"><a href="#1428">1428: </a></span><span class="l"><a href="#1429">1429: </a></span><span class="l"><a href="#1430">1430: </a></span><span class="l"><a href="#1431">1431: </a></span><span class="l"><a href="#1432">1432: </a></span><span class="l"><a href="#1433">1433: </a></span><span class="l"><a href="#1434">1434: </a></span><span class="l"><a href="#1435">1435: </a></span><span class="l"><a href="#1436">1436: </a></span></span><span class="l"><a href="#1437">1437: </a></span></span><span class="l"><a href="#1438">1438: </a></span></span><span class="l"><a href="#1439">1439: </a></span></span><span class="l"><a href="#1440">1440: </a></span><span class="l"><a href="#1441">1441: </a></span><span class="l"><a href="#1442">1442: </a></span><span class="l"><a href="#1443">1443: </a></span><span class="l"><a href="#1444">1444: </a></span><span class="l"><a href="#1445">1445: </a></span><span class="l"><a href="#1446">1446: </a></span><span class="l"><a href="#1447">1447: </a></span><span class="l"><a href="#1448">1448: </a></span><span class="l"><a href="#1449">1449: </a></span><span class="l"><a href="#1450">1450: </a></span><span class="l"><a href="#1451">1451: </a></span><span class="l"><a href="#1452">1452: </a></span><span class="l"><a href="#1453">1453: </a></span><span class="l"><a href="#1454">1454: </a></span><span class="l"><a href="#1455">1455: </a></span><span class="l"><a href="#1456">1456: </a></span><span class="l"><a href="#1457">1457: </a></span><span class="l"><a href="#1458">1458: </a></span><span class="l"><a href="#1459">1459: </a></span><span class="l"><a href="#1460">1460: </a></span><span class="l"><a href="#1461">1461: </a></span><span class="l"><a href="#1462">1462: </a></span><span class="l"><a href="#1463">1463: </a></span><span class="l"><a href="#1464">1464: </a></span><span class="l"><a href="#1465">1465: </a></span><span class="l"><a href="#1466">1466: </a></span><span class="l"><a href="#1467">1467: </a></span><span class="l"><a href="#1468">1468: </a></span><span class="l"><a href="#1469">1469: </a></span><span class="l"><a href="#1470">1470: </a></span><span class="l"><a href="#1471">1471: </a></span><span class="l"><a href="#1472">1472: </a></span><span class="l"><a href="#1473">1473: </a></span><span class="l"><a href="#1474">1474: </a></span><span class="l"><a href="#1475">1475: </a></span><span class="l"><a href="#1476">1476: </a></span><span class="l"><a href="#1477">1477: </a></span><span class="l"><a href="#1478">1478: </a></span><span class="l"><a href="#1479">1479: </a></span><span class="l"><a href="#1480">1480: </a></span><span class="l"><a href="#1481">1481: </a></span><span class="l"><a href="#1482">1482: </a></span><span class="l"><a href="#1483">1483: </a></span><span class="l"><a href="#1484">1484: </a></span><span class="l"><a href="#1485">1485: </a></span><span class="l"><a href="#1486">1486: </a></span></span><span class="l"><a href="#1487">1487: </a></span></span><span class="l"><a href="#1488">1488: </a></span></span><span class="l"><a href="#1489">1489: </a></span></span><span class="l"><a href="#1490">1490: </a></span></span><span class="l"><a href="#1491">1491: </a></span><span class="l"><a href="#1492">1492: </a></span><span class="l"><a href="#1493">1493: </a></span><span class="l"><a href="#1494">1494: </a></span><span class="l"><a href="#1495">1495: </a></span><span class="l"><a href="#1496">1496: </a></span><span class="l"><a href="#1497">1497: </a></span><span class="l"><a href="#1498">1498: </a></span><span class="l"><a href="#1499">1499: </a></span><span class="l"><a href="#1500">1500: </a></span><span class="l"><a href="#1501">1501: </a></span><span class="l"><a href="#1502">1502: </a></span><span class="l"><a href="#1503">1503: </a></span><span class="l"><a href="#1504">1504: </a></span><span class="l"><a href="#1505">1505: </a></span><span class="l"><a href="#1506">1506: </a></span><span class="l"><a href="#1507">1507: </a></span><span class="l"><a href="#1508">1508: </a></span><span class="l"><a href="#1509">1509: </a></span><span class="l"><a href="#1510">1510: </a></span><span class="l"><a href="#1511">1511: </a></span><span class="l"><a href="#1512">1512: </a></span><span class="l"><a href="#1513">1513: </a></span><span class="l"><a href="#1514">1514: </a></span><span class="l"><a href="#1515">1515: </a></span><span class="l"><a href="#1516">1516: </a></span><span class="l"><a href="#1517">1517: </a></span><span class="l"><a href="#1518">1518: </a></span><span class="l"><a href="#1519">1519: </a></span><span class="l"><a href="#1520">1520: </a></span><span class="l"><a href="#1521">1521: </a></span><span class="l"><a href="#1522">1522: </a></span><span class="l"><a href="#1523">1523: </a></span><span class="l"><a href="#1524">1524: </a></span></span><span class="l"><a href="#1525">1525: </a></span></span><span class="l"><a href="#1526">1526: </a></span></span><span class="l"><a href="#1527">1527: </a></span></span><span class="l"><a href="#1528">1528: </a></span><span class="l"><a href="#1529">1529: </a></span><span class="l"><a href="#1530">1530: </a></span><span class="l"><a href="#1531">1531: </a></span><span class="l"><a href="#1532">1532: </a></span><span class="l"><a href="#1533">1533: </a></span><span class="l"><a href="#1534">1534: </a></span><span class="l"><a href="#1535">1535: </a></span><span class="l"><a href="#1536">1536: </a></span><span class="l"><a href="#1537">1537: </a></span><span class="l"><a href="#1538">1538: </a></span><span class="l"><a href="#1539">1539: </a></span><span class="l"><a href="#1540">1540: </a></span><span class="l"><a href="#1541">1541: </a></span><span class="l"><a href="#1542">1542: </a></span><span class="l"><a href="#1543">1543: </a></span><span class="l"><a href="#1544">1544: </a></span><span class="l"><a href="#1545">1545: </a></span><span class="l"><a href="#1546">1546: </a></span><span class="l"><a href="#1547">1547: </a></span><span class="l"><a href="#1548">1548: </a></span><span class="l"><a href="#1549">1549: </a></span><span class="l"><a href="#1550">1550: </a></span><span class="l"><a href="#1551">1551: </a></span><span class="l"><a href="#1552">1552: </a></span><span class="l"><a href="#1553">1553: </a></span><span class="l"><a href="#1554">1554: </a></span><span class="l"><a href="#1555">1555: </a></span><span class="l"><a href="#1556">1556: </a></span><span class="l"><a href="#1557">1557: </a></span><span class="l"><a href="#1558">1558: </a></span><span class="l"><a href="#1559">1559: </a></span><span class="l"><a href="#1560">1560: </a></span><span class="l"><a href="#1561">1561: </a></span><span class="l"><a href="#1562">1562: </a></span><span class="l"><a href="#1563">1563: </a></span><span class="l"><a href="#1564">1564: </a></span><span class="l"><a href="#1565">1565: </a></span><span class="l"><a href="#1566">1566: </a></span><span class="l"><a href="#1567">1567: </a></span><span class="l"><a href="#1568">1568: </a></span><span class="l"><a href="#1569">1569: </a></span><span class="l"><a href="#1570">1570: </a></span><span class="l"><a href="#1571">1571: </a></span></span><span class="l"><a href="#1572">1572: </a></span></span><span class="l"><a href="#1573">1573: </a></span></span><span class="l"><a href="#1574">1574: </a></span></span><span class="l"><a href="#1575">1575: </a></span><span class="l"><a href="#1576">1576: </a></span><span class="l"><a href="#1577">1577: </a></span><span class="l"><a href="#1578">1578: </a></span><span class="l"><a href="#1579">1579: </a></span><span class="l"><a href="#1580">1580: </a></span><span class="l"><a href="#1581">1581: </a></span><span class="l"><a href="#1582">1582: </a></span><span class="l"><a href="#1583">1583: </a></span><span class="l"><a href="#1584">1584: </a></span><span class="l"><a href="#1585">1585: </a></span><span class="l"><a href="#1586">1586: </a></span><span class="l"><a href="#1587">1587: </a></span><span class="l"><a href="#1588">1588: </a></span></span><span class="l"><a href="#1589">1589: </a></span></span><span class="l"><a href="#1590">1590: </a></span></span><span class="l"><a href="#1591">1591: </a></span></span><span class="l"><a href="#1592">1592: </a></span><span class="l"><a href="#1593">1593: </a></span><span class="l"><a href="#1594">1594: </a></span><span class="l"><a href="#1595">1595: </a></span><span class="l"><a href="#1596">1596: </a></span><span class="l"><a href="#1597">1597: </a></span><span class="l"><a href="#1598">1598: </a></span><span class="l"><a href="#1599">1599: </a></span><span class="l"><a href="#1600">1600: </a></span><span class="l"><a href="#1601">1601: </a></span><span class="l"><a href="#1602">1602: </a></span><span class="l"><a href="#1603">1603: </a></span><span class="l"><a href="#1604">1604: </a></span><span class="l"><a href="#1605">1605: </a></span><span class="l"><a href="#1606">1606: </a></span><span class="l"><a href="#1607">1607: </a></span><span class="l"><a href="#1608">1608: </a></span><span class="l"><a href="#1609">1609: </a></span><span class="l"><a href="#1610">1610: </a></span><span class="l"><a href="#1611">1611: </a></span><span class="l"><a href="#1612">1612: </a></span><span class="l"><a href="#1613">1613: </a></span><span class="l"><a href="#1614">1614: </a></span><span class="l"><a href="#1615">1615: </a></span><span class="l"><a href="#1616">1616: </a></span><span class="l"><a href="#1617">1617: </a></span><span class="l"><a href="#1618">1618: </a></span></span><span class="l"><a href="#1619">1619: </a></span></span><span class="l"><a href="#1620">1620: </a></span></span><span class="l"><a href="#1621">1621: </a></span></span><span class="l"><a href="#1622">1622: </a></span><span class="l"><a href="#1623">1623: </a></span><span class="l"><a href="#1624">1624: </a></span><span class="l"><a href="#1625">1625: </a></span><span class="l"><a href="#1626">1626: </a></span><span class="l"><a href="#1627">1627: </a></span><span class="l"><a href="#1628">1628: </a></span><span class="l"><a href="#1629">1629: </a></span><span class="l"><a href="#1630">1630: </a></span><span class="l"><a href="#1631">1631: </a></span><span class="l"><a href="#1632">1632: </a></span><span class="l"><a href="#1633">1633: </a></span><span class="l"><a href="#1634">1634: </a></span><span class="l"><a href="#1635">1635: </a></span><span class="l"><a href="#1636">1636: </a></span><span class="l"><a href="#1637">1637: </a></span><span class="l"><a href="#1638">1638: </a></span><span class="l"><a href="#1639">1639: </a></span><span class="l"><a href="#1640">1640: </a></span><span class="l"><a href="#1641">1641: </a></span><span class="l"><a href="#1642">1642: </a></span><span class="l"><a href="#1643">1643: </a></span><span class="l"><a href="#1644">1644: </a></span><span class="l"><a href="#1645">1645: </a></span><span class="l"><a href="#1646">1646: </a></span><span class="l"><a href="#1647">1647: </a></span><span class="l"><a href="#1648">1648: </a></span><span class="l"><a href="#1649">1649: </a></span><span class="l"><a href="#1650">1650: </a></span><span class="l"><a href="#1651">1651: </a></span><span class="l"><a href="#1652">1652: </a></span><span class="l"><a href="#1653">1653: </a></span><span class="l"><a href="#1654">1654: </a></span><span class="l"><a href="#1655">1655: </a></span><span class="l"><a href="#1656">1656: </a></span><span class="l"><a href="#1657">1657: </a></span><span class="l"><a href="#1658">1658: </a></span><span class="l"><a href="#1659">1659: </a></span><span class="l"><a href="#1660">1660: </a></span><span class="l"><a href="#1661">1661: </a></span><span class="l"><a href="#1662">1662: </a></span><span class="l"><a href="#1663">1663: </a></span><span class="l"><a href="#1664">1664: </a></span><span class="l"><a href="#1665">1665: </a></span><span class="l"><a href="#1666">1666: </a></span><span class="l"><a href="#1667">1667: </a></span><span class="l"><a href="#1668">1668: </a></span><span class="l"><a href="#1669">1669: </a></span><span class="l"><a href="#1670">1670: </a></span><span class="l"><a href="#1671">1671: </a></span><span class="l"><a href="#1672">1672: </a></span><span class="l"><a href="#1673">1673: </a></span><span class="l"><a href="#1674">1674: </a></span><span class="l"><a href="#1675">1675: </a></span><span class="l"><a href="#1676">1676: </a></span><span class="l"><a href="#1677">1677: </a></span><span class="l"><a href="#1678">1678: </a></span><span class="l"><a href="#1679">1679: </a></span><span class="l"><a href="#1680">1680: </a></span></span><span class="l"><a href="#1681">1681: </a></span></span><span class="l"><a href="#1682">1682: </a></span></span><span class="l"><a href="#1683">1683: </a></span></span><span class="l"><a href="#1684">1684: </a></span><span class="l"><a href="#1685">1685: </a></span><span class="l"><a href="#1686">1686: </a></span><span class="l"><a href="#1687">1687: </a></span><span class="l"><a href="#1688">1688: </a></span><span class="l"><a href="#1689">1689: </a></span><span class="l"><a href="#1690">1690: </a></span><span class="l"><a href="#1691">1691: </a></span><span class="l"><a href="#1692">1692: </a></span><span class="l"><a href="#1693">1693: </a></span><span class="l"><a href="#1694">1694: </a></span><span class="l"><a href="#1695">1695: </a></span></span><span class="l"><a href="#1696">1696: </a></span></span><span class="l"><a href="#1697">1697: </a></span><span class="l"><a href="#1698">1698: </a></span><span class="l"><a href="#1699">1699: </a></span><span class="l"><a href="#1700">1700: </a></span><span class="l"><a href="#1701">1701: </a></span><span class="l"><a href="#1702">1702: </a></span><span class="l"><a href="#1703">1703: </a></span><span class="l"><a href="#1704">1704: </a></span><span class="l"><a href="#1705">1705: </a></span><span class="l"><a href="#1706">1706: </a></span><span class="l"><a href="#1707">1707: </a></span></span><span class="l"><a href="#1708">1708: </a></span></span><span class="l"><a href="#1709">1709: </a></span></span><span class="l"><a href="#1710">1710: </a></span><span class="l"><a href="#1711">1711: </a></span><span class="l"><a href="#1712">1712: </a></span><span class="l"><a href="#1713">1713: </a></span><span class="l"><a href="#1714">1714: </a></span><span class="l"><a href="#1715">1715: </a></span><span class="l"><a href="#1716">1716: </a></span><span class="l"><a href="#1717">1717: </a></span><span class="l"><a href="#1718">1718: </a></span><span class="l"><a href="#1719">1719: </a></span><span class="l"><a href="#1720">1720: </a></span><span class="l"><a href="#1721">1721: </a></span><span class="l"><a href="#1722">1722: </a></span><span class="l"><a href="#1723">1723: </a></span><span class="l"><a href="#1724">1724: </a></span><span class="l"><a href="#1725">1725: </a></span><span class="l"><a href="#1726">1726: </a></span><span class="l"><a href="#1727">1727: </a></span><span class="l"><a href="#1728">1728: </a></span><span class="l"><a href="#1729">1729: </a></span></span><span class="l"><a href="#1730">1730: </a></span></span><span class="l"><a href="#1731">1731: </a></span></span><span class="l"><a href="#1732">1732: </a></span><span class="l"><a href="#1733">1733: </a></span><span class="l"><a href="#1734">1734: </a></span><span class="l"><a href="#1735">1735: </a></span><span class="l"><a href="#1736">1736: </a></span><span class="l"><a href="#1737">1737: </a></span><span class="l"><a href="#1738">1738: </a></span><span class="l"><a href="#1739">1739: </a></span><span class="l"><a href="#1740">1740: </a></span><span class="l"><a href="#1741">1741: </a></span><span class="l"><a href="#1742">1742: </a></span><span class="l"><a href="#1743">1743: </a></span><span class="l"><a href="#1744">1744: </a></span><span class="l"><a href="#1745">1745: </a></span><span class="l"><a href="#1746">1746: </a></span><span class="l"><a href="#1747">1747: </a></span><span class="l"><a href="#1748">1748: </a></span><span class="l"><a href="#1749">1749: </a></span><span class="l"><a href="#1750">1750: </a></span><span class="l"><a href="#1751">1751: </a></span></span><span class="l"><a href="#1752">1752: </a></span></span><span class="l"><a href="#1753">1753: </a></span></span><span class="l"><a href="#1754">1754: </a></span></span><span class="l"><a href="#1755">1755: </a></span><span class="l"><a href="#1756">1756: </a></span><span class="l"><a href="#1757">1757: </a></span><span class="l"><a href="#1758">1758: </a></span><span class="l"><a href="#1759">1759: </a></span><span class="l"><a href="#1760">1760: </a></span><span class="l"><a href="#1761">1761: </a></span><span class="l"><a href="#1762">1762: </a></span><span class="l"><a href="#1763">1763: </a></span><span class="l"><a href="#1764">1764: </a></span><span class="l"><a href="#1765">1765: </a></span><span class="l"><a href="#1766">1766: </a></span><span class="l"><a href="#1767">1767: </a></span><span class="l"><a href="#1768">1768: </a></span><span class="l"><a href="#1769">1769: </a></span><span class="l"><a href="#1770">1770: </a></span><span class="l"><a href="#1771">1771: </a></span><span class="l"><a href="#1772">1772: </a></span><span class="l"><a href="#1773">1773: </a></span><span class="l"><a href="#1774">1774: </a></span><span class="l"><a href="#1775">1775: </a></span><span class="l"><a href="#1776">1776: </a></span><span class="l"><a href="#1777">1777: </a></span><span class="l"><a href="#1778">1778: </a></span></span><span class="l"><a href="#1779">1779: </a></span></span><span class="l"><a href="#1780">1780: </a></span></span><span class="l"><a href="#1781">1781: </a></span></span><span class="l"><a href="#1782">1782: </a></span><span class="l"><a href="#1783">1783: </a></span><span class="l"><a href="#1784">1784: </a></span><span class="l"><a href="#1785">1785: </a></span><span class="l"><a href="#1786">1786: </a></span><span class="l"><a href="#1787">1787: </a></span><span class="l"><a href="#1788">1788: </a></span><span class="l"><a href="#1789">1789: </a></span><span class="l"><a href="#1790">1790: </a></span><span class="l"><a href="#1791">1791: </a></span><span class="l"><a href="#1792">1792: </a></span><span class="l"><a href="#1793">1793: </a></span><span class="l"><a href="#1794">1794: </a></span><span class="l"><a href="#1795">1795: </a></span><span class="l"><a href="#1796">1796: </a></span><span class="l"><a href="#1797">1797: </a></span><span class="l"><a href="#1798">1798: </a></span><span class="l"><a href="#1799">1799: </a></span><span class="l"><a href="#1800">1800: </a></span><span class="l"><a href="#1801">1801: </a></span><span class="l"><a href="#1802">1802: </a></span><span class="l"><a href="#1803">1803: </a></span><span class="l"><a href="#1804">1804: </a></span><span class="l"><a href="#1805">1805: </a></span><span class="l"><a href="#1806">1806: </a></span></span><span class="l"><a href="#1807">1807: </a></span></span><span class="l"><a href="#1808">1808: </a></span></span><span class="l"><a href="#1809">1809: </a></span></span><span class="l"><a href="#1810">1810: </a></span><span class="l"><a href="#1811">1811: </a></span><span class="l"><a href="#1812">1812: </a></span><span class="l"><a href="#1813">1813: </a></span><span class="l"><a href="#1814">1814: </a></span><span class="l"><a href="#1815">1815: </a></span><span class="l"><a href="#1816">1816: </a></span><span class="l"><a href="#1817">1817: </a></span><span class="l"><a href="#1818">1818: </a></span><span class="l"><a href="#1819">1819: </a></span><span class="l"><a href="#1820">1820: </a></span><span class="l"><a href="#1821">1821: </a></span><span class="l"><a href="#1822">1822: </a></span><span class="l"><a href="#1823">1823: </a></span><span class="l"><a href="#1824">1824: </a></span><span class="l"><a href="#1825">1825: </a></span><span class="l"><a href="#1826">1826: </a></span><span class="l"><a href="#1827">1827: </a></span><span class="l"><a href="#1828">1828: </a></span><span class="l"><a href="#1829">1829: </a></span><span class="l"><a href="#1830">1830: </a></span><span class="l"><a href="#1831">1831: </a></span><span class="l"><a href="#1832">1832: </a></span><span class="l"><a href="#1833">1833: </a></span><span class="l"><a href="#1834">1834: </a></span><span class="l"><a href="#1835">1835: </a></span><span class="l"><a href="#1836">1836: </a></span><span class="l"><a href="#1837">1837: </a></span><span class="l"><a href="#1838">1838: </a></span><span class="l"><a href="#1839">1839: </a></span></span><span class="l"><a href="#1840">1840: </a></span></span><span class="l"><a href="#1841">1841: </a></span></span><span class="l"><a href="#1842">1842: </a></span><span class="l"><a href="#1843">1843: </a></span><span class="l"><a href="#1844">1844: </a></span><span class="l"><a href="#1845">1845: </a></span><span class="l"><a href="#1846">1846: </a></span><span class="l"><a href="#1847">1847: </a></span><span class="l"><a href="#1848">1848: </a></span><span class="l"><a href="#1849">1849: </a></span><span class="l"><a href="#1850">1850: </a></span><span class="l"><a href="#1851">1851: </a></span><span class="l"><a href="#1852">1852: </a></span><span class="l"><a href="#1853">1853: </a></span><span class="l"><a href="#1854">1854: </a></span><span class="l"><a href="#1855">1855: </a></span><span class="l"><a href="#1856">1856: </a></span><span class="l"><a href="#1857">1857: </a></span><span class="l"><a href="#1858">1858: </a></span><span class="l"><a href="#1859">1859: </a></span><span class="l"><a href="#1860">1860: </a></span><span class="l"><a href="#1861">1861: </a></span><span class="l"><a href="#1862">1862: </a></span><span class="l"><a href="#1863">1863: </a></span></span><span class="l"><a href="#1864">1864: </a></span></span><span class="l"><a href="#1865">1865: </a></span><span class="l"><a href="#1866">1866: </a></span><span class="l"><a href="#1867">1867: </a></span><span class="l"><a href="#1868">1868: </a></span><span class="l"><a href="#1869">1869: </a></span><span class="l"><a href="#1870">1870: </a></span><span class="l"><a href="#1871">1871: </a></span><span class="l"><a href="#1872">1872: </a></span><span class="l"><a href="#1873">1873: </a></span><span class="l"><a href="#1874">1874: </a></span><span class="l"><a href="#1875">1875: </a></span><span class="l"><a href="#1876">1876: </a></span></span><span class="l"><a href="#1877">1877: </a></span></span><span class="l"><a href="#1878">1878: </a></span></span><span class="l"><a href="#1879">1879: </a></span></span><span class="l"><a href="#1880">1880: </a></span></span><span class="l"><a href="#1881">1881: </a></span></span><span class="l"><a href="#1882">1882: </a></span></span><span class="l"><a href="#1883">1883: </a></span></span><span class="l"><a href="#1884">1884: </a></span></span><span class="l"><a href="#1885">1885: </a></span></span><span class="l"><a href="#1886">1886: </a></span></span><span class="l"><a href="#1887">1887: </a></span></span><span class="l"><a href="#1888">1888: </a></span></span><span class="l"><a href="#1889">1889: </a></span></span><span class="l"><a href="#1890">1890: </a></span></span><span class="l"><a href="#1891">1891: </a></span><span class="l"><a href="#1892">1892: </a></span><span class="l"><a href="#1893">1893: </a></span><span class="l"><a href="#1894">1894: </a></span><span class="l"><a href="#1895">1895: </a></span><span class="l"><a href="#1896">1896: </a></span><span class="l"><a href="#1897">1897: </a></span><span class="l"><a href="#1898">1898: </a></span><span class="l"><a href="#1899">1899: </a></span><span class="l"><a href="#1900">1900: </a></span><span class="l"><a href="#1901">1901: </a></span><span class="l"><a href="#1902">1902: </a></span><span class="l"><a href="#1903">1903: </a></span><span class="l"><a href="#1904">1904: </a></span><span class="l"><a href="#1905">1905: </a></span><span class="l"><a href="#1906">1906: </a></span><span class="l"><a href="#1907">1907: </a></span><span class="l"><a href="#1908">1908: </a></span><span class="l"><a href="#1909">1909: </a></span><span class="l"><a href="#1910">1910: </a></span><span class="l"><a href="#1911">1911: </a></span></code></pre>
<pre class="code"><code><span id="1" class="l"><span class="xlang">&lt;?php</span>
</span><span id="2" class="l"><span class="php-comment">/**
</span></span><span id="3" class="l"><span class="php-comment"> * Class file for the Object_Sync_Sf_Admin class.
</span></span><span id="4" class="l"><span class="php-comment"> *
</span></span><span id="5" class="l"><span class="php-comment"> * @file
</span></span><span id="6" class="l"><span class="php-comment"> */</span>
</span><span id="7" class="l">
</span><span id="8" class="l"><span class="php-keyword1">if</span> ( ! <span class="php-keyword2">class_exists</span>( <span class="php-quote">'Object_Sync_Salesforce'</span> ) ) {
</span><span id="9" class="l">    <span class="php-keyword1">die</span>();
</span><span id="10" class="l">}
</span><span id="11" class="l">
</span><span id="12" class="l"><span class="php-comment">/**
</span></span><span id="13" class="l"><span class="php-comment"> * Create default WordPress admin functionality to configure the plugin.
</span></span><span id="14" class="l"><span class="php-comment"> */</span>
</span><span id="15" class="l"><span class="php-keyword1">class</span> Object_Sync_Sf_Admin {
</span><span id="16" class="l">
</span><span id="17" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$wpdb</span>;
</span><span id="18" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$version</span>;
</span><span id="19" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$login_credentials</span>;
</span><span id="20" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$slug</span>;
</span><span id="21" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$salesforce</span>;
</span><span id="22" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$wordpress</span>;
</span><span id="23" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$mappings</span>;
</span><span id="24" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$push</span>;
</span><span id="25" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$pull</span>;
</span><span id="26" class="l">    <span class="php-keyword1">protected</span> <span class="php-var">$schedulable_classes</span>;
</span><span id="27" class="l">
</span><span id="28" class="l">    <span class="php-comment">/**
</span></span><span id="29" class="l"><span class="php-comment">    * @var string
</span></span><span id="30" class="l"><span class="php-comment">    * Default path for the Salesforce authorize URL
</span></span><span id="31" class="l"><span class="php-comment">    */</span>
</span><span id="32" class="l">    <span class="php-keyword1">public</span> <span class="php-var">$default_authorize_url_path</span>;
</span><span id="33" class="l">
</span><span id="34" class="l">    <span class="php-comment">/**
</span></span><span id="35" class="l"><span class="php-comment">    * @var string
</span></span><span id="36" class="l"><span class="php-comment">    * Default path for the Salesforce token URL
</span></span><span id="37" class="l"><span class="php-comment">    */</span>
</span><span id="38" class="l">    <span class="php-keyword1">public</span> <span class="php-var">$default_token_url_path</span>;
</span><span id="39" class="l">
</span><span id="40" class="l">    <span class="php-comment">/**
</span></span><span id="41" class="l"><span class="php-comment">    * @var string
</span></span><span id="42" class="l"><span class="php-comment">    * What version of the Salesforce API should be the default on the settings screen.
</span></span><span id="43" class="l"><span class="php-comment">    * Users can edit this, but they won't see a correct list of all their available versions until WordPress has
</span></span><span id="44" class="l"><span class="php-comment">    * been authenticated with Salesforce.
</span></span><span id="45" class="l"><span class="php-comment">    */</span>
</span><span id="46" class="l">    <span class="php-keyword1">public</span> <span class="php-var">$default_api_version</span>;
</span><span id="47" class="l">
</span><span id="48" class="l">    <span class="php-comment">/**
</span></span><span id="49" class="l"><span class="php-comment">    * @var bool
</span></span><span id="50" class="l"><span class="php-comment">    * Default for whether to limit to triggerable items
</span></span><span id="51" class="l"><span class="php-comment">    * Users can edit this
</span></span><span id="52" class="l"><span class="php-comment">    */</span>
</span><span id="53" class="l">    <span class="php-keyword1">public</span> <span class="php-var">$default_triggerable</span>;
</span><span id="54" class="l">
</span><span id="55" class="l">    <span class="php-comment">/**
</span></span><span id="56" class="l"><span class="php-comment">    * @var bool
</span></span><span id="57" class="l"><span class="php-comment">    * Default for whether to limit to updateable items
</span></span><span id="58" class="l"><span class="php-comment">    * Users can edit this
</span></span><span id="59" class="l"><span class="php-comment">    */</span>
</span><span id="60" class="l">    <span class="php-keyword1">public</span> <span class="php-var">$default_updateable</span>;
</span><span id="61" class="l">
</span><span id="62" class="l">    <span class="php-comment">/**
</span></span><span id="63" class="l"><span class="php-comment">    * @var int
</span></span><span id="64" class="l"><span class="php-comment">    * Default pull throttle for how often Salesforce can pull
</span></span><span id="65" class="l"><span class="php-comment">    * Users can edit this
</span></span><span id="66" class="l"><span class="php-comment">    */</span>
</span><span id="67" class="l">    <span class="php-keyword1">public</span> <span class="php-var">$default_pull_throttle</span>;
</span><span id="68" class="l">
</span><span id="69" class="l">    <span class="php-comment">/**
</span></span><span id="70" class="l"><span class="php-comment">    * Constructor which sets up admin pages
</span></span><span id="71" class="l"><span class="php-comment">    *
</span></span><span id="72" class="l"><span class="php-comment">    * @param object $wpdb
</span></span><span id="73" class="l"><span class="php-comment">    * @param string $version
</span></span><span id="74" class="l"><span class="php-comment">    * @param array $login_credentials
</span></span><span id="75" class="l"><span class="php-comment">    * @param string $slug
</span></span><span id="76" class="l"><span class="php-comment">    * @param object $wordpress
</span></span><span id="77" class="l"><span class="php-comment">    * @param object $salesforce
</span></span><span id="78" class="l"><span class="php-comment">    * @param object $mappings
</span></span><span id="79" class="l"><span class="php-comment">    * @param object $push
</span></span><span id="80" class="l"><span class="php-comment">    * @param object $pull
</span></span><span id="81" class="l"><span class="php-comment">    * @param object $logging
</span></span><span id="82" class="l"><span class="php-comment">    * @param array $schedulable_classes
</span></span><span id="83" class="l"><span class="php-comment">    * @throws \Exception
</span></span><span id="84" class="l"><span class="php-comment">    */</span>
</span><span id="85" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> __construct( <span class="php-var">$wpdb</span>, <span class="php-var">$version</span>, <span class="php-var">$login_credentials</span>, <span class="php-var">$slug</span>, <span class="php-var">$wordpress</span>, <span class="php-var">$salesforce</span>, <span class="php-var">$mappings</span>, <span class="php-var">$push</span>, <span class="php-var">$pull</span>, <span class="php-var">$logging</span>, <span class="php-var">$schedulable_classes</span> ) {
</span><span id="86" class="l">        <span class="php-var">$this</span>-&gt;wpdb                = <span class="php-var">$wpdb</span>;
</span><span id="87" class="l">        <span class="php-var">$this</span>-&gt;version             = <span class="php-var">$version</span>;
</span><span id="88" class="l">        <span class="php-var">$this</span>-&gt;login_credentials   = <span class="php-var">$login_credentials</span>;
</span><span id="89" class="l">        <span class="php-var">$this</span>-&gt;slug                = <span class="php-var">$slug</span>;
</span><span id="90" class="l">        <span class="php-var">$this</span>-&gt;wordpress           = <span class="php-var">$wordpress</span>;
</span><span id="91" class="l">        <span class="php-var">$this</span>-&gt;salesforce          = <span class="php-var">$salesforce</span>;
</span><span id="92" class="l">        <span class="php-var">$this</span>-&gt;mappings            = <span class="php-var">$mappings</span>;
</span><span id="93" class="l">        <span class="php-var">$this</span>-&gt;push                = <span class="php-var">$push</span>;
</span><span id="94" class="l">        <span class="php-var">$this</span>-&gt;pull                = <span class="php-var">$pull</span>;
</span><span id="95" class="l">        <span class="php-var">$this</span>-&gt;logging             = <span class="php-var">$logging</span>;
</span><span id="96" class="l">        <span class="php-var">$this</span>-&gt;schedulable_classes = <span class="php-var">$schedulable_classes</span>;
</span><span id="97" class="l">
</span><span id="98" class="l">        <span class="php-var">$this</span>-&gt;sfwp_transients = <span class="php-var">$this</span>-&gt;wordpress-&gt;sfwp_transients;
</span><span id="99" class="l">
</span><span id="100" class="l">        <span class="php-comment">// default authorize url path</span>
</span><span id="101" class="l">        <span class="php-var">$this</span>-&gt;default_authorize_url_path = <span class="php-quote">'/services/oauth2/authorize'</span>;
</span><span id="102" class="l">        <span class="php-comment">// default token url path</span>
</span><span id="103" class="l">        <span class="php-var">$this</span>-&gt;default_token_url_path = <span class="php-quote">'/services/oauth2/token'</span>;
</span><span id="104" class="l">        <span class="php-comment">// what Salesforce API version to start the settings with. This is only used in the settings form</span>
</span><span id="105" class="l">        <span class="php-var">$this</span>-&gt;default_api_version = <span class="php-quote">'42.0'</span>;
</span><span id="106" class="l">        <span class="php-comment">// default pull throttle for avoiding going over api limits</span>
</span><span id="107" class="l">        <span class="php-var">$this</span>-&gt;default_pull_throttle = <span class="php-num">5</span>;
</span><span id="108" class="l">        <span class="php-comment">// default setting for triggerable items</span>
</span><span id="109" class="l">        <span class="php-var">$this</span>-&gt;default_triggerable = <span class="php-keyword1">true</span>;
</span><span id="110" class="l">        <span class="php-comment">// default setting for updateable items</span>
</span><span id="111" class="l">        <span class="php-var">$this</span>-&gt;default_updateable = <span class="php-keyword1">true</span>;
</span><span id="112" class="l">        <span class="php-comment">// default option prefix</span>
</span><span id="113" class="l">        <span class="php-var">$this</span>-&gt;option_prefix = <span class="php-quote">'object_sync_for_salesforce_'</span>;
</span><span id="114" class="l">
</span><span id="115" class="l">        <span class="php-var">$this</span>-&gt;add_actions();
</span><span id="116" class="l">
</span><span id="117" class="l">    }
</span><span id="118" class="l">
</span><span id="119" class="l">    <span class="php-comment">/**
</span></span><span id="120" class="l"><span class="php-comment">    * Create the action hooks to create the admin page(s)
</span></span><span id="121" class="l"><span class="php-comment">    *
</span></span><span id="122" class="l"><span class="php-comment">    */</span>
</span><span id="123" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> add_actions() {
</span><span id="124" class="l">        add_action( <span class="php-quote">'admin_init'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'salesforce_settings_forms'</span> ) );
</span><span id="125" class="l">        add_action( <span class="php-quote">'admin_init'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'notices'</span> ) );
</span><span id="126" class="l">        add_action( <span class="php-quote">'admin_post_post_fieldmap'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'prepare_fieldmap_data'</span> ) );
</span><span id="127" class="l">
</span><span id="128" class="l">        add_action( <span class="php-quote">'admin_post_delete_fieldmap'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'delete_fieldmap'</span> ) );
</span><span id="129" class="l">        add_action( <span class="php-quote">'wp_ajax_get_salesforce_object_description'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'get_salesforce_object_description'</span> ) );
</span><span id="130" class="l">        add_action( <span class="php-quote">'wp_ajax_get_wordpress_object_description'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'get_wordpress_object_fields'</span> ) );
</span><span id="131" class="l">        add_action( <span class="php-quote">'wp_ajax_get_wp_sf_object_fields'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'get_wp_sf_object_fields'</span> ) );
</span><span id="132" class="l">        add_action( <span class="php-quote">'wp_ajax_push_to_salesforce'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'push_to_salesforce'</span> ) );
</span><span id="133" class="l">        add_action( <span class="php-quote">'wp_ajax_pull_from_salesforce'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'pull_from_salesforce'</span> ) );
</span><span id="134" class="l">        add_action( <span class="php-quote">'wp_ajax_refresh_mapped_data'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'refresh_mapped_data'</span> ) );
</span><span id="135" class="l">        add_action( <span class="php-quote">'wp_ajax_clear_sfwp_cache'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'clear_sfwp_cache'</span> ) );
</span><span id="136" class="l">
</span><span id="137" class="l">        add_action( <span class="php-quote">'edit_user_profile'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'show_salesforce_user_fields'</span> ) );
</span><span id="138" class="l">        add_action( <span class="php-quote">'personal_options_update'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'save_salesforce_user_fields'</span> ) );
</span><span id="139" class="l">        add_action( <span class="php-quote">'edit_user_profile_update'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'save_salesforce_user_fields'</span> ) );
</span><span id="140" class="l">
</span><span id="141" class="l">        add_action( <span class="php-quote">'admin_post_delete_object_map'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'delete_object_map'</span> ) );
</span><span id="142" class="l">        add_action( <span class="php-quote">'admin_post_post_object_map'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'prepare_object_map_data'</span> ) );
</span><span id="143" class="l">
</span><span id="144" class="l">        <span class="php-comment">// import and export plugin data</span>
</span><span id="145" class="l">        add_action( <span class="php-quote">'admin_post_object_sync_for_salesforce_import'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'import_json_file'</span> ) );
</span><span id="146" class="l">        add_action( <span class="php-quote">'admin_post_object_sync_for_salesforce_export'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'export_json_file'</span> ) );
</span><span id="147" class="l">
</span><span id="148" class="l">    }
</span><span id="149" class="l">
</span><span id="150" class="l">    <span class="php-comment">/**
</span></span><span id="151" class="l"><span class="php-comment">    * Create WordPress admin options page
</span></span><span id="152" class="l"><span class="php-comment">    *
</span></span><span id="153" class="l"><span class="php-comment">    */</span>
</span><span id="154" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> create_admin_menu() {
</span><span id="155" class="l">        <span class="php-var">$title</span> = __( <span class="php-quote">'Salesforce'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="156" class="l">        add_options_page( <span class="php-var">$title</span>, <span class="php-var">$title</span>, <span class="php-quote">'configure_salesforce'</span>, <span class="php-quote">'object-sync-salesforce-admin'</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'show_admin_page'</span> ) );
</span><span id="157" class="l">    }
</span><span id="158" class="l">
</span><span id="159" class="l">    <span class="php-comment">/**
</span></span><span id="160" class="l"><span class="php-comment">    * Render full admin pages in WordPress
</span></span><span id="161" class="l"><span class="php-comment">    * This allows other plugins to add tabs to the Salesforce settings screen
</span></span><span id="162" class="l"><span class="php-comment">    *
</span></span><span id="163" class="l"><span class="php-comment">    * todo: better front end: html, organization of html into templates, css, js
</span></span><span id="164" class="l"><span class="php-comment">    *
</span></span><span id="165" class="l"><span class="php-comment">    */</span>
</span><span id="166" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> show_admin_page() {
</span><span id="167" class="l">        <span class="php-var">$get_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_GET, FILTER_SANITIZE_STRING );
</span><span id="168" class="l">        <span class="php-keyword1">echo</span> <span class="php-quote">'&lt;div class=&quot;wrap&quot;&gt;'</span>;
</span><span id="169" class="l">        <span class="php-keyword1">echo</span> <span class="php-quote">'&lt;h1&gt;'</span> . esc_html( get_admin_page_title() ) . <span class="php-quote">'&lt;/h1&gt;'</span>;
</span><span id="170" class="l">        <span class="php-var">$allowed</span> = <span class="php-var">$this</span>-&gt;check_wordpress_admin_permissions();
</span><span id="171" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">false</span> === <span class="php-var">$allowed</span> ) {
</span><span id="172" class="l">            <span class="php-keyword1">return</span>;
</span><span id="173" class="l">        }
</span><span id="174" class="l">        <span class="php-var">$tabs</span> = <span class="php-keyword1">array</span>(
</span><span id="175" class="l">            <span class="php-quote">'settings'</span>      =&gt; __( <span class="php-quote">'Settings'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="176" class="l">            <span class="php-quote">'authorize'</span>     =&gt; __( <span class="php-quote">'Authorize'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="177" class="l">            <span class="php-quote">'fieldmaps'</span>     =&gt; __( <span class="php-quote">'Fieldmaps'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="178" class="l">            <span class="php-quote">'schedule'</span>      =&gt; __( <span class="php-quote">'Scheduling'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="179" class="l">            <span class="php-quote">'import-export'</span> =&gt; __( <span class="php-quote">'Import &amp;amp; Export'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="180" class="l">        ); <span class="php-comment">// this creates the tabs for the admin</span>
</span><span id="181" class="l">
</span><span id="182" class="l">        <span class="php-comment">// optionally make tab(s) for logging and log settings</span>
</span><span id="183" class="l">        <span class="php-var">$logging_enabled</span>      = get_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'enable_logging'</span>, <span class="php-keyword1">false</span> );
</span><span id="184" class="l">        <span class="php-var">$tabs</span>[<span class="php-quote">'log_settings'</span>] = __( <span class="php-quote">'Log Settings'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="185" class="l">
</span><span id="186" class="l">        <span class="php-var">$mapping_errors</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_failed_object_maps();
</span><span id="187" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$mapping_errors</span> ) ) {
</span><span id="188" class="l">            <span class="php-var">$tabs</span>[<span class="php-quote">'mapping_errors'</span>] = __( <span class="php-quote">'Mapping Errors'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="189" class="l">        }
</span><span id="190" class="l">
</span><span id="191" class="l">        <span class="php-comment">// filter for extending the tabs available on the page</span>
</span><span id="192" class="l">        <span class="php-comment">// currently it will go into the default switch case for $tab</span>
</span><span id="193" class="l">        <span class="php-var">$tabs</span> = apply_filters( <span class="php-quote">'object_sync_for_salesforce_settings_tabs'</span>, <span class="php-var">$tabs</span> );
</span><span id="194" class="l">
</span><span id="195" class="l">        <span class="php-var">$tab</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] ) ? sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] ) : <span class="php-quote">'settings'</span>;
</span><span id="196" class="l">        <span class="php-var">$this</span>-&gt;tabs( <span class="php-var">$tabs</span>, <span class="php-var">$tab</span> );
</span><span id="197" class="l">
</span><span id="198" class="l">        <span class="php-var">$consumer_key</span>    = <span class="php-var">$this</span>-&gt;login_credentials[<span class="php-quote">'consumer_key'</span>];
</span><span id="199" class="l">        <span class="php-var">$consumer_secret</span> = <span class="php-var">$this</span>-&gt;login_credentials[<span class="php-quote">'consumer_secret'</span>];
</span><span id="200" class="l">        <span class="php-var">$callback_url</span>    = <span class="php-var">$this</span>-&gt;login_credentials[<span class="php-quote">'callback_url'</span>];
</span><span id="201" class="l">
</span><span id="202" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> !== <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'is_authorized'</span>] ) {
</span><span id="203" class="l">            <span class="php-var">$url</span>     = esc_url( <span class="php-var">$callback_url</span> );
</span><span id="204" class="l">            <span class="php-var">$anchor</span>  = esc_html__( <span class="php-quote">'Authorize tab'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="205" class="l">            <span class="php-var">$message</span> = <span class="php-keyword2">sprintf</span>( <span class="php-quote">'Salesforce needs to be authorized to connect to this website. Use the &lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt; to connect.'</span>, <span class="php-var">$url</span>, <span class="php-var">$anchor</span> );
</span><span id="206" class="l">            <span class="php-keyword1">require</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/error.php'</span> );
</span><span id="207" class="l">        }
</span><span id="208" class="l">
</span><span id="209" class="l">        <span class="php-keyword1">if</span> ( <span class="php-num">0</span> === <span class="php-keyword2">count</span>( <span class="php-var">$this</span>-&gt;mappings-&gt;get_fieldmaps() ) ) {
</span><span id="210" class="l">            <span class="php-var">$url</span>     = esc_url( get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=fieldmaps'</span> ) );
</span><span id="211" class="l">            <span class="php-var">$anchor</span>  = esc_html__( <span class="php-quote">'Fieldmaps tab'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="212" class="l">            <span class="php-var">$message</span> = <span class="php-keyword2">sprintf</span>( <span class="php-quote">'No fieldmaps exist yet. Use the &lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt; to map WordPress and Salesforce objects to each other.'</span>, <span class="php-var">$url</span>, <span class="php-var">$anchor</span> );
</span><span id="213" class="l">            <span class="php-keyword1">require</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/error.php'</span> );
</span><span id="214" class="l">        }
</span><span id="215" class="l">
</span><span id="216" class="l">        <span class="php-var">$push_schedule_number</span> = get_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'salesforce_push_schedule_number'</span>, <span class="php-quote">''</span> );
</span><span id="217" class="l">        <span class="php-var">$push_schedule_unit</span>   = get_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'salesforce_push_schedule_unit'</span>, <span class="php-quote">''</span> );
</span><span id="218" class="l">        <span class="php-var">$pull_schedule_number</span> = get_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'salesforce_pull_schedule_number'</span>, <span class="php-quote">''</span> );
</span><span id="219" class="l">        <span class="php-var">$pull_schedule_unit</span>   = get_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'salesforce_pull_schedule_unit'</span>, <span class="php-quote">''</span> );
</span><span id="220" class="l">
</span><span id="221" class="l">        <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> === <span class="php-var">$push_schedule_number</span> &amp;&amp; <span class="php-quote">''</span> === <span class="php-var">$push_schedule_unit</span> &amp;&amp; <span class="php-quote">''</span> === <span class="php-var">$pull_schedule_number</span> &amp;&amp; <span class="php-quote">''</span> === <span class="php-var">$pull_schedule_unit</span> ) {
</span><span id="222" class="l">            <span class="php-var">$url</span>     = esc_url( get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=schedule'</span> ) );
</span><span id="223" class="l">            <span class="php-var">$anchor</span>  = esc_html__( <span class="php-quote">'Scheduling tab'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="224" class="l">            <span class="php-var">$message</span> = <span class="php-keyword2">sprintf</span>( <span class="php-quote">'Because the plugin schedule has not been saved, the plugin cannot run automatic operations. Use the &lt;a href=&quot;%s&quot;&gt;%s&lt;/a&gt; to create schedules to run.'</span>, <span class="php-var">$url</span>, <span class="php-var">$anchor</span> );
</span><span id="225" class="l">            <span class="php-keyword1">require</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/error.php'</span> );
</span><span id="226" class="l">        }
</span><span id="227" class="l">
</span><span id="228" class="l">        <span class="php-keyword1">try</span> {
</span><span id="229" class="l">            <span class="php-keyword1">switch</span> ( <span class="php-var">$tab</span> ) {
</span><span id="230" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'authorize'</span>:
</span><span id="231" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'code'</span>] ) ) {
</span><span id="232" class="l">                        <span class="php-comment">// this string is an oauth token</span>
</span><span id="233" class="l">                        <span class="php-var">$data</span>          = esc_html( wp_unslash( <span class="php-var">$get_data</span>[<span class="php-quote">'code'</span>] ) );
</span><span id="234" class="l">                        <span class="php-var">$is_authorized</span> = <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>]-&gt;request_token( <span class="php-var">$data</span> );
</span><span id="235" class="l">                        <span class="xlang">?&gt;</span>
</span><span id="236" class="l">                        &lt;script&gt;window.location = <span class="php-quote">'&lt;?php echo esc_url_raw( $callback_url ); ?&gt;'</span>&lt;/script&gt;
</span><span id="237" class="l">                        <span class="xlang">&lt;?php</span>
</span><span id="238" class="l">                    } <span class="php-keyword1">elseif</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'is_authorized'</span>] ) {
</span><span id="239" class="l">                            <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/authorized.php'</span> );
</span><span id="240" class="l">                            <span class="php-var">$this</span>-&gt;status( <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>] );
</span><span id="241" class="l">                    } <span class="php-keyword1">elseif</span> ( <span class="php-keyword1">true</span> === <span class="php-keyword2">is_object</span>( <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>] ) &amp;&amp; <span class="php-keyword1">isset</span>( <span class="php-var">$consumer_key</span> ) &amp;&amp; <span class="php-keyword1">isset</span>( <span class="php-var">$consumer_secret</span> ) ) {
</span><span id="242" class="l">                        <span class="xlang">?&gt;</span>
</span><span id="243" class="l">                        &lt;p&gt;&lt;a <span class="php-keyword1">class</span>=<span class="php-quote">&quot;button button-primary&quot;</span> href=<span class="php-quote">&quot;&lt;?php echo esc_url( </span><span class="php-var">$this</span><span class="php-quote">-&gt;salesforce['sfapi']-&gt;get_authorization_code() ); ?&gt;&quot;</span>&gt;<span class="xlang">&lt;?php</span> <span class="php-keyword1">echo</span> esc_html__( <span class="php-quote">'Connect to Salesforce'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ); <span class="xlang">?&gt;</span>&lt;/a&gt;&lt;/p&gt;
</span><span id="244" class="l">                        <span class="xlang">&lt;?php</span>
</span><span id="245" class="l">                    } <span class="php-keyword1">else</span> {
</span><span id="246" class="l">                        <span class="php-var">$url</span>    = esc_url( get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=settings'</span> ) );
</span><span id="247" class="l">                        <span class="php-var">$anchor</span> = esc_html__( <span class="php-quote">'Settings'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="248" class="l">                        <span class="php-comment">// translators: placeholders are for the settings tab link: 1) the url, and 2) the anchor text</span>
</span><span id="249" class="l">                        <span class="php-var">$message</span> = <span class="php-keyword2">sprintf</span>( esc_html__( <span class="php-quote">'Salesforce needs to be authorized to connect to this website but the credentials are missing. Use the &lt;a href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt; tab to add them.'</span>, <span class="php-quote">'object-sync-salesforce'</span> ), <span class="php-var">$url</span>, <span class="php-var">$anchor</span> );
</span><span id="250" class="l">                        <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/error.php'</span> );
</span><span id="251" class="l">                    }
</span><span id="252" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="253" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'fieldmaps'</span>:
</span><span id="254" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'method'</span>] ) ) {
</span><span id="255" class="l">
</span><span id="256" class="l">                        <span class="php-var">$method</span>      = sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'method'</span>] );
</span><span id="257" class="l">                        <span class="php-var">$error_url</span>   = get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=fieldmaps&amp;method='</span> . <span class="php-var">$method</span> );
</span><span id="258" class="l">                        <span class="php-var">$success_url</span> = get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=fieldmaps'</span> );
</span><span id="259" class="l">
</span><span id="260" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'transient'</span>] ) ) {
</span><span id="261" class="l">                            <span class="php-var">$transient</span> = sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'transient'</span>] );
</span><span id="262" class="l">                            <span class="php-var">$posted</span>    = <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;get( <span class="php-var">$transient</span> );
</span><span id="263" class="l">                        }
</span><span id="264" class="l">
</span><span id="265" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$posted</span> ) &amp;&amp; <span class="php-keyword2">is_array</span>( <span class="php-var">$posted</span> ) ) {
</span><span id="266" class="l">                            <span class="php-var">$map</span> = <span class="php-var">$posted</span>;
</span><span id="267" class="l">                        } <span class="php-keyword1">elseif</span> ( <span class="php-quote">'edit'</span> === <span class="php-var">$method</span> || <span class="php-quote">'clone'</span> === <span class="php-var">$method</span> || <span class="php-quote">'delete'</span> === <span class="php-var">$method</span> ) {
</span><span id="268" class="l">                            <span class="php-var">$map</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_fieldmaps( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'id'</span>] ) ? sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'id'</span>] ) : <span class="php-quote">''</span> );
</span><span id="269" class="l">                        }
</span><span id="270" class="l">
</span><span id="271" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$map</span> ) &amp;&amp; <span class="php-keyword2">is_array</span>( <span class="php-var">$map</span> ) ) {
</span><span id="272" class="l">                            <span class="php-var">$label</span>                           = <span class="php-var">$map</span>[<span class="php-quote">'label'</span>];
</span><span id="273" class="l">                            <span class="php-var">$salesforce_object</span>               = <span class="php-var">$map</span>[<span class="php-quote">'salesforce_object'</span>];
</span><span id="274" class="l">                            <span class="php-var">$salesforce_record_types_allowed</span> = maybe_unserialize( <span class="php-var">$map</span>[<span class="php-quote">'salesforce_record_types_allowed'</span>] );
</span><span id="275" class="l">                            <span class="php-var">$salesforce_record_type_default</span>  = <span class="php-var">$map</span>[<span class="php-quote">'salesforce_record_type_default'</span>];
</span><span id="276" class="l">                            <span class="php-var">$wordpress_object</span>                = <span class="php-var">$map</span>[<span class="php-quote">'wordpress_object'</span>];
</span><span id="277" class="l">                            <span class="php-var">$pull_trigger_field</span>              = <span class="php-var">$map</span>[<span class="php-quote">'pull_trigger_field'</span>];
</span><span id="278" class="l">                            <span class="php-var">$fieldmap_fields</span>                 = <span class="php-var">$map</span>[<span class="php-quote">'fields'</span>];
</span><span id="279" class="l">                            <span class="php-var">$sync_triggers</span>                   = <span class="php-var">$map</span>[<span class="php-quote">'sync_triggers'</span>];
</span><span id="280" class="l">                            <span class="php-var">$push_async</span>                      = <span class="php-var">$map</span>[<span class="php-quote">'push_async'</span>];
</span><span id="281" class="l">                            <span class="php-var">$push_drafts</span>                     = <span class="php-var">$map</span>[<span class="php-quote">'push_drafts'</span>];
</span><span id="282" class="l">                            <span class="php-var">$weight</span>                          = <span class="php-var">$map</span>[<span class="php-quote">'weight'</span>];
</span><span id="283" class="l">                        }
</span><span id="284" class="l">
</span><span id="285" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-quote">'add'</span> === <span class="php-var">$method</span> || <span class="php-quote">'edit'</span> === <span class="php-var">$method</span> || <span class="php-quote">'clone'</span> === <span class="php-var">$method</span> ) {
</span><span id="286" class="l">                            <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/fieldmaps-add-edit-clone.php'</span> );
</span><span id="287" class="l">                        } <span class="php-keyword1">elseif</span> ( <span class="php-quote">'delete'</span> === <span class="php-var">$method</span> ) {
</span><span id="288" class="l">                            <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/fieldmaps-delete.php'</span> );
</span><span id="289" class="l">                        }
</span><span id="290" class="l">                    } <span class="php-keyword1">else</span> {
</span><span id="291" class="l">                        <span class="php-var">$fieldmaps</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_fieldmaps();
</span><span id="292" class="l">                        <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/fieldmaps-list.php'</span> );
</span><span id="293" class="l">                    } <span class="php-comment">// End if().</span>
</span><span id="294" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="295" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'logout'</span>:
</span><span id="296" class="l">                    <span class="php-var">$this</span>-&gt;logout();
</span><span id="297" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="298" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'clear_cache'</span>:
</span><span id="299" class="l">                    <span class="php-var">$this</span>-&gt;clear_cache();
</span><span id="300" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="301" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'clear_schedule'</span>:
</span><span id="302" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'schedule_name'</span>] ) ) {
</span><span id="303" class="l">                        <span class="php-var">$schedule_name</span> = sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'schedule_name'</span>] );
</span><span id="304" class="l">                    }
</span><span id="305" class="l">                    <span class="php-var">$this</span>-&gt;clear_schedule( <span class="php-var">$schedule_name</span> );
</span><span id="306" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="307" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'settings'</span>:
</span><span id="308" class="l">                    <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/settings.php'</span> );
</span><span id="309" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="310" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'mapping_errors'</span>:
</span><span id="311" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'method'</span>] ) ) {
</span><span id="312" class="l">
</span><span id="313" class="l">                        <span class="php-var">$method</span>      = sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'method'</span>] );
</span><span id="314" class="l">                        <span class="php-var">$error_url</span>   = get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=mapping_errors&amp;method='</span> . <span class="php-var">$method</span> );
</span><span id="315" class="l">                        <span class="php-var">$success_url</span> = get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=mapping_errors'</span> );
</span><span id="316" class="l">
</span><span id="317" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'map_transient'</span>] ) ) {
</span><span id="318" class="l">                            <span class="php-var">$transient</span> = sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'map_transient'</span>] );
</span><span id="319" class="l">                            <span class="php-var">$posted</span>    = <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;get( <span class="php-var">$transient</span> );
</span><span id="320" class="l">                        }
</span><span id="321" class="l">
</span><span id="322" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$posted</span> ) &amp;&amp; <span class="php-keyword2">is_array</span>( <span class="php-var">$posted</span> ) ) {
</span><span id="323" class="l">                            <span class="php-var">$map_row</span> = <span class="php-var">$posted</span>;
</span><span id="324" class="l">                        } <span class="php-keyword1">elseif</span> ( <span class="php-quote">'edit'</span> === <span class="php-var">$method</span> || <span class="php-quote">'delete'</span> === <span class="php-var">$method</span> ) {
</span><span id="325" class="l">                            <span class="php-var">$map_row</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_failed_object_map( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'id'</span>] ) ? sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'id'</span>] ) : <span class="php-quote">''</span> );
</span><span id="326" class="l">                        }
</span><span id="327" class="l">
</span><span id="328" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$map_row</span> ) &amp;&amp; <span class="php-keyword2">is_array</span>( <span class="php-var">$map_row</span> ) ) {
</span><span id="329" class="l">                            <span class="php-var">$salesforce_id</span> = <span class="php-var">$map_row</span>[<span class="php-quote">'salesforce_id'</span>];
</span><span id="330" class="l">                            <span class="php-var">$wordpress_id</span>  = <span class="php-var">$map_row</span>[<span class="php-quote">'wordpress_id'</span>];
</span><span id="331" class="l">                        }
</span><span id="332" class="l">
</span><span id="333" class="l">                        <span class="php-keyword1">if</span> ( <span class="php-quote">'edit'</span> === <span class="php-var">$method</span> ) {
</span><span id="334" class="l">                            <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/mapping-errors-edit.php'</span> );
</span><span id="335" class="l">                        } <span class="php-keyword1">elseif</span> ( <span class="php-quote">'delete'</span> === <span class="php-var">$method</span> ) {
</span><span id="336" class="l">                            <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/mapping-errors-delete.php'</span> );
</span><span id="337" class="l">                        }
</span><span id="338" class="l">                    } <span class="php-keyword1">else</span> {
</span><span id="339" class="l">                        <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/mapping-errors.php'</span> );
</span><span id="340" class="l">                    }
</span><span id="341" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="342" class="l">                <span class="php-keyword1">case</span> <span class="php-quote">'import-export'</span>:
</span><span id="343" class="l">                    <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/import-export.php'</span> );
</span><span id="344" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="345" class="l">                <span class="php-keyword1">default</span>:
</span><span id="346" class="l">                    <span class="php-var">$include_settings</span> = apply_filters( <span class="php-quote">'object_sync_for_salesforce_settings_tab_include_settings'</span>, <span class="php-keyword1">true</span>, <span class="php-var">$tab</span> );
</span><span id="347" class="l">                    <span class="php-var">$content_before</span>   = apply_filters( <span class="php-quote">'object_sync_for_salesforce_settings_tab_content_before'</span>, <span class="php-keyword1">null</span>, <span class="php-var">$tab</span> );
</span><span id="348" class="l">                    <span class="php-var">$content_after</span>    = apply_filters( <span class="php-quote">'object_sync_for_salesforce_settings_tab_content_after'</span>, <span class="php-keyword1">null</span>, <span class="php-var">$tab</span> );
</span><span id="349" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-keyword1">null</span> !== <span class="php-var">$content_before</span> ) {
</span><span id="350" class="l">                        <span class="php-keyword1">echo</span> esc_html( <span class="php-var">$content_before</span> );
</span><span id="351" class="l">                    }
</span><span id="352" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$include_settings</span> ) {
</span><span id="353" class="l">                        <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/settings.php'</span> );
</span><span id="354" class="l">                    }
</span><span id="355" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-keyword1">null</span> !== <span class="php-var">$content_after</span> ) {
</span><span id="356" class="l">                        <span class="php-keyword1">echo</span> esc_html( <span class="php-var">$content_after</span> );
</span><span id="357" class="l">                    }
</span><span id="358" class="l">                    <span class="php-keyword1">break</span>;
</span><span id="359" class="l">            } <span class="php-comment">// End switch().</span>
</span><span id="360" class="l">        } <span class="php-keyword1">catch</span> ( SalesforceApiException <span class="php-var">$ex</span> ) {
</span><span id="361" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;Error &lt;strong&gt;%1$s&lt;/strong&gt;: %2$s&lt;/p&gt;'</span>,
</span><span id="362" class="l">                absint( <span class="php-var">$ex</span>-&gt;getCode() ),
</span><span id="363" class="l">                esc_html( <span class="php-var">$ex</span>-&gt;getMessage() )
</span><span id="364" class="l">            );
</span><span id="365" class="l">        } <span class="php-keyword1">catch</span> ( Exception <span class="php-var">$ex</span> ) {
</span><span id="366" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;Error &lt;strong&gt;%1$s&lt;/strong&gt;: %2$s&lt;/p&gt;'</span>,
</span><span id="367" class="l">                absint( <span class="php-var">$ex</span>-&gt;getCode() ),
</span><span id="368" class="l">                esc_html( <span class="php-var">$ex</span>-&gt;getMessage() )
</span><span id="369" class="l">            );
</span><span id="370" class="l">        } <span class="php-comment">// End try().</span>
</span><span id="371" class="l">        <span class="php-keyword1">echo</span> <span class="php-quote">'&lt;/div&gt;'</span>;
</span><span id="372" class="l">    }
</span><span id="373" class="l">
</span><span id="374" class="l">    <span class="php-comment">/**
</span></span><span id="375" class="l"><span class="php-comment">    * Create default WordPress admin settings form for salesforce
</span></span><span id="376" class="l"><span class="php-comment">    * This is for the Settings page/tab
</span></span><span id="377" class="l"><span class="php-comment">    *
</span></span><span id="378" class="l"><span class="php-comment">    */</span>
</span><span id="379" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> salesforce_settings_forms() {
</span><span id="380" class="l">        <span class="php-var">$get_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_GET, FILTER_SANITIZE_STRING );
</span><span id="381" class="l">        <span class="php-var">$page</span>     = <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] ) ? sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] ) : <span class="php-quote">'settings'</span>;
</span><span id="382" class="l">        <span class="php-var">$section</span>  = <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] ) ? sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] ) : <span class="php-quote">'settings'</span>;
</span><span id="383" class="l">
</span><span id="384" class="l">        <span class="php-var">$input_callback_default</span>   = <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'display_input_field'</span> );
</span><span id="385" class="l">        <span class="php-var">$input_checkboxes_default</span> = <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'display_checkboxes'</span> );
</span><span id="386" class="l">        <span class="php-var">$input_select_default</span>     = <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'display_select'</span> );
</span><span id="387" class="l">        <span class="php-var">$link_default</span>             = <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-quote">'display_link'</span> );
</span><span id="388" class="l">
</span><span id="389" class="l">        <span class="php-var">$all_field_callbacks</span> = <span class="php-keyword1">array</span>(
</span><span id="390" class="l">            <span class="php-quote">'text'</span>       =&gt; <span class="php-var">$input_callback_default</span>,
</span><span id="391" class="l">            <span class="php-quote">'checkboxes'</span> =&gt; <span class="php-var">$input_checkboxes_default</span>,
</span><span id="392" class="l">            <span class="php-quote">'select'</span>     =&gt; <span class="php-var">$input_select_default</span>,
</span><span id="393" class="l">            <span class="php-quote">'link'</span>       =&gt; <span class="php-var">$link_default</span>,
</span><span id="394" class="l">        );
</span><span id="395" class="l">
</span><span id="396" class="l">        <span class="php-var">$this</span>-&gt;fields_settings( <span class="php-quote">'settings'</span>, <span class="php-quote">'settings'</span>, <span class="php-var">$all_field_callbacks</span> );
</span><span id="397" class="l">        <span class="php-var">$this</span>-&gt;fields_fieldmaps( <span class="php-quote">'fieldmaps'</span>, <span class="php-quote">'objects'</span> );
</span><span id="398" class="l">        <span class="php-var">$this</span>-&gt;fields_scheduling( <span class="php-quote">'schedule'</span>, <span class="php-quote">'schedule'</span>, <span class="php-var">$all_field_callbacks</span> );
</span><span id="399" class="l">        <span class="php-var">$this</span>-&gt;fields_log_settings( <span class="php-quote">'log_settings'</span>, <span class="php-quote">'log_settings'</span>, <span class="php-var">$all_field_callbacks</span> );
</span><span id="400" class="l">    }
</span><span id="401" class="l">
</span><span id="402" class="l">    <span class="php-comment">/**
</span></span><span id="403" class="l"><span class="php-comment">    * Fields for the Settings tab
</span></span><span id="404" class="l"><span class="php-comment">    * This runs add_settings_section once, as well as add_settings_field and register_setting methods for each option
</span></span><span id="405" class="l"><span class="php-comment">    *
</span></span><span id="406" class="l"><span class="php-comment">    * @param string $page
</span></span><span id="407" class="l"><span class="php-comment">    * @param string $section
</span></span><span id="408" class="l"><span class="php-comment">    * @param string $input_callback
</span></span><span id="409" class="l"><span class="php-comment">    */</span>
</span><span id="410" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> fields_settings( <span class="php-var">$page</span>, <span class="php-var">$section</span>, <span class="php-var">$callbacks</span> ) {
</span><span id="411" class="l">        add_settings_section( <span class="php-var">$page</span>, <span class="php-keyword2">ucwords</span>( <span class="php-var">$page</span> ), <span class="php-keyword1">null</span>, <span class="php-var">$page</span> );
</span><span id="412" class="l">        <span class="php-var">$salesforce_settings</span> = <span class="php-keyword1">array</span>(
</span><span id="413" class="l">            <span class="php-quote">'consumer_key'</span>             =&gt; <span class="php-keyword1">array</span>(
</span><span id="414" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Consumer Key'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="415" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="416" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="417" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="418" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="419" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'text'</span>,
</span><span id="420" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="421" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="422" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_CONSUMER_KEY'</span>,
</span><span id="423" class="l">                ),
</span><span id="424" class="l">
</span><span id="425" class="l">            ),
</span><span id="426" class="l">            <span class="php-quote">'consumer_secret'</span>          =&gt; <span class="php-keyword1">array</span>(
</span><span id="427" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Consumer Secret'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="428" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="429" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="430" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="431" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="432" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'text'</span>,
</span><span id="433" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="434" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="435" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_CONSUMER_SECRET'</span>,
</span><span id="436" class="l">                ),
</span><span id="437" class="l">            ),
</span><span id="438" class="l">            <span class="php-quote">'callback_url'</span>             =&gt; <span class="php-keyword1">array</span>(
</span><span id="439" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Callback URL'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="440" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="441" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="442" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="443" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="444" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'url'</span>,
</span><span id="445" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="446" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="447" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_CALLBACK_URL'</span>,
</span><span id="448" class="l">                ),
</span><span id="449" class="l">            ),
</span><span id="450" class="l">            <span class="php-quote">'login_base_url'</span>           =&gt; <span class="php-keyword1">array</span>(
</span><span id="451" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Login Base URL'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="452" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="453" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="454" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="455" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="456" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'url'</span>,
</span><span id="457" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="458" class="l">                    <span class="php-comment">// translators: 1) production salesforce login, 2) sandbox salesforce login</span>
</span><span id="459" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-keyword2">sprintf</span>( __( <span class="php-quote">'For most Salesforce setups, you should use %1$s for production and %2$s for sandbox.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="460" class="l">                        esc_url( <span class="php-quote">'https://login.salesforce.com'</span> ),
</span><span id="461" class="l">                        esc_url( <span class="php-quote">'https://test.salesforce.com'</span> )
</span><span id="462" class="l">                    ),
</span><span id="463" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_LOGIN_BASE_URL'</span>,
</span><span id="464" class="l">                ),
</span><span id="465" class="l">            ),
</span><span id="466" class="l">            <span class="php-quote">'authorize_url_path'</span>       =&gt; <span class="php-keyword1">array</span>(
</span><span id="467" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Authorize URL Path'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="468" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="469" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="470" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="471" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="472" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'text'</span>,
</span><span id="473" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="474" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'For most Salesforce installs, this should not be changed.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="475" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_AUTHORIZE_URL_PATH'</span>,
</span><span id="476" class="l">                    <span class="php-quote">'default'</span>  =&gt; <span class="php-var">$this</span>-&gt;default_authorize_url_path,
</span><span id="477" class="l">                ),
</span><span id="478" class="l">            ),
</span><span id="479" class="l">            <span class="php-quote">'token_url_path'</span>           =&gt; <span class="php-keyword1">array</span>(
</span><span id="480" class="l">                <span class="php-quote">'title'</span>    =&gt; <span class="php-quote">'Token URL Path'</span>,
</span><span id="481" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="482" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="483" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="484" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="485" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'text'</span>,
</span><span id="486" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="487" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'For most Salesforce installs, this should not be changed.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="488" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_TOKEN_URL_PATH'</span>,
</span><span id="489" class="l">                    <span class="php-quote">'default'</span>  =&gt; <span class="php-var">$this</span>-&gt;default_token_url_path,
</span><span id="490" class="l">                ),
</span><span id="491" class="l">            ),
</span><span id="492" class="l">            <span class="php-quote">'api_version'</span>              =&gt; <span class="php-keyword1">array</span>(
</span><span id="493" class="l">                <span class="php-quote">'title'</span>    =&gt; <span class="php-quote">'Salesforce API Version'</span>,
</span><span id="494" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="495" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="496" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="497" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="498" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'text'</span>,
</span><span id="499" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="500" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="501" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_API_VERSION'</span>,
</span><span id="502" class="l">                    <span class="php-quote">'default'</span>  =&gt; <span class="php-var">$this</span>-&gt;default_api_version,
</span><span id="503" class="l">                ),
</span><span id="504" class="l">            ),
</span><span id="505" class="l">            <span class="php-quote">'object_filters'</span>           =&gt; <span class="php-keyword1">array</span>(
</span><span id="506" class="l">                <span class="php-quote">'title'</span>    =&gt; <span class="php-quote">'Limit Salesforce Objects'</span>,
</span><span id="507" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'checkboxes'</span>],
</span><span id="508" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="509" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="510" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="511" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'checkboxes'</span>,
</span><span id="512" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="513" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'Allows you to limit which Salesforce objects can be mapped'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="514" class="l">                    <span class="php-quote">'items'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="515" class="l">                        <span class="php-quote">'triggerable'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="516" class="l">                            <span class="php-quote">'text'</span>    =&gt; <span class="php-quote">'Only Triggerable objects'</span>,
</span><span id="517" class="l">                            <span class="php-quote">'id'</span>      =&gt; <span class="php-quote">'triggerable'</span>,
</span><span id="518" class="l">                            <span class="php-quote">'desc'</span>    =&gt; <span class="php-quote">''</span>,
</span><span id="519" class="l">                            <span class="php-quote">'default'</span> =&gt; <span class="php-var">$this</span>-&gt;default_triggerable,
</span><span id="520" class="l">                        ),
</span><span id="521" class="l">                        <span class="php-quote">'updateable'</span>  =&gt; <span class="php-keyword1">array</span>(
</span><span id="522" class="l">                            <span class="php-quote">'text'</span>    =&gt; <span class="php-quote">'Only Updateable objects'</span>,
</span><span id="523" class="l">                            <span class="php-quote">'id'</span>      =&gt; <span class="php-quote">'updateable'</span>,
</span><span id="524" class="l">                            <span class="php-quote">'desc'</span>    =&gt; <span class="php-quote">''</span>,
</span><span id="525" class="l">                            <span class="php-quote">'default'</span> =&gt; <span class="php-var">$this</span>-&gt;default_updateable,
</span><span id="526" class="l">                        ),
</span><span id="527" class="l">                    ),
</span><span id="528" class="l">                ),
</span><span id="529" class="l">            ),
</span><span id="530" class="l">            <span class="php-quote">'pull_throttle'</span>            =&gt; <span class="php-keyword1">array</span>(
</span><span id="531" class="l">                <span class="php-quote">'title'</span>    =&gt; <span class="php-quote">'Pull throttle (seconds)'</span>,
</span><span id="532" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="533" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="534" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="535" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="536" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'number'</span>,
</span><span id="537" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="538" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'Number of seconds to wait between repeated salesforce pulls. Prevents the webserver from becoming overloaded in case of too many cron runs, or webhook usage.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="539" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="540" class="l">                    <span class="php-quote">'default'</span>  =&gt; <span class="php-var">$this</span>-&gt;default_pull_throttle,
</span><span id="541" class="l">                ),
</span><span id="542" class="l">            ),
</span><span id="543" class="l">            <span class="php-quote">'debug_mode'</span>               =&gt; <span class="php-keyword1">array</span>(
</span><span id="544" class="l">                <span class="php-quote">'title'</span>    =&gt; <span class="php-quote">'Debug mode?'</span>,
</span><span id="545" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="546" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="547" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="548" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="549" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'checkbox'</span>,
</span><span id="550" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="551" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'Debug mode can, combined with the Log Settings, log things like Salesforce API requests. It can create a lot of entries if enabled; it is not recommended to use it in a production environment.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="552" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="553" class="l">                ),
</span><span id="554" class="l">            ),
</span><span id="555" class="l">            <span class="php-quote">'delete_data_on_uninstall'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="556" class="l">                <span class="php-quote">'title'</span>    =&gt; <span class="php-quote">'Delete plugin data on uninstall?'</span>,
</span><span id="557" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="558" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="559" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="560" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="561" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'checkbox'</span>,
</span><span id="562" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="563" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'If checked, the plugin will delete the tables and other data it creates when you uninstall it. Unchecking this field can be useful if you need to reactivate the plugin for any reason without losing data.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="564" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="565" class="l">                ),
</span><span id="566" class="l">            ),
</span><span id="567" class="l">        );
</span><span id="568" class="l">
</span><span id="569" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-keyword2">is_object</span>( <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>] ) &amp;&amp; <span class="php-keyword1">true</span> === <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>]-&gt;is_authorized() ) {
</span><span id="570" class="l">            <span class="php-var">$salesforce_settings</span>[<span class="php-quote">'api_version'</span>] = <span class="php-keyword1">array</span>(
</span><span id="571" class="l">                <span class="php-quote">'title'</span>    =&gt; <span class="php-quote">'Salesforce API Version'</span>,
</span><span id="572" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'select'</span>],
</span><span id="573" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="574" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="575" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="576" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'select'</span>,
</span><span id="577" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="578" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="579" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">'OBJECT_SYNC_SF_SALESFORCE_API_VERSION'</span>,
</span><span id="580" class="l">                    <span class="php-quote">'items'</span>    =&gt; <span class="php-var">$this</span>-&gt;version_options(),
</span><span id="581" class="l">                ),
</span><span id="582" class="l">            );
</span><span id="583" class="l">        }
</span><span id="584" class="l">
</span><span id="585" class="l">        <span class="php-keyword1">foreach</span> ( <span class="php-var">$salesforce_settings</span> <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$attributes</span> ) {
</span><span id="586" class="l">            <span class="php-var">$id</span>       = <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-var">$key</span>;
</span><span id="587" class="l">            <span class="php-var">$name</span>     = <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-var">$key</span>;
</span><span id="588" class="l">            <span class="php-var">$title</span>    = <span class="php-var">$attributes</span>[<span class="php-quote">'title'</span>];
</span><span id="589" class="l">            <span class="php-var">$callback</span> = <span class="php-var">$attributes</span>[<span class="php-quote">'callback'</span>];
</span><span id="590" class="l">            <span class="php-var">$validate</span> = <span class="php-var">$attributes</span>[<span class="php-quote">'args'</span>][<span class="php-quote">'validate'</span>];
</span><span id="591" class="l">            <span class="php-var">$page</span>     = <span class="php-var">$attributes</span>[<span class="php-quote">'page'</span>];
</span><span id="592" class="l">            <span class="php-var">$section</span>  = <span class="php-var">$attributes</span>[<span class="php-quote">'section'</span>];
</span><span id="593" class="l">            <span class="php-var">$args</span>     = <span class="php-keyword2">array_merge</span>(
</span><span id="594" class="l">                <span class="php-var">$attributes</span>[<span class="php-quote">'args'</span>],
</span><span id="595" class="l">                <span class="php-keyword1">array</span>(
</span><span id="596" class="l">                    <span class="php-quote">'title'</span>     =&gt; <span class="php-var">$title</span>,
</span><span id="597" class="l">                    <span class="php-quote">'id'</span>        =&gt; <span class="php-var">$id</span>,
</span><span id="598" class="l">                    <span class="php-quote">'label_for'</span> =&gt; <span class="php-var">$id</span>,
</span><span id="599" class="l">                    <span class="php-quote">'name'</span>      =&gt; <span class="php-var">$name</span>,
</span><span id="600" class="l">                )
</span><span id="601" class="l">            );
</span><span id="602" class="l">
</span><span id="603" class="l">            <span class="php-comment">// if there is a constant and it is defined, don't run a validate function</span>
</span><span id="604" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$attributes</span>[<span class="php-quote">'args'</span>][<span class="php-quote">'constant'</span>] ) &amp;&amp; <span class="php-keyword2">defined</span>( <span class="php-var">$attributes</span>[<span class="php-quote">'args'</span>][<span class="php-quote">'constant'</span>] ) ) {
</span><span id="605" class="l">                <span class="php-var">$validate</span> = <span class="php-quote">''</span>;
</span><span id="606" class="l">            }
</span><span id="607" class="l">
</span><span id="608" class="l">            add_settings_field( <span class="php-var">$id</span>, <span class="php-var">$title</span>, <span class="php-var">$callback</span>, <span class="php-var">$page</span>, <span class="php-var">$section</span>, <span class="php-var">$args</span> );
</span><span id="609" class="l">            register_setting( <span class="php-var">$page</span>, <span class="php-var">$id</span>, <span class="php-keyword1">array</span>( <span class="php-var">$this</span>, <span class="php-var">$validate</span> ) );
</span><span id="610" class="l">        }
</span><span id="611" class="l">    }
</span><span id="612" class="l">
</span><span id="613" class="l">    <span class="php-comment">/**
</span></span><span id="614" class="l"><span class="php-comment">    * Fields for the Fieldmaps tab
</span></span><span id="615" class="l"><span class="php-comment">    * This runs add_settings_section once, as well as add_settings_field and register_setting methods for each option
</span></span><span id="616" class="l"><span class="php-comment">    *
</span></span><span id="617" class="l"><span class="php-comment">    * @param string $page
</span></span><span id="618" class="l"><span class="php-comment">    * @param string $section
</span></span><span id="619" class="l"><span class="php-comment">    * @param string $input_callback
</span></span><span id="620" class="l"><span class="php-comment">    */</span>
</span><span id="621" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> fields_fieldmaps( <span class="php-var">$page</span>, <span class="php-var">$section</span>, <span class="php-var">$input_callback</span> = <span class="php-quote">''</span> ) {
</span><span id="622" class="l">        add_settings_section( <span class="php-var">$page</span>, <span class="php-keyword2">ucwords</span>( <span class="php-var">$page</span> ), <span class="php-keyword1">null</span>, <span class="php-var">$page</span> );
</span><span id="623" class="l">    }
</span><span id="624" class="l">
</span><span id="625" class="l">    <span class="php-comment">/**
</span></span><span id="626" class="l"><span class="php-comment">    * Fields for the Scheduling tab
</span></span><span id="627" class="l"><span class="php-comment">    * This runs add_settings_section once, as well as add_settings_field and register_setting methods for each option
</span></span><span id="628" class="l"><span class="php-comment">    *
</span></span><span id="629" class="l"><span class="php-comment">    * @param string $page
</span></span><span id="630" class="l"><span class="php-comment">    * @param string $section
</span></span><span id="631" class="l"><span class="php-comment">    * @param string $input_callback
</span></span><span id="632" class="l"><span class="php-comment">    */</span>
</span><span id="633" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> fields_scheduling( <span class="php-var">$page</span>, <span class="php-var">$section</span>, <span class="php-var">$callbacks</span> ) {
</span><span id="634" class="l">        <span class="php-keyword1">foreach</span> ( <span class="php-var">$this</span>-&gt;schedulable_classes <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="635" class="l">            add_settings_section( <span class="php-var">$key</span>, <span class="php-var">$value</span>[<span class="php-quote">'label'</span>], <span class="php-keyword1">null</span>, <span class="php-var">$page</span> );
</span><span id="636" class="l">            <span class="php-var">$schedule_settings</span> = <span class="php-keyword1">array</span>(
</span><span id="637" class="l">                <span class="php-var">$key</span> . <span class="php-quote">'_schedule_number'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="638" class="l">                    <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Run schedule every'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="639" class="l">                    <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="640" class="l">                    <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="641" class="l">                    <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$key</span>,
</span><span id="642" class="l">                    <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="643" class="l">                        <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'number'</span>,
</span><span id="644" class="l">                        <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'absint'</span>,
</span><span id="645" class="l">                        <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="646" class="l">                        <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="647" class="l">                    ),
</span><span id="648" class="l">                ),
</span><span id="649" class="l">                <span class="php-var">$key</span> . <span class="php-quote">'_schedule_unit'</span>   =&gt; <span class="php-keyword1">array</span>(
</span><span id="650" class="l">                    <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Time unit'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="651" class="l">                    <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'select'</span>],
</span><span id="652" class="l">                    <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="653" class="l">                    <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$key</span>,
</span><span id="654" class="l">                    <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="655" class="l">                        <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'select'</span>,
</span><span id="656" class="l">                        <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="657" class="l">                        <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="658" class="l">                        <span class="php-quote">'items'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="659" class="l">                            <span class="php-quote">'minutes'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="660" class="l">                                <span class="php-quote">'text'</span>  =&gt; <span class="php-quote">'Minutes'</span>,
</span><span id="661" class="l">                                <span class="php-quote">'value'</span> =&gt; <span class="php-quote">'minutes'</span>,
</span><span id="662" class="l">                            ),
</span><span id="663" class="l">                            <span class="php-quote">'hours'</span>   =&gt; <span class="php-keyword1">array</span>(
</span><span id="664" class="l">                                <span class="php-quote">'text'</span>  =&gt; <span class="php-quote">'Hours'</span>,
</span><span id="665" class="l">                                <span class="php-quote">'value'</span> =&gt; <span class="php-quote">'hours'</span>,
</span><span id="666" class="l">                            ),
</span><span id="667" class="l">                            <span class="php-quote">'days'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="668" class="l">                                <span class="php-quote">'text'</span>  =&gt; <span class="php-quote">'Days'</span>,
</span><span id="669" class="l">                                <span class="php-quote">'value'</span> =&gt; <span class="php-quote">'days'</span>,
</span><span id="670" class="l">                            ),
</span><span id="671" class="l">                        ),
</span><span id="672" class="l">                    ),
</span><span id="673" class="l">                ),
</span><span id="674" class="l">                <span class="php-var">$key</span> . <span class="php-quote">'_clear_button'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="675" class="l">                    <span class="php-comment">// translators: $this-&gt;get_schedule_count is an integer showing how many items are in the current queue</span>
</span><span id="676" class="l">                    <span class="php-quote">'title'</span>    =&gt; <span class="php-keyword2">sprintf</span>( <span class="php-quote">'This queue has '</span> . _n( <span class="php-quote">'%s item'</span>, <span class="php-quote">'%s items'</span>, <span class="php-var">$this</span>-&gt;get_schedule_count( <span class="php-var">$key</span> ), <span class="php-quote">'object-sync-for-salesforce'</span> ), <span class="php-var">$this</span>-&gt;get_schedule_count( <span class="php-var">$key</span> ) ),
</span><span id="677" class="l">                    <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'link'</span>],
</span><span id="678" class="l">                    <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="679" class="l">                    <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$key</span>,
</span><span id="680" class="l">                    <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="681" class="l">                        <span class="php-quote">'label'</span>      =&gt; <span class="php-quote">'Clear this queue'</span>,
</span><span id="682" class="l">                        <span class="php-quote">'desc'</span>       =&gt; <span class="php-quote">''</span>,
</span><span id="683" class="l">                        <span class="php-quote">'url'</span>        =&gt; esc_url( <span class="php-quote">'?page=object-sync-salesforce-admin&amp;amp;tab=clear_schedule&amp;amp;schedule_name='</span> . <span class="php-var">$key</span> ),
</span><span id="684" class="l">                        <span class="php-quote">'link_class'</span> =&gt; <span class="php-quote">'button button-secondary'</span>,
</span><span id="685" class="l">                    ),
</span><span id="686" class="l">                ),
</span><span id="687" class="l">            );
</span><span id="688" class="l">            <span class="php-keyword1">foreach</span> ( <span class="php-var">$schedule_settings</span> <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$attributes</span> ) {
</span><span id="689" class="l">                <span class="php-var">$id</span>       = <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-var">$key</span>;
</span><span id="690" class="l">                <span class="php-var">$name</span>     = <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-var">$key</span>;
</span><span id="691" class="l">                <span class="php-var">$title</span>    = <span class="php-var">$attributes</span>[<span class="php-quote">'title'</span>];
</span><span id="692" class="l">                <span class="php-var">$callback</span> = <span class="php-var">$attributes</span>[<span class="php-quote">'callback'</span>];
</span><span id="693" class="l">                <span class="php-var">$page</span>     = <span class="php-var">$attributes</span>[<span class="php-quote">'page'</span>];
</span><span id="694" class="l">                <span class="php-var">$section</span>  = <span class="php-var">$attributes</span>[<span class="php-quote">'section'</span>];
</span><span id="695" class="l">                <span class="php-var">$args</span>     = <span class="php-keyword2">array_merge</span>(
</span><span id="696" class="l">                    <span class="php-var">$attributes</span>[<span class="php-quote">'args'</span>],
</span><span id="697" class="l">                    <span class="php-keyword1">array</span>(
</span><span id="698" class="l">                        <span class="php-quote">'title'</span>     =&gt; <span class="php-var">$title</span>,
</span><span id="699" class="l">                        <span class="php-quote">'id'</span>        =&gt; <span class="php-var">$id</span>,
</span><span id="700" class="l">                        <span class="php-quote">'label_for'</span> =&gt; <span class="php-var">$id</span>,
</span><span id="701" class="l">                        <span class="php-quote">'name'</span>      =&gt; <span class="php-var">$name</span>,
</span><span id="702" class="l">                    )
</span><span id="703" class="l">                );
</span><span id="704" class="l">                add_settings_field( <span class="php-var">$id</span>, <span class="php-var">$title</span>, <span class="php-var">$callback</span>, <span class="php-var">$page</span>, <span class="php-var">$section</span>, <span class="php-var">$args</span> );
</span><span id="705" class="l">                register_setting( <span class="php-var">$page</span>, <span class="php-var">$id</span> );
</span><span id="706" class="l">            }
</span><span id="707" class="l">        } <span class="php-comment">// End foreach().</span>
</span><span id="708" class="l">    }
</span><span id="709" class="l">
</span><span id="710" class="l">    <span class="php-comment">/**
</span></span><span id="711" class="l"><span class="php-comment">    * Fields for the Log Settings tab
</span></span><span id="712" class="l"><span class="php-comment">    * This runs add_settings_section once, as well as add_settings_field and register_setting methods for each option
</span></span><span id="713" class="l"><span class="php-comment">    *
</span></span><span id="714" class="l"><span class="php-comment">    * @param string $page
</span></span><span id="715" class="l"><span class="php-comment">    * @param string $section
</span></span><span id="716" class="l"><span class="php-comment">    * @param array $callbacks
</span></span><span id="717" class="l"><span class="php-comment">    */</span>
</span><span id="718" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> fields_log_settings( <span class="php-var">$page</span>, <span class="php-var">$section</span>, <span class="php-var">$callbacks</span> ) {
</span><span id="719" class="l">        add_settings_section( <span class="php-var">$page</span>, <span class="php-keyword2">ucwords</span>( <span class="php-keyword2">str_replace</span>( <span class="php-quote">'_'</span>, <span class="php-quote">' '</span>, <span class="php-var">$page</span> ) ), <span class="php-keyword1">null</span>, <span class="php-var">$page</span> );
</span><span id="720" class="l">        <span class="php-var">$log_settings</span> = <span class="php-keyword1">array</span>(
</span><span id="721" class="l">            <span class="php-quote">'enable_logging'</span>        =&gt; <span class="php-keyword1">array</span>(
</span><span id="722" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Enable Logging?'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="723" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="724" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="725" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="726" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="727" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'checkbox'</span>,
</span><span id="728" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'absint'</span>,
</span><span id="729" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="730" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="731" class="l">                ),
</span><span id="732" class="l">            ),
</span><span id="733" class="l">            <span class="php-quote">'statuses_to_log'</span>       =&gt; <span class="php-keyword1">array</span>(
</span><span id="734" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Statuses to log'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="735" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'checkboxes'</span>],
</span><span id="736" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="737" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="738" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="739" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'checkboxes'</span>,
</span><span id="740" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="741" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'these are the statuses to log'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="742" class="l">                    <span class="php-quote">'items'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="743" class="l">                        <span class="php-quote">'error'</span>   =&gt; <span class="php-keyword1">array</span>(
</span><span id="744" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'Error'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="745" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'error'</span>,
</span><span id="746" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="747" class="l">                        ),
</span><span id="748" class="l">                        <span class="php-quote">'success'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="749" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'Success'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="750" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'success'</span>,
</span><span id="751" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="752" class="l">                        ),
</span><span id="753" class="l">                        <span class="php-quote">'notice'</span>  =&gt; <span class="php-keyword1">array</span>(
</span><span id="754" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'Notice'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="755" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'notice'</span>,
</span><span id="756" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="757" class="l">                        ),
</span><span id="758" class="l">                        <span class="php-quote">'debug'</span>   =&gt; <span class="php-keyword1">array</span>(
</span><span id="759" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'Debug'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="760" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'debug'</span>,
</span><span id="761" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="762" class="l">                        ),
</span><span id="763" class="l">                    ),
</span><span id="764" class="l">                ),
</span><span id="765" class="l">            ),
</span><span id="766" class="l">            <span class="php-quote">'prune_logs'</span>            =&gt; <span class="php-keyword1">array</span>(
</span><span id="767" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Automatically delete old log entries?'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="768" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="769" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="770" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="771" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="772" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'checkbox'</span>,
</span><span id="773" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'absint'</span>,
</span><span id="774" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="775" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="776" class="l">                ),
</span><span id="777" class="l">            ),
</span><span id="778" class="l">            <span class="php-quote">'logs_how_old'</span>          =&gt; <span class="php-keyword1">array</span>(
</span><span id="779" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Age to delete log entries'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="780" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="781" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="782" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="783" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="784" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'text'</span>,
</span><span id="785" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="786" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'If automatic deleting is enabled, it will affect logs this old.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="787" class="l">                    <span class="php-quote">'default'</span>  =&gt; <span class="php-quote">'2 weeks'</span>,
</span><span id="788" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="789" class="l">                ),
</span><span id="790" class="l">            ),
</span><span id="791" class="l">            <span class="php-quote">'logs_how_often_number'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="792" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Check for old logs every'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="793" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'text'</span>],
</span><span id="794" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="795" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="796" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="797" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'number'</span>,
</span><span id="798" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'absint'</span>,
</span><span id="799" class="l">                    <span class="php-quote">'desc'</span>     =&gt; <span class="php-quote">''</span>,
</span><span id="800" class="l">                    <span class="php-quote">'default'</span>  =&gt; <span class="php-quote">'1'</span>,
</span><span id="801" class="l">                    <span class="php-quote">'constant'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="802" class="l">                ),
</span><span id="803" class="l">            ),
</span><span id="804" class="l">            <span class="php-quote">'logs_how_often_unit'</span>   =&gt; <span class="php-keyword1">array</span>(
</span><span id="805" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Time unit'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="806" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'select'</span>],
</span><span id="807" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="808" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="809" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="810" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'select'</span>,
</span><span id="811" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="812" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'These two fields are how often the site will check for logs to delete.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="813" class="l">                    <span class="php-quote">'items'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="814" class="l">                        <span class="php-quote">'minutes'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="815" class="l">                            <span class="php-quote">'text'</span>  =&gt; __( <span class="php-quote">'Minutes'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="816" class="l">                            <span class="php-quote">'value'</span> =&gt; <span class="php-quote">'minutes'</span>,
</span><span id="817" class="l">                        ),
</span><span id="818" class="l">                        <span class="php-quote">'hours'</span>   =&gt; <span class="php-keyword1">array</span>(
</span><span id="819" class="l">                            <span class="php-quote">'text'</span>  =&gt; __( <span class="php-quote">'Hours'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="820" class="l">                            <span class="php-quote">'value'</span> =&gt; <span class="php-quote">'hours'</span>,
</span><span id="821" class="l">                        ),
</span><span id="822" class="l">                        <span class="php-quote">'days'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="823" class="l">                            <span class="php-quote">'text'</span>  =&gt; __( <span class="php-quote">'Days'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="824" class="l">                            <span class="php-quote">'value'</span> =&gt; <span class="php-quote">'days'</span>,
</span><span id="825" class="l">                        ),
</span><span id="826" class="l">                    ),
</span><span id="827" class="l">                ),
</span><span id="828" class="l">            ),
</span><span id="829" class="l">            <span class="php-quote">'triggers_to_log'</span>       =&gt; <span class="php-keyword1">array</span>(
</span><span id="830" class="l">                <span class="php-quote">'title'</span>    =&gt; __( <span class="php-quote">'Triggers to log'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="831" class="l">                <span class="php-quote">'callback'</span> =&gt; <span class="php-var">$callbacks</span>[<span class="php-quote">'checkboxes'</span>],
</span><span id="832" class="l">                <span class="php-quote">'page'</span>     =&gt; <span class="php-var">$page</span>,
</span><span id="833" class="l">                <span class="php-quote">'section'</span>  =&gt; <span class="php-var">$section</span>,
</span><span id="834" class="l">                <span class="php-quote">'args'</span>     =&gt; <span class="php-keyword1">array</span>(
</span><span id="835" class="l">                    <span class="php-quote">'type'</span>     =&gt; <span class="php-quote">'checkboxes'</span>,
</span><span id="836" class="l">                    <span class="php-quote">'validate'</span> =&gt; <span class="php-quote">'sanitize_text_field'</span>,
</span><span id="837" class="l">                    <span class="php-quote">'desc'</span>     =&gt; __( <span class="php-quote">'these are the triggers to log'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="838" class="l">                    <span class="php-quote">'items'</span>    =&gt; <span class="php-keyword1">array</span>(
</span><span id="839" class="l">                        <span class="php-var">$this</span>-&gt;mappings-&gt;sync_wordpress_create =&gt; <span class="php-keyword1">array</span>(
</span><span id="840" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'WordPress create'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="841" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'wordpress_create'</span>,
</span><span id="842" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="843" class="l">                        ),
</span><span id="844" class="l">                        <span class="php-var">$this</span>-&gt;mappings-&gt;sync_wordpress_update =&gt; <span class="php-keyword1">array</span>(
</span><span id="845" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'WordPress update'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="846" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'wordpress_update'</span>,
</span><span id="847" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="848" class="l">                        ),
</span><span id="849" class="l">                        <span class="php-var">$this</span>-&gt;mappings-&gt;sync_wordpress_delete =&gt; <span class="php-keyword1">array</span>(
</span><span id="850" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'WordPress delete'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="851" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'wordpress_delete'</span>,
</span><span id="852" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="853" class="l">                        ),
</span><span id="854" class="l">                        <span class="php-var">$this</span>-&gt;mappings-&gt;sync_sf_create =&gt; <span class="php-keyword1">array</span>(
</span><span id="855" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'Salesforce create'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="856" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'sf_create'</span>,
</span><span id="857" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="858" class="l">                        ),
</span><span id="859" class="l">                        <span class="php-var">$this</span>-&gt;mappings-&gt;sync_sf_update =&gt; <span class="php-keyword1">array</span>(
</span><span id="860" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'Salesforce update'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="861" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'sf_update'</span>,
</span><span id="862" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="863" class="l">                        ),
</span><span id="864" class="l">                        <span class="php-var">$this</span>-&gt;mappings-&gt;sync_sf_delete =&gt; <span class="php-keyword1">array</span>(
</span><span id="865" class="l">                            <span class="php-quote">'text'</span> =&gt; __( <span class="php-quote">'Salesforce delete'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="866" class="l">                            <span class="php-quote">'id'</span>   =&gt; <span class="php-quote">'sf_delete'</span>,
</span><span id="867" class="l">                            <span class="php-quote">'desc'</span> =&gt; <span class="php-quote">''</span>,
</span><span id="868" class="l">                        ),
</span><span id="869" class="l">                    ),
</span><span id="870" class="l">                ),
</span><span id="871" class="l">            ),
</span><span id="872" class="l">        );
</span><span id="873" class="l">        <span class="php-keyword1">foreach</span> ( <span class="php-var">$log_settings</span> <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$attributes</span> ) {
</span><span id="874" class="l">            <span class="php-var">$id</span>       = <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-var">$key</span>;
</span><span id="875" class="l">            <span class="php-var">$name</span>     = <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-var">$key</span>;
</span><span id="876" class="l">            <span class="php-var">$title</span>    = <span class="php-var">$attributes</span>[<span class="php-quote">'title'</span>];
</span><span id="877" class="l">            <span class="php-var">$callback</span> = <span class="php-var">$attributes</span>[<span class="php-quote">'callback'</span>];
</span><span id="878" class="l">            <span class="php-var">$page</span>     = <span class="php-var">$attributes</span>[<span class="php-quote">'page'</span>];
</span><span id="879" class="l">            <span class="php-var">$section</span>  = <span class="php-var">$attributes</span>[<span class="php-quote">'section'</span>];
</span><span id="880" class="l">            <span class="php-var">$args</span>     = <span class="php-keyword2">array_merge</span>(
</span><span id="881" class="l">                <span class="php-var">$attributes</span>[<span class="php-quote">'args'</span>],
</span><span id="882" class="l">                <span class="php-keyword1">array</span>(
</span><span id="883" class="l">                    <span class="php-quote">'title'</span>     =&gt; <span class="php-var">$title</span>,
</span><span id="884" class="l">                    <span class="php-quote">'id'</span>        =&gt; <span class="php-var">$id</span>,
</span><span id="885" class="l">                    <span class="php-quote">'label_for'</span> =&gt; <span class="php-var">$id</span>,
</span><span id="886" class="l">                    <span class="php-quote">'name'</span>      =&gt; <span class="php-var">$name</span>,
</span><span id="887" class="l">                )
</span><span id="888" class="l">            );
</span><span id="889" class="l">            add_settings_field( <span class="php-var">$id</span>, <span class="php-var">$title</span>, <span class="php-var">$callback</span>, <span class="php-var">$page</span>, <span class="php-var">$section</span>, <span class="php-var">$args</span> );
</span><span id="890" class="l">            register_setting( <span class="php-var">$page</span>, <span class="php-var">$id</span> );
</span><span id="891" class="l">        }
</span><span id="892" class="l">    }
</span><span id="893" class="l">
</span><span id="894" class="l">    <span class="php-comment">/**
</span></span><span id="895" class="l"><span class="php-comment">    * Create the notices, settings, and conditions by which admin notices should appear
</span></span><span id="896" class="l"><span class="php-comment">    *
</span></span><span id="897" class="l"><span class="php-comment">    */</span>
</span><span id="898" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> notices() {
</span><span id="899" class="l">
</span><span id="900" class="l">        <span class="php-var">$get_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_GET, FILTER_SANITIZE_STRING );
</span><span id="901" class="l">        <span class="php-keyword1">require_once</span> plugin_dir_path( __FILE__ ) . <span class="php-quote">'../classes/admin-notice.php'</span>;
</span><span id="902" class="l">
</span><span id="903" class="l">        <span class="php-var">$notices</span> = <span class="php-keyword1">array</span>(
</span><span id="904" class="l">            <span class="php-quote">'permission'</span>      =&gt; <span class="php-keyword1">array</span>(
</span><span id="905" class="l">                <span class="php-quote">'condition'</span>   =&gt; <span class="php-keyword1">false</span> === <span class="php-var">$this</span>-&gt;check_wordpress_admin_permissions(),
</span><span id="906" class="l">                <span class="php-quote">'message'</span>     =&gt; __( <span class="php-quote">&quot;Your account does not have permission to edit the Salesforce REST API plugin's settings.&quot;</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="907" class="l">                <span class="php-quote">'type'</span>        =&gt; <span class="php-quote">'error'</span>,
</span><span id="908" class="l">                <span class="php-quote">'dismissible'</span> =&gt; <span class="php-keyword1">false</span>,
</span><span id="909" class="l">            ),
</span><span id="910" class="l">            <span class="php-quote">'fieldmap'</span>        =&gt; <span class="php-keyword1">array</span>(
</span><span id="911" class="l">                <span class="php-quote">'condition'</span>   =&gt; <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'transient'</span>] ),
</span><span id="912" class="l">                <span class="php-quote">'message'</span>     =&gt; __( <span class="php-quote">'Errors kept this fieldmap from being saved.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="913" class="l">                <span class="php-quote">'type'</span>        =&gt; <span class="php-quote">'error'</span>,
</span><span id="914" class="l">                <span class="php-quote">'dismissible'</span> =&gt; <span class="php-keyword1">true</span>,
</span><span id="915" class="l">            ),
</span><span id="916" class="l">            <span class="php-quote">'object_map'</span>      =&gt; <span class="php-keyword1">array</span>(
</span><span id="917" class="l">                <span class="php-quote">'condition'</span>   =&gt; <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'map_transient'</span>] ),
</span><span id="918" class="l">                <span class="php-quote">'message'</span>     =&gt; __( <span class="php-quote">'Errors kept this object map from being saved.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="919" class="l">                <span class="php-quote">'type'</span>        =&gt; <span class="php-quote">'error'</span>,
</span><span id="920" class="l">                <span class="php-quote">'dismissible'</span> =&gt; <span class="php-keyword1">true</span>,
</span><span id="921" class="l">            ),
</span><span id="922" class="l">            <span class="php-quote">'data_saved'</span>      =&gt; <span class="php-keyword1">array</span>(
</span><span id="923" class="l">                <span class="php-quote">'condition'</span>   =&gt; <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'data_saved'</span>] ) &amp;&amp; <span class="php-quote">'true'</span> === <span class="php-var">$get_data</span>[<span class="php-quote">'data_saved'</span>],
</span><span id="924" class="l">                <span class="php-quote">'message'</span>     =&gt; __( <span class="php-quote">'This data was successfully saved.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="925" class="l">                <span class="php-quote">'type'</span>        =&gt; <span class="php-quote">'success'</span>,
</span><span id="926" class="l">                <span class="php-quote">'dismissible'</span> =&gt; <span class="php-keyword1">true</span>,
</span><span id="927" class="l">            ),
</span><span id="928" class="l">            <span class="php-quote">'data_save_error'</span> =&gt; <span class="php-keyword1">array</span>(
</span><span id="929" class="l">                <span class="php-quote">'condition'</span>   =&gt; <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'data_saved'</span>] ) &amp;&amp; <span class="php-quote">'false'</span> === <span class="php-var">$get_data</span>[<span class="php-quote">'data_saved'</span>],
</span><span id="930" class="l">                <span class="php-quote">'message'</span>     =&gt; __( <span class="php-quote">'This data was not successfully saved. Try again.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="931" class="l">                <span class="php-quote">'type'</span>        =&gt; <span class="php-quote">'error'</span>,
</span><span id="932" class="l">                <span class="php-quote">'dismissible'</span> =&gt; <span class="php-keyword1">true</span>,
</span><span id="933" class="l">            ),
</span><span id="934" class="l">        );
</span><span id="935" class="l">
</span><span id="936" class="l">        <span class="php-keyword1">foreach</span> ( <span class="php-var">$notices</span> <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="937" class="l">
</span><span id="938" class="l">            <span class="php-var">$condition</span> = <span class="php-var">$value</span>[<span class="php-quote">'condition'</span>];
</span><span id="939" class="l">            <span class="php-var">$message</span>   = <span class="php-var">$value</span>[<span class="php-quote">'message'</span>];
</span><span id="940" class="l">
</span><span id="941" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$value</span>[<span class="php-quote">'dismissible'</span>] ) ) {
</span><span id="942" class="l">                <span class="php-var">$dismissible</span> = <span class="php-var">$value</span>[<span class="php-quote">'dismissible'</span>];
</span><span id="943" class="l">            } <span class="php-keyword1">else</span> {
</span><span id="944" class="l">                <span class="php-var">$dismissible</span> = <span class="php-keyword1">false</span>;
</span><span id="945" class="l">            }
</span><span id="946" class="l">
</span><span id="947" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$value</span>[<span class="php-quote">'type'</span>] ) ) {
</span><span id="948" class="l">                <span class="php-var">$type</span> = <span class="php-var">$value</span>[<span class="php-quote">'type'</span>];
</span><span id="949" class="l">            } <span class="php-keyword1">else</span> {
</span><span id="950" class="l">                <span class="php-var">$type</span> = <span class="php-quote">''</span>;
</span><span id="951" class="l">            }
</span><span id="952" class="l">
</span><span id="953" class="l">            <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">isset</span>( <span class="php-var">$value</span>[<span class="php-quote">'template'</span>] ) ) {
</span><span id="954" class="l">                <span class="php-var">$template</span> = <span class="php-quote">''</span>;
</span><span id="955" class="l">            }
</span><span id="956" class="l">
</span><span id="957" class="l">            <span class="php-keyword1">if</span> ( <span class="php-var">$condition</span> ) {
</span><span id="958" class="l">                <span class="php-keyword1">new</span> Object_Sync_Sf_Admin_Notice( <span class="php-var">$condition</span>, <span class="php-var">$message</span>, <span class="php-var">$dismissible</span>, <span class="php-var">$type</span>, <span class="php-var">$template</span> );
</span><span id="959" class="l">            }
</span><span id="960" class="l">        }
</span><span id="961" class="l">
</span><span id="962" class="l">    }
</span><span id="963" class="l">
</span><span id="964" class="l">    <span class="php-comment">/**
</span></span><span id="965" class="l"><span class="php-comment">    * Get all the Salesforce object settings for fieldmapping
</span></span><span id="966" class="l"><span class="php-comment">    * This takes either the $_POST array via ajax, or can be directly called with a $data array
</span></span><span id="967" class="l"><span class="php-comment">    *
</span></span><span id="968" class="l"><span class="php-comment">    * @param array $data
</span></span><span id="969" class="l"><span class="php-comment">    * data must contain a salesforce_object
</span></span><span id="970" class="l"><span class="php-comment">    * can optionally contain a type
</span></span><span id="971" class="l"><span class="php-comment">    * @return array $object_settings
</span></span><span id="972" class="l"><span class="php-comment">    */</span>
</span><span id="973" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> get_salesforce_object_description( <span class="php-var">$data</span> = <span class="php-keyword1">array</span>() ) {
</span><span id="974" class="l">        <span class="php-var">$ajax</span> = <span class="php-keyword1">false</span>;
</span><span id="975" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$data</span> ) ) {
</span><span id="976" class="l">            <span class="php-var">$data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="977" class="l">            <span class="php-var">$ajax</span> = <span class="php-keyword1">true</span>;
</span><span id="978" class="l">        }
</span><span id="979" class="l">
</span><span id="980" class="l">        <span class="php-var">$object_description</span> = <span class="php-keyword1">array</span>();
</span><span id="981" class="l">
</span><span id="982" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$data</span>[<span class="php-quote">'salesforce_object'</span>] ) ) {
</span><span id="983" class="l">            <span class="php-var">$object</span> = <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>]-&gt;object_describe( esc_attr( <span class="php-var">$data</span>[<span class="php-quote">'salesforce_object'</span>] ) );
</span><span id="984" class="l">
</span><span id="985" class="l">            <span class="php-var">$object_fields</span>        = <span class="php-keyword1">array</span>();
</span><span id="986" class="l">            <span class="php-var">$include_record_types</span> = <span class="php-keyword1">array</span>();
</span><span id="987" class="l">
</span><span id="988" class="l">            <span class="php-comment">// these can come from ajax</span>
</span><span id="989" class="l">            <span class="php-var">$include</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'include'</span>] ) ? (<span class="php-keyword1">array</span>) <span class="php-var">$data</span>[<span class="php-quote">'include'</span>] : <span class="php-keyword1">array</span>();
</span><span id="990" class="l">            <span class="php-var">$include</span> = <span class="php-keyword2">array_map</span>( <span class="php-quote">'esc_attr'</span>, <span class="php-var">$include</span> );
</span><span id="991" class="l">
</span><span id="992" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword2">in_array</span>( <span class="php-quote">'fields'</span>, <span class="php-var">$include</span>, <span class="php-keyword1">true</span> ) || <span class="php-keyword1">empty</span>( <span class="php-var">$include</span> ) ) {
</span><span id="993" class="l">                <span class="php-var">$type</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'field_type'</span>] ) ? esc_attr( <span class="php-var">$data</span>[<span class="php-quote">'field_type'</span>] ) : <span class="php-quote">''</span>; <span class="php-comment">// can come from ajax</span>
</span><span id="994" class="l">                <span class="php-keyword1">foreach</span> ( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'fields'</span>] <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="995" class="l">                    <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> === <span class="php-var">$type</span> || <span class="php-var">$type</span> === <span class="php-var">$value</span>[<span class="php-quote">'type'</span>] ) {
</span><span id="996" class="l">                        <span class="php-var">$object_fields</span>[ <span class="php-var">$key</span> ] = <span class="php-var">$value</span>;
</span><span id="997" class="l">                    }
</span><span id="998" class="l">                }
</span><span id="999" class="l">                <span class="php-var">$object_description</span>[<span class="php-quote">'fields'</span>] = <span class="php-var">$object_fields</span>;
</span><span id="1000" class="l">            }
</span><span id="1001" class="l">
</span><span id="1002" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword2">in_array</span>( <span class="php-quote">'recordTypeInfos'</span>, <span class="php-var">$include</span>, <span class="php-keyword1">true</span> ) ) {
</span><span id="1003" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'recordTypeInfos'</span>] ) &amp;&amp; <span class="php-keyword2">count</span>( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'recordTypeInfos'</span>] ) &gt; <span class="php-num">1</span> ) {
</span><span id="1004" class="l">                    <span class="php-keyword1">foreach</span> ( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'recordTypeInfos'</span>] <span class="php-keyword1">as</span> <span class="php-var">$type</span> ) {
</span><span id="1005" class="l">                        <span class="php-var">$object_record_types</span>[ <span class="php-var">$type</span>[<span class="php-quote">'recordTypeId'</span>] ] = <span class="php-var">$type</span>[<span class="php-quote">'name'</span>];
</span><span id="1006" class="l">                    }
</span><span id="1007" class="l">                    <span class="php-var">$object_description</span>[<span class="php-quote">'recordTypeInfos'</span>] = <span class="php-var">$object_record_types</span>;
</span><span id="1008" class="l">                }
</span><span id="1009" class="l">            }
</span><span id="1010" class="l">        }
</span><span id="1011" class="l">
</span><span id="1012" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$ajax</span> ) {
</span><span id="1013" class="l">            wp_send_json_success( <span class="php-var">$object_description</span> );
</span><span id="1014" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1015" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$object_description</span>;
</span><span id="1016" class="l">        }
</span><span id="1017" class="l">    }
</span><span id="1018" class="l">
</span><span id="1019" class="l">    <span class="php-comment">/**
</span></span><span id="1020" class="l"><span class="php-comment">    * Get Salesforce object fields for fieldmapping
</span></span><span id="1021" class="l"><span class="php-comment">    *
</span></span><span id="1022" class="l"><span class="php-comment">    * @param array $data
</span></span><span id="1023" class="l"><span class="php-comment">    * data must contain a salesforce_object
</span></span><span id="1024" class="l"><span class="php-comment">    * can optionally contain a type for the field
</span></span><span id="1025" class="l"><span class="php-comment">    * @return array $object_fields
</span></span><span id="1026" class="l"><span class="php-comment">    */</span>
</span><span id="1027" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> get_salesforce_object_fields( <span class="php-var">$data</span> = <span class="php-keyword1">array</span>() ) {
</span><span id="1028" class="l">
</span><span id="1029" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$data</span>[<span class="php-quote">'salesforce_object'</span>] ) ) {
</span><span id="1030" class="l">            <span class="php-var">$object</span>               = <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>]-&gt;object_describe( esc_attr( <span class="php-var">$data</span>[<span class="php-quote">'salesforce_object'</span>] ) );
</span><span id="1031" class="l">            <span class="php-var">$object_fields</span>        = <span class="php-keyword1">array</span>();
</span><span id="1032" class="l">            <span class="php-var">$type</span>                 = <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'type'</span>] ) ? esc_attr( <span class="php-var">$data</span>[<span class="php-quote">'type'</span>] ) : <span class="php-quote">''</span>;
</span><span id="1033" class="l">            <span class="php-var">$include_record_types</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'include_record_types'</span>] ) ? esc_attr( <span class="php-var">$data</span>[<span class="php-quote">'include_record_types'</span>] ) : <span class="php-keyword1">false</span>;
</span><span id="1034" class="l">            <span class="php-keyword1">foreach</span> ( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'fields'</span>] <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="1035" class="l">                <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> === <span class="php-var">$type</span> || <span class="php-var">$type</span> === <span class="php-var">$value</span>[<span class="php-quote">'type'</span>] ) {
</span><span id="1036" class="l">                    <span class="php-var">$object_fields</span>[ <span class="php-var">$key</span> ] = <span class="php-var">$value</span>;
</span><span id="1037" class="l">                }
</span><span id="1038" class="l">            }
</span><span id="1039" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$include_record_types</span> ) {
</span><span id="1040" class="l">                <span class="php-var">$object_record_types</span> = <span class="php-keyword1">array</span>();
</span><span id="1041" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'recordTypeInfos'</span>] ) &amp;&amp; <span class="php-keyword2">count</span>( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'recordTypeInfos'</span>] ) &gt; <span class="php-num">1</span> ) {
</span><span id="1042" class="l">                    <span class="php-keyword1">foreach</span> ( <span class="php-var">$object</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'recordTypeInfos'</span>] <span class="php-keyword1">as</span> <span class="php-var">$type</span> ) {
</span><span id="1043" class="l">                        <span class="php-var">$object_record_types</span>[ <span class="php-var">$type</span>[<span class="php-quote">'recordTypeId'</span>] ] = <span class="php-var">$type</span>[<span class="php-quote">'name'</span>];
</span><span id="1044" class="l">                    }
</span><span id="1045" class="l">                }
</span><span id="1046" class="l">            }
</span><span id="1047" class="l">        }
</span><span id="1048" class="l">
</span><span id="1049" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$object_fields</span>;
</span><span id="1050" class="l">
</span><span id="1051" class="l">    }
</span><span id="1052" class="l">
</span><span id="1053" class="l">    <span class="php-comment">/**
</span></span><span id="1054" class="l"><span class="php-comment">    * Get WordPress object fields for fieldmapping
</span></span><span id="1055" class="l"><span class="php-comment">    * This takes either the $_POST array via ajax, or can be directly called with a $wordpress_object field
</span></span><span id="1056" class="l"><span class="php-comment">    *
</span></span><span id="1057" class="l"><span class="php-comment">    * @param string $wordpress_object
</span></span><span id="1058" class="l"><span class="php-comment">    * @return array $object_fields
</span></span><span id="1059" class="l"><span class="php-comment">    */</span>
</span><span id="1060" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> get_wordpress_object_fields( <span class="php-var">$wordpress_object</span> = <span class="php-quote">''</span> ) {
</span><span id="1061" class="l">        <span class="php-var">$ajax</span>      = <span class="php-keyword1">false</span>;
</span><span id="1062" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1063" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$wordpress_object</span> ) ) {
</span><span id="1064" class="l">            <span class="php-var">$wordpress_object</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ? sanitize_text_field( wp_unslash( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ) : <span class="php-quote">''</span>;
</span><span id="1065" class="l">            <span class="php-var">$ajax</span>             = <span class="php-keyword1">true</span>;
</span><span id="1066" class="l">        }
</span><span id="1067" class="l">
</span><span id="1068" class="l">        <span class="php-var">$object_fields</span> = <span class="php-var">$this</span>-&gt;wordpress-&gt;get_wordpress_object_fields( <span class="php-var">$wordpress_object</span> );
</span><span id="1069" class="l">
</span><span id="1070" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$ajax</span> ) {
</span><span id="1071" class="l">            wp_send_json_success( <span class="php-var">$object_fields</span> );
</span><span id="1072" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1073" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$object_fields</span>;
</span><span id="1074" class="l">        }
</span><span id="1075" class="l">    }
</span><span id="1076" class="l">
</span><span id="1077" class="l">    <span class="php-comment">/**
</span></span><span id="1078" class="l"><span class="php-comment">    * Get WordPress and Salesforce object fields together for fieldmapping
</span></span><span id="1079" class="l"><span class="php-comment">    * This takes either the $_POST array via ajax, or can be directly called with $wordpress_object and $salesforce_object fields
</span></span><span id="1080" class="l"><span class="php-comment">    *
</span></span><span id="1081" class="l"><span class="php-comment">    * @param string $wordpress_object
</span></span><span id="1082" class="l"><span class="php-comment">    * @param string $salesforce_object
</span></span><span id="1083" class="l"><span class="php-comment">    * @return array $object_fields
</span></span><span id="1084" class="l"><span class="php-comment">    */</span>
</span><span id="1085" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> get_wp_sf_object_fields( <span class="php-var">$wordpress_object</span> = <span class="php-quote">''</span>, <span class="php-var">$salesforce</span> = <span class="php-quote">''</span> ) {
</span><span id="1086" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1087" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$wordpress_object</span> ) ) {
</span><span id="1088" class="l">            <span class="php-var">$wordpress_object</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ? sanitize_text_field( wp_unslash( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ) : <span class="php-quote">''</span>;
</span><span id="1089" class="l">        }
</span><span id="1090" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$salesforce_object</span> ) ) {
</span><span id="1091" class="l">            <span class="php-var">$salesforce_object</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_object'</span>] ) ? sanitize_text_field( wp_unslash( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_object'</span>] ) ) : <span class="php-quote">''</span>;
</span><span id="1092" class="l">        }
</span><span id="1093" class="l">
</span><span id="1094" class="l">        <span class="php-var">$object_fields</span>[<span class="php-quote">'wordpress'</span>]  = <span class="php-var">$this</span>-&gt;get_wordpress_object_fields( <span class="php-var">$wordpress_object</span> );
</span><span id="1095" class="l">        <span class="php-var">$object_fields</span>[<span class="php-quote">'salesforce'</span>] = <span class="php-var">$this</span>-&gt;get_salesforce_object_fields(
</span><span id="1096" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1097" class="l">                <span class="php-quote">'salesforce_object'</span> =&gt; <span class="php-var">$salesforce_object</span>,
</span><span id="1098" class="l">            )
</span><span id="1099" class="l">        );
</span><span id="1100" class="l">
</span><span id="1101" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$post_data</span> ) ) {
</span><span id="1102" class="l">            wp_send_json_success( <span class="php-var">$object_fields</span> );
</span><span id="1103" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1104" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$object_fields</span>;
</span><span id="1105" class="l">        }
</span><span id="1106" class="l">    }
</span><span id="1107" class="l">
</span><span id="1108" class="l">    <span class="php-comment">/**
</span></span><span id="1109" class="l"><span class="php-comment">    * Manually push the WordPress object to Salesforce
</span></span><span id="1110" class="l"><span class="php-comment">    * This takes either the $_POST array via ajax, or can be directly called with $wordpress_object and $wordpress_id fields
</span></span><span id="1111" class="l"><span class="php-comment">    *
</span></span><span id="1112" class="l"><span class="php-comment">    * @param string $wordpress_object
</span></span><span id="1113" class="l"><span class="php-comment">    * @param int $wordpress_id
</span></span><span id="1114" class="l"><span class="php-comment">    */</span>
</span><span id="1115" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> push_to_salesforce( <span class="php-var">$wordpress_object</span> = <span class="php-quote">''</span>, <span class="php-var">$wordpress_id</span> = <span class="php-quote">''</span> ) {
</span><span id="1116" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1117" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$wordpress_object</span> ) &amp;&amp; <span class="php-keyword1">empty</span>( <span class="php-var">$wordpress_id</span> ) ) {
</span><span id="1118" class="l">            <span class="php-var">$wordpress_object</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ? sanitize_text_field( wp_unslash( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ) : <span class="php-quote">''</span>;
</span><span id="1119" class="l">            <span class="php-var">$wordpress_id</span>     = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_id'</span>] ) ? absint( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_id'</span>] ) : <span class="php-quote">''</span>;
</span><span id="1120" class="l">        }
</span><span id="1121" class="l">        <span class="php-var">$data</span>   = <span class="php-var">$this</span>-&gt;wordpress-&gt;get_wordpress_object_data( <span class="php-var">$wordpress_object</span>, <span class="php-var">$wordpress_id</span> );
</span><span id="1122" class="l">        <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;push-&gt;manual_object_update( <span class="php-var">$data</span>, <span class="php-var">$wordpress_object</span> );
</span><span id="1123" class="l">
</span><span id="1124" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) &amp;&amp; ! <span class="php-keyword1">empty</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_id'</span>] ) ) {
</span><span id="1125" class="l">            wp_send_json_success( <span class="php-var">$result</span> );
</span><span id="1126" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1127" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$result</span>;
</span><span id="1128" class="l">        }
</span><span id="1129" class="l">
</span><span id="1130" class="l">    }
</span><span id="1131" class="l">
</span><span id="1132" class="l">    <span class="php-comment">/**
</span></span><span id="1133" class="l"><span class="php-comment">    * Manually pull the Salesforce object into WordPress
</span></span><span id="1134" class="l"><span class="php-comment">    * This takes either the $_POST array via ajax, or can be directly called with $salesforce_id fields
</span></span><span id="1135" class="l"><span class="php-comment">    *
</span></span><span id="1136" class="l"><span class="php-comment">    * @param string $salesforce_id
</span></span><span id="1137" class="l"><span class="php-comment">    * @param string $wordpress_object
</span></span><span id="1138" class="l"><span class="php-comment">    */</span>
</span><span id="1139" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> pull_from_salesforce( <span class="php-var">$salesforce_id</span> = <span class="php-quote">''</span>, <span class="php-var">$wordpress_object</span> = <span class="php-quote">''</span> ) {
</span><span id="1140" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1141" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$wordpress_object</span> ) &amp;&amp; <span class="php-keyword1">empty</span>( <span class="php-var">$salesforce_id</span> ) ) {
</span><span id="1142" class="l">            <span class="php-var">$wordpress_object</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ? sanitize_text_field( wp_unslash( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ) : <span class="php-quote">''</span>;
</span><span id="1143" class="l">            <span class="php-var">$salesforce_id</span>    = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_id'</span>] ) ? sanitize_text_field( wp_unslash( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_id'</span>] ) ) : <span class="php-quote">''</span>;
</span><span id="1144" class="l">        }
</span><span id="1145" class="l">        <span class="php-var">$type</span>   = <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>]-&gt;get_sobject_type( <span class="php-var">$salesforce_id</span> );
</span><span id="1146" class="l">        <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;pull-&gt;manual_pull( <span class="php-var">$type</span>, <span class="php-var">$salesforce_id</span>, <span class="php-var">$wordpress_object</span> ); <span class="php-comment">// we want the wp object to make sure we get the right fieldmap</span>
</span><span id="1147" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$post_data</span> ) ) {
</span><span id="1148" class="l">            wp_send_json_success( <span class="php-var">$result</span> );
</span><span id="1149" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1150" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$result</span>;
</span><span id="1151" class="l">        }
</span><span id="1152" class="l">    }
</span><span id="1153" class="l">
</span><span id="1154" class="l">    <span class="php-comment">/**
</span></span><span id="1155" class="l"><span class="php-comment">    * Manually pull the Salesforce object into WordPress
</span></span><span id="1156" class="l"><span class="php-comment">    * This takes an id for a mapping object row
</span></span><span id="1157" class="l"><span class="php-comment">    *
</span></span><span id="1158" class="l"><span class="php-comment">    * @param int $mapping_id
</span></span><span id="1159" class="l"><span class="php-comment">    */</span>
</span><span id="1160" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> refresh_mapped_data( <span class="php-var">$mapping_id</span> = <span class="php-quote">''</span> ) {
</span><span id="1161" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1162" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$mapping_id</span> ) ) {
</span><span id="1163" class="l">            <span class="php-var">$mapping_id</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'mapping_id'</span>] ) ? absint( <span class="php-var">$post_data</span>[<span class="php-quote">'mapping_id'</span>] ) : <span class="php-quote">''</span>;
</span><span id="1164" class="l">        }
</span><span id="1165" class="l">        <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_object_maps(
</span><span id="1166" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1167" class="l">                <span class="php-quote">'id'</span> =&gt; <span class="php-var">$mapping_id</span>,
</span><span id="1168" class="l">            )
</span><span id="1169" class="l">        );
</span><span id="1170" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$post_data</span> ) ) {
</span><span id="1171" class="l">            wp_send_json_success( <span class="php-var">$result</span> );
</span><span id="1172" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1173" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$result</span>;
</span><span id="1174" class="l">        }
</span><span id="1175" class="l">    }
</span><span id="1176" class="l">
</span><span id="1177" class="l">    <span class="php-comment">/**
</span></span><span id="1178" class="l"><span class="php-comment">    * Prepare fieldmap data and redirect after processing
</span></span><span id="1179" class="l"><span class="php-comment">    * This runs when the create or update forms are submitted
</span></span><span id="1180" class="l"><span class="php-comment">    * It is public because it depends on an admin hook
</span></span><span id="1181" class="l"><span class="php-comment">    * It then calls the Object_Sync_Sf_Mapping class and sends prepared data over to it, then redirects to the correct page
</span></span><span id="1182" class="l"><span class="php-comment">    * This method does include error handling, by loading the submission in a transient if there is an error, and then deleting it upon success
</span></span><span id="1183" class="l"><span class="php-comment">    *
</span></span><span id="1184" class="l"><span class="php-comment">    */</span>
</span><span id="1185" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> prepare_fieldmap_data() {
</span><span id="1186" class="l">        <span class="php-var">$error</span>     = <span class="php-keyword1">false</span>;
</span><span id="1187" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1188" class="l">        <span class="php-var">$cachekey</span>  = <span class="php-keyword2">md5</span>( wp_json_encode( <span class="php-var">$post_data</span> ) );
</span><span id="1189" class="l">
</span><span id="1190" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'label'</span>] ) || ! <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_object'</span>] ) || ! <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] ) ) {
</span><span id="1191" class="l">            <span class="php-var">$error</span> = <span class="php-keyword1">true</span>;
</span><span id="1192" class="l">        }
</span><span id="1193" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$error</span> ) {
</span><span id="1194" class="l">            <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;set( <span class="php-var">$cachekey</span>, <span class="php-var">$post_data</span>, <span class="php-var">$this</span>-&gt;wordpress-&gt;options[<span class="php-quote">'cache_expiration'</span>] );
</span><span id="1195" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$cachekey</span> ) {
</span><span id="1196" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_error'</span>] ) . <span class="php-quote">'&amp;transient='</span> . <span class="php-var">$cachekey</span>;
</span><span id="1197" class="l">            }
</span><span id="1198" class="l">        } <span class="php-keyword1">else</span> { <span class="php-comment">// there are no errors</span>
</span><span id="1199" class="l">            <span class="php-comment">// send the row to the fieldmap class</span>
</span><span id="1200" class="l">            <span class="php-comment">// if it is add or clone, use the create method</span>
</span><span id="1201" class="l">            <span class="php-var">$method</span>            = esc_attr( <span class="php-var">$post_data</span>[<span class="php-quote">'method'</span>] );
</span><span id="1202" class="l">            <span class="php-var">$salesforce_fields</span> = <span class="php-var">$this</span>-&gt;get_salesforce_object_fields(
</span><span id="1203" class="l">                <span class="php-keyword1">array</span>(
</span><span id="1204" class="l">                    <span class="php-quote">'salesforce_object'</span> =&gt; <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_object'</span>],
</span><span id="1205" class="l">                )
</span><span id="1206" class="l">            );
</span><span id="1207" class="l">            <span class="php-var">$wordpress_fields</span>  = <span class="php-var">$this</span>-&gt;get_wordpress_object_fields( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_object'</span>] );
</span><span id="1208" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">'add'</span> === <span class="php-var">$method</span> || <span class="php-quote">'clone'</span> === <span class="php-var">$method</span> ) {
</span><span id="1209" class="l">                <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;create_fieldmap( <span class="php-var">$post_data</span>, <span class="php-var">$wordpress_fields</span>, <span class="php-var">$salesforce_fields</span> );
</span><span id="1210" class="l">            } <span class="php-keyword1">elseif</span> ( <span class="php-quote">'edit'</span> === <span class="php-var">$method</span> ) { <span class="php-comment">// if it is edit, use the update method</span>
</span><span id="1211" class="l">                <span class="php-var">$id</span>     = esc_attr( <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] );
</span><span id="1212" class="l">                <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;update_fieldmap( <span class="php-var">$post_data</span>, <span class="php-var">$wordpress_fields</span>, <span class="php-var">$salesforce_fields</span>, <span class="php-var">$id</span> );
</span><span id="1213" class="l">            }
</span><span id="1214" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">false</span> === <span class="php-var">$result</span> ) { <span class="php-comment">// if the database didn't save, it's still an error</span>
</span><span id="1215" class="l">                <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;set( <span class="php-var">$cachekey</span>, <span class="php-var">$post_data</span>, <span class="php-var">$this</span>-&gt;wordpress-&gt;options[<span class="php-quote">'cache_expiration'</span>] );
</span><span id="1216" class="l">                <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$cachekey</span> ) {
</span><span id="1217" class="l">                    <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_error'</span>] ) . <span class="php-quote">'&amp;transient='</span> . <span class="php-var">$cachekey</span>;
</span><span id="1218" class="l">                }
</span><span id="1219" class="l">            } <span class="php-keyword1">else</span> {
</span><span id="1220" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'transient'</span>] ) ) { <span class="php-comment">// there was previously an error saved. can delete it now.</span>
</span><span id="1221" class="l">                    <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;<span class="php-keyword2">delete</span>( esc_attr( <span class="php-var">$post_data</span>[<span class="php-quote">'map_transient'</span>] ) );
</span><span id="1222" class="l">                }
</span><span id="1223" class="l">                <span class="php-comment">// then send the user to the list of fieldmaps</span>
</span><span id="1224" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_success'</span>] );
</span><span id="1225" class="l">            }
</span><span id="1226" class="l">        }
</span><span id="1227" class="l">        wp_safe_redirect( <span class="php-var">$url</span> );
</span><span id="1228" class="l">        <span class="php-keyword1">exit</span>();
</span><span id="1229" class="l">    }
</span><span id="1230" class="l">
</span><span id="1231" class="l">    <span class="php-comment">/**
</span></span><span id="1232" class="l"><span class="php-comment">    * Delete fieldmap data and redirect after processing
</span></span><span id="1233" class="l"><span class="php-comment">    * This runs when the delete link is clicked, after the user confirms
</span></span><span id="1234" class="l"><span class="php-comment">    * It is public because it depends on an admin hook
</span></span><span id="1235" class="l"><span class="php-comment">    * It then calls the Object_Sync_Sf_Mapping class and the delete method
</span></span><span id="1236" class="l"><span class="php-comment">    *
</span></span><span id="1237" class="l"><span class="php-comment">    */</span>
</span><span id="1238" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> delete_fieldmap() {
</span><span id="1239" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1240" class="l">        <span class="php-keyword1">if</span> ( <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] ) {
</span><span id="1241" class="l">            <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;delete_fieldmap( <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] );
</span><span id="1242" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$result</span> ) {
</span><span id="1243" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_success'</span>] );
</span><span id="1244" class="l">            } <span class="php-keyword1">else</span> {
</span><span id="1245" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_error'</span>] . <span class="php-quote">'&amp;id='</span> . <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] );
</span><span id="1246" class="l">            }
</span><span id="1247" class="l">            wp_safe_redirect( <span class="php-var">$url</span> );
</span><span id="1248" class="l">            <span class="php-keyword1">exit</span>();
</span><span id="1249" class="l">        }
</span><span id="1250" class="l">    }
</span><span id="1251" class="l">
</span><span id="1252" class="l">    <span class="php-comment">/**
</span></span><span id="1253" class="l"><span class="php-comment">    * Prepare object data and redirect after processing
</span></span><span id="1254" class="l"><span class="php-comment">    * This runs when the update form is submitted
</span></span><span id="1255" class="l"><span class="php-comment">    * It is public because it depends on an admin hook
</span></span><span id="1256" class="l"><span class="php-comment">    * It then calls the Object_Sync_Sf_Mapping class and sends prepared data over to it, then redirects to the correct page
</span></span><span id="1257" class="l"><span class="php-comment">    * This method does include error handling, by loading the submission in a transient if there is an error, and then deleting it upon success
</span></span><span id="1258" class="l"><span class="php-comment">    *
</span></span><span id="1259" class="l"><span class="php-comment">    */</span>
</span><span id="1260" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> prepare_object_map_data() {
</span><span id="1261" class="l">        <span class="php-var">$error</span>     = <span class="php-keyword1">false</span>;
</span><span id="1262" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1263" class="l">        <span class="php-var">$cachekey</span>  = <span class="php-keyword2">md5</span>( wp_json_encode( <span class="php-var">$post_data</span> ) );
</span><span id="1264" class="l">
</span><span id="1265" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'wordpress_id'</span>] ) || ! <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_id'</span>] ) ) {
</span><span id="1266" class="l">            <span class="php-var">$error</span> = <span class="php-keyword1">true</span>;
</span><span id="1267" class="l">        }
</span><span id="1268" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$error</span> ) {
</span><span id="1269" class="l">            <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;set( <span class="php-var">$cachekey</span>, <span class="php-var">$post_data</span>, <span class="php-var">$this</span>-&gt;wordpress-&gt;options[<span class="php-quote">'cache_expiration'</span>] );
</span><span id="1270" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$cachekey</span> ) {
</span><span id="1271" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_error'</span>] ) . <span class="php-quote">'&amp;map_transient='</span> . <span class="php-var">$cachekey</span>;
</span><span id="1272" class="l">            }
</span><span id="1273" class="l">        } <span class="php-keyword1">else</span> { <span class="php-comment">// there are no errors</span>
</span><span id="1274" class="l">            <span class="php-comment">// send the row to the object map class</span>
</span><span id="1275" class="l">            <span class="php-var">$method</span> = esc_attr( <span class="php-var">$post_data</span>[<span class="php-quote">'method'</span>] );
</span><span id="1276" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">'edit'</span> === <span class="php-var">$method</span> ) { <span class="php-comment">// if it is edit, use the update method</span>
</span><span id="1277" class="l">                <span class="php-var">$id</span>     = esc_attr( <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] );
</span><span id="1278" class="l">                <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;update_object_map( <span class="php-var">$post_data</span>, <span class="php-var">$id</span> );
</span><span id="1279" class="l">            }
</span><span id="1280" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">false</span> === <span class="php-var">$result</span> ) { <span class="php-comment">// if the database didn't save, it's still an error</span>
</span><span id="1281" class="l">                <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;set( <span class="php-var">$cachekey</span>, <span class="php-var">$post_data</span>, <span class="php-var">$this</span>-&gt;wordpress-&gt;options[<span class="php-quote">'cache_expiration'</span>] );
</span><span id="1282" class="l">                <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$cachekey</span> ) {
</span><span id="1283" class="l">                    <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_error'</span>] ) . <span class="php-quote">'&amp;map_transient='</span> . <span class="php-var">$cachekey</span>;
</span><span id="1284" class="l">                }
</span><span id="1285" class="l">            } <span class="php-keyword1">else</span> {
</span><span id="1286" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'map_transient'</span>] ) ) { <span class="php-comment">// there was previously an error saved. can delete it now.</span>
</span><span id="1287" class="l">                    <span class="php-var">$this</span>-&gt;sfwp_transients-&gt;<span class="php-keyword2">delete</span>( esc_attr( <span class="php-var">$post_data</span>[<span class="php-quote">'map_transient'</span>] ) );
</span><span id="1288" class="l">                }
</span><span id="1289" class="l">                <span class="php-comment">// then send the user to the success redirect url</span>
</span><span id="1290" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_success'</span>] );
</span><span id="1291" class="l">            }
</span><span id="1292" class="l">        }
</span><span id="1293" class="l">        wp_safe_redirect( <span class="php-var">$url</span> );
</span><span id="1294" class="l">        <span class="php-keyword1">exit</span>();
</span><span id="1295" class="l">    }
</span><span id="1296" class="l">
</span><span id="1297" class="l">    <span class="php-comment">/**
</span></span><span id="1298" class="l"><span class="php-comment">    * Delete object map data and redirect after processing
</span></span><span id="1299" class="l"><span class="php-comment">    * This runs when the delete link is clicked on an error row, after the user confirms
</span></span><span id="1300" class="l"><span class="php-comment">    * It is public because it depends on an admin hook
</span></span><span id="1301" class="l"><span class="php-comment">    * It then calls the Object_Sync_Sf_Mapping class and the delete method
</span></span><span id="1302" class="l"><span class="php-comment">    *
</span></span><span id="1303" class="l"><span class="php-comment">    */</span>
</span><span id="1304" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> delete_object_map() {
</span><span id="1305" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1306" class="l">        <span class="php-keyword1">if</span> ( <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] ) {
</span><span id="1307" class="l">            <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;delete_object_map( <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] );
</span><span id="1308" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$result</span> ) {
</span><span id="1309" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_success'</span>] );
</span><span id="1310" class="l">            } <span class="php-keyword1">else</span> {
</span><span id="1311" class="l">                <span class="php-var">$url</span> = esc_url_raw( <span class="php-var">$post_data</span>[<span class="php-quote">'redirect_url_error'</span>] . <span class="php-quote">'&amp;id='</span> . <span class="php-var">$post_data</span>[<span class="php-quote">'id'</span>] );
</span><span id="1312" class="l">            }
</span><span id="1313" class="l">            wp_safe_redirect( <span class="php-var">$url</span> );
</span><span id="1314" class="l">            <span class="php-keyword1">exit</span>();
</span><span id="1315" class="l">        }
</span><span id="1316" class="l">    }
</span><span id="1317" class="l">
</span><span id="1318" class="l">    <span class="php-comment">/**
</span></span><span id="1319" class="l"><span class="php-comment">    * Import a json file and use it for plugin data
</span></span><span id="1320" class="l"><span class="php-comment">    *
</span></span><span id="1321" class="l"><span class="php-comment">    */</span>
</span><span id="1322" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> import_json_file() {
</span><span id="1323" class="l">
</span><span id="1324" class="l">        <span class="php-keyword1">if</span> ( ! wp_verify_nonce( <span class="php-var">$_POST</span>[<span class="php-quote">'object_sync_for_salesforce_nonce_import'</span>], <span class="php-quote">'object_sync_for_salesforce_nonce_import'</span> ) ) {
</span><span id="1325" class="l">            <span class="php-keyword1">return</span>;
</span><span id="1326" class="l">        }
</span><span id="1327" class="l">        <span class="php-keyword1">if</span> ( ! current_user_can( <span class="php-quote">'manage_options'</span> ) ) {
</span><span id="1328" class="l">            <span class="php-keyword1">return</span>;
</span><span id="1329" class="l">        }
</span><span id="1330" class="l">        <span class="php-var">$path</span>      = <span class="php-var">$_FILES</span>[<span class="php-quote">'import_file'</span>][<span class="php-quote">'name'</span>];
</span><span id="1331" class="l">        <span class="php-var">$extension</span> = <span class="php-keyword2">pathinfo</span>( <span class="php-var">$path</span>, PATHINFO_EXTENSION );
</span><span id="1332" class="l">        <span class="php-keyword1">if</span> ( <span class="php-quote">'json'</span> !== <span class="php-var">$extension</span> ) {
</span><span id="1333" class="l">            wp_die( __( <span class="php-quote">'Please upload a valid .json file'</span> ) );
</span><span id="1334" class="l">        }
</span><span id="1335" class="l">
</span><span id="1336" class="l">        <span class="php-var">$import_file</span> = <span class="php-var">$_FILES</span>[<span class="php-quote">'import_file'</span>][<span class="php-quote">'tmp_name'</span>];
</span><span id="1337" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">empty</span>( <span class="php-var">$import_file</span> ) ) {
</span><span id="1338" class="l">            wp_die( __( <span class="php-quote">'Please upload a file to import'</span> ) );
</span><span id="1339" class="l">        }
</span><span id="1340" class="l">
</span><span id="1341" class="l">        <span class="php-comment">// Retrieve the data from the file and convert the json object to an array.</span>
</span><span id="1342" class="l">        <span class="php-var">$data</span> = (<span class="php-keyword1">array</span>) <span class="php-keyword2">json_decode</span>( <span class="php-keyword2">file_get_contents</span>( <span class="php-var">$import_file</span> ), <span class="php-keyword1">true</span> );
</span><span id="1343" class="l">
</span><span id="1344" class="l">        <span class="php-var">$overwrite</span> = <span class="php-keyword1">isset</span>( <span class="php-var">$_POST</span>[<span class="php-quote">'overwrite'</span>] ) ? esc_attr( <span class="php-var">$_POST</span>[<span class="php-quote">'overwrite'</span>] ) : <span class="php-quote">''</span>;
</span><span id="1345" class="l">        <span class="php-keyword1">if</span> ( <span class="php-quote">'1'</span> === <span class="php-var">$overwrite</span> ) {
</span><span id="1346" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'fieldmaps'</span>] ) ) {
</span><span id="1347" class="l">                <span class="php-var">$fieldmaps</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_fieldmaps();
</span><span id="1348" class="l">                <span class="php-keyword1">foreach</span> ( <span class="php-var">$fieldmaps</span> <span class="php-keyword1">as</span> <span class="php-var">$fieldmap</span> ) {
</span><span id="1349" class="l">                    <span class="php-var">$id</span>     = <span class="php-var">$fieldmap</span>[<span class="php-quote">'id'</span>];
</span><span id="1350" class="l">                    <span class="php-var">$delete</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;delete_fieldmap( <span class="php-var">$id</span> );
</span><span id="1351" class="l">                }
</span><span id="1352" class="l">            }
</span><span id="1353" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'object_maps'</span>] ) ) {
</span><span id="1354" class="l">                <span class="php-var">$fieldmaps</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_object_maps();
</span><span id="1355" class="l">                <span class="php-keyword1">foreach</span> ( <span class="php-var">$fieldmaps</span> <span class="php-keyword1">as</span> <span class="php-var">$fieldmap</span> ) {
</span><span id="1356" class="l">                    <span class="php-var">$id</span>     = <span class="php-var">$fieldmap</span>[<span class="php-quote">'id'</span>];
</span><span id="1357" class="l">                    <span class="php-var">$delete</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;delete_object_map( <span class="php-var">$id</span> );
</span><span id="1358" class="l">                }
</span><span id="1359" class="l">            }
</span><span id="1360" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'plugin_settings'</span>] ) ) {
</span><span id="1361" class="l">                <span class="php-keyword1">foreach</span> ( <span class="php-var">$data</span>[<span class="php-quote">'plugin_settings'</span>] <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="1362" class="l">                    delete_option( <span class="php-var">$value</span>[<span class="php-quote">'option_name'</span>] );
</span><span id="1363" class="l">                }
</span><span id="1364" class="l">            }
</span><span id="1365" class="l">        }
</span><span id="1366" class="l">
</span><span id="1367" class="l">        <span class="php-var">$success</span> = <span class="php-keyword1">true</span>;
</span><span id="1368" class="l">
</span><span id="1369" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'fieldmaps'</span>] ) ) {
</span><span id="1370" class="l">            <span class="php-keyword1">foreach</span> ( <span class="php-var">$data</span>[<span class="php-quote">'fieldmaps'</span>] <span class="php-keyword1">as</span> <span class="php-var">$fieldmap</span> ) {
</span><span id="1371" class="l">                <span class="php-keyword1">unset</span>( <span class="php-var">$fieldmap</span>[<span class="php-quote">'id'</span>] );
</span><span id="1372" class="l">                <span class="php-var">$create</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;create_fieldmap( <span class="php-var">$fieldmap</span> );
</span><span id="1373" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">false</span> === <span class="php-var">$create</span> ) {
</span><span id="1374" class="l">                    <span class="php-var">$success</span> = <span class="php-keyword1">false</span>;
</span><span id="1375" class="l">                }
</span><span id="1376" class="l">            }
</span><span id="1377" class="l">        }
</span><span id="1378" class="l">
</span><span id="1379" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'object_maps'</span>] ) ) {
</span><span id="1380" class="l">            <span class="php-keyword1">foreach</span> ( <span class="php-var">$data</span>[<span class="php-quote">'object_maps'</span>] <span class="php-keyword1">as</span> <span class="php-var">$object_map</span> ) {
</span><span id="1381" class="l">                <span class="php-keyword1">unset</span>( <span class="php-var">$object_map</span>[<span class="php-quote">'id'</span>] );
</span><span id="1382" class="l">                <span class="php-var">$create</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;create_object_map( <span class="php-var">$object_map</span> );
</span><span id="1383" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">false</span> === <span class="php-var">$create</span> ) {
</span><span id="1384" class="l">                    <span class="php-var">$success</span> = <span class="php-keyword1">false</span>;
</span><span id="1385" class="l">                }
</span><span id="1386" class="l">            }
</span><span id="1387" class="l">        }
</span><span id="1388" class="l">
</span><span id="1389" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$data</span>[<span class="php-quote">'plugin_settings'</span>] ) ) {
</span><span id="1390" class="l">            <span class="php-keyword1">foreach</span> ( <span class="php-var">$data</span>[<span class="php-quote">'plugin_settings'</span>] <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="1391" class="l">                update_option( <span class="php-var">$value</span>[<span class="php-quote">'option_name'</span>], maybe_unserialize( <span class="php-var">$value</span>[<span class="php-quote">'option_value'</span>] ), <span class="php-var">$value</span>[<span class="php-quote">'autoload'</span>] );
</span><span id="1392" class="l">            }
</span><span id="1393" class="l">        }
</span><span id="1394" class="l">
</span><span id="1395" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$success</span> ) {
</span><span id="1396" class="l">            wp_safe_redirect( get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=import-export&amp;data_saved=true'</span> ) );
</span><span id="1397" class="l">            <span class="php-keyword1">exit</span>;
</span><span id="1398" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1399" class="l">            wp_safe_redirect( get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=import-export&amp;data_saved=false'</span> ) );
</span><span id="1400" class="l">            <span class="php-keyword1">exit</span>;
</span><span id="1401" class="l">        }
</span><span id="1402" class="l">
</span><span id="1403" class="l">    }
</span><span id="1404" class="l">
</span><span id="1405" class="l">    <span class="php-comment">/**
</span></span><span id="1406" class="l"><span class="php-comment">    * Create a json file for exporting
</span></span><span id="1407" class="l"><span class="php-comment">    *
</span></span><span id="1408" class="l"><span class="php-comment">    */</span>
</span><span id="1409" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> export_json_file() {
</span><span id="1410" class="l">
</span><span id="1411" class="l">        <span class="php-keyword1">if</span> ( ! wp_verify_nonce( <span class="php-var">$_POST</span>[<span class="php-quote">'object_sync_for_salesforce_nonce_export'</span>], <span class="php-quote">'object_sync_for_salesforce_nonce_export'</span> ) ) {
</span><span id="1412" class="l">            <span class="php-keyword1">return</span>;
</span><span id="1413" class="l">        }
</span><span id="1414" class="l">        <span class="php-keyword1">if</span> ( ! current_user_can( <span class="php-quote">'manage_options'</span> ) ) {
</span><span id="1415" class="l">            <span class="php-keyword1">return</span>;
</span><span id="1416" class="l">        }
</span><span id="1417" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1418" class="l">        <span class="php-var">$export</span>    = <span class="php-keyword1">array</span>();
</span><span id="1419" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword2">in_array</span>( <span class="php-quote">'fieldmaps'</span>, <span class="php-var">$post_data</span>[<span class="php-quote">'export'</span>] ) ) {
</span><span id="1420" class="l">            <span class="php-var">$export</span>[<span class="php-quote">'fieldmaps'</span>] = <span class="php-var">$this</span>-&gt;mappings-&gt;get_fieldmaps();
</span><span id="1421" class="l">        }
</span><span id="1422" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword2">in_array</span>( <span class="php-quote">'object_maps'</span>, <span class="php-var">$post_data</span>[<span class="php-quote">'export'</span>] ) ) {
</span><span id="1423" class="l">            <span class="php-var">$export</span>[<span class="php-quote">'object_maps'</span>] = <span class="php-var">$this</span>-&gt;mappings-&gt;get_object_maps();
</span><span id="1424" class="l">        }
</span><span id="1425" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword2">in_array</span>( <span class="php-quote">'plugin_settings'</span>, <span class="php-var">$post_data</span>[<span class="php-quote">'export'</span>] ) ) {
</span><span id="1426" class="l">            <span class="php-var">$export</span>[<span class="php-quote">'plugin_settings'</span>] = <span class="php-var">$this</span>-&gt;wpdb-&gt;get_results( <span class="php-quote">'SELECT * FROM '</span> . <span class="php-var">$this</span>-&gt;wpdb-&gt;prefix . <span class="php-quote">'options'</span> . <span class="php-quote">' WHERE option_name like &quot;'</span> . <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'%&quot;'</span>, ARRAY_A );
</span><span id="1427" class="l">        }
</span><span id="1428" class="l">        nocache_headers();
</span><span id="1429" class="l">        <span class="php-keyword2">header</span>( <span class="php-quote">'Content-Type: application/json; charset=utf-8'</span> );
</span><span id="1430" class="l">        <span class="php-keyword2">header</span>( <span class="php-quote">'Content-Disposition: attachment; filename=object-sync-for-salesforce-data-export-'</span> . <span class="php-keyword2">date</span>( <span class="php-quote">'m-d-Y'</span> ) . <span class="php-quote">'.json'</span> );
</span><span id="1431" class="l">        <span class="php-keyword2">header</span>( <span class="php-quote">'Expires: 0'</span> );
</span><span id="1432" class="l">        <span class="php-keyword1">echo</span> wp_json_encode( <span class="php-var">$export</span> );
</span><span id="1433" class="l">        <span class="php-keyword1">exit</span>;
</span><span id="1434" class="l">    }
</span><span id="1435" class="l">
</span><span id="1436" class="l">    <span class="php-comment">/**
</span></span><span id="1437" class="l"><span class="php-comment">    * Default display for &lt;input&gt; fields
</span></span><span id="1438" class="l"><span class="php-comment">    *
</span></span><span id="1439" class="l"><span class="php-comment">    * @param array $args
</span></span><span id="1440" class="l"><span class="php-comment">    */</span>
</span><span id="1441" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> display_input_field( <span class="php-var">$args</span> ) {
</span><span id="1442" class="l">        <span class="php-var">$type</span>    = <span class="php-var">$args</span>[<span class="php-quote">'type'</span>];
</span><span id="1443" class="l">        <span class="php-var">$id</span>      = <span class="php-var">$args</span>[<span class="php-quote">'label_for'</span>];
</span><span id="1444" class="l">        <span class="php-var">$name</span>    = <span class="php-var">$args</span>[<span class="php-quote">'name'</span>];
</span><span id="1445" class="l">        <span class="php-var">$desc</span>    = <span class="php-var">$args</span>[<span class="php-quote">'desc'</span>];
</span><span id="1446" class="l">        <span class="php-var">$checked</span> = <span class="php-quote">''</span>;
</span><span id="1447" class="l">
</span><span id="1448" class="l">        <span class="php-var">$class</span> = <span class="php-quote">'regular-text'</span>;
</span><span id="1449" class="l">
</span><span id="1450" class="l">        <span class="php-keyword1">if</span> ( <span class="php-quote">'checkbox'</span> === <span class="php-var">$type</span> ) {
</span><span id="1451" class="l">            <span class="php-var">$class</span> = <span class="php-quote">'checkbox'</span>;
</span><span id="1452" class="l">        }
</span><span id="1453" class="l">
</span><span id="1454" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">isset</span>( <span class="php-var">$args</span>[<span class="php-quote">'constant'</span>] ) || ! <span class="php-keyword2">defined</span>( <span class="php-var">$args</span>[<span class="php-quote">'constant'</span>] ) ) {
</span><span id="1455" class="l">            <span class="php-var">$value</span> = esc_attr( get_option( <span class="php-var">$id</span>, <span class="php-quote">''</span> ) );
</span><span id="1456" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">'checkbox'</span> === <span class="php-var">$type</span> ) {
</span><span id="1457" class="l">                <span class="php-keyword1">if</span> ( <span class="php-quote">'1'</span> === <span class="php-var">$value</span> ) {
</span><span id="1458" class="l">                    <span class="php-var">$checked</span> = <span class="php-quote">'checked '</span>;
</span><span id="1459" class="l">                }
</span><span id="1460" class="l">                <span class="php-var">$value</span> = <span class="php-num">1</span>;
</span><span id="1461" class="l">            }
</span><span id="1462" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> === <span class="php-var">$value</span> &amp;&amp; <span class="php-keyword1">isset</span>( <span class="php-var">$args</span>[<span class="php-quote">'default'</span>] ) &amp;&amp; <span class="php-quote">''</span> !== <span class="php-var">$args</span>[<span class="php-quote">'default'</span>] ) {
</span><span id="1463" class="l">                <span class="php-var">$value</span> = <span class="php-var">$args</span>[<span class="php-quote">'default'</span>];
</span><span id="1464" class="l">            }
</span><span id="1465" class="l">
</span><span id="1466" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;input type=&quot;%1$s&quot; value=&quot;%2$s&quot; name=&quot;%3$s&quot; id=&quot;%4$s&quot; class=&quot;%5$s&quot;%6$s&gt;'</span>,
</span><span id="1467" class="l">                esc_attr( <span class="php-var">$type</span> ),
</span><span id="1468" class="l">                esc_attr( <span class="php-var">$value</span> ),
</span><span id="1469" class="l">                esc_attr( <span class="php-var">$name</span> ),
</span><span id="1470" class="l">                esc_attr( <span class="php-var">$id</span> ),
</span><span id="1471" class="l">                sanitize_html_class( <span class="php-var">$class</span> . esc_html( <span class="php-quote">' code'</span> ) ),
</span><span id="1472" class="l">                esc_html( <span class="php-var">$checked</span> )
</span><span id="1473" class="l">            );
</span><span id="1474" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$desc</span> ) {
</span><span id="1475" class="l">                <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p class=&quot;description&quot;&gt;%1$s&lt;/p&gt;'</span>,
</span><span id="1476" class="l">                    esc_html( <span class="php-var">$desc</span> )
</span><span id="1477" class="l">                );
</span><span id="1478" class="l">            }
</span><span id="1479" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1480" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;&lt;code&gt;%1$s&lt;/code&gt;&lt;/p&gt;'</span>,
</span><span id="1481" class="l">                esc_html__( <span class="php-quote">'Defined in wp-config.php'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> )
</span><span id="1482" class="l">            );
</span><span id="1483" class="l">        }
</span><span id="1484" class="l">    }
</span><span id="1485" class="l">
</span><span id="1486" class="l">    <span class="php-comment">/**
</span></span><span id="1487" class="l"><span class="php-comment">    * Display for multiple checkboxes
</span></span><span id="1488" class="l"><span class="php-comment">    * Above method can handle a single checkbox as it is
</span></span><span id="1489" class="l"><span class="php-comment">    *
</span></span><span id="1490" class="l"><span class="php-comment">    * @param array $args
</span></span><span id="1491" class="l"><span class="php-comment">    */</span>
</span><span id="1492" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> display_checkboxes( <span class="php-var">$args</span> ) {
</span><span id="1493" class="l">        <span class="php-var">$type</span>    = <span class="php-quote">'checkbox'</span>;
</span><span id="1494" class="l">        <span class="php-var">$name</span>    = <span class="php-var">$args</span>[<span class="php-quote">'name'</span>];
</span><span id="1495" class="l">        <span class="php-var">$options</span> = get_option( <span class="php-var">$name</span>, <span class="php-keyword1">array</span>() );
</span><span id="1496" class="l">        <span class="php-keyword1">foreach</span> ( <span class="php-var">$args</span>[<span class="php-quote">'items'</span>] <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="1497" class="l">            <span class="php-var">$text</span>    = <span class="php-var">$value</span>[<span class="php-quote">'text'</span>];
</span><span id="1498" class="l">            <span class="php-var">$id</span>      = <span class="php-var">$value</span>[<span class="php-quote">'id'</span>];
</span><span id="1499" class="l">            <span class="php-var">$desc</span>    = <span class="php-var">$value</span>[<span class="php-quote">'desc'</span>];
</span><span id="1500" class="l">            <span class="php-var">$checked</span> = <span class="php-quote">''</span>;
</span><span id="1501" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword2">is_array</span>( <span class="php-var">$options</span> ) &amp;&amp; <span class="php-keyword2">in_array</span>( (string) <span class="php-var">$key</span>, <span class="php-var">$options</span>, <span class="php-keyword1">true</span> ) ) {
</span><span id="1502" class="l">                <span class="php-var">$checked</span> = <span class="php-quote">'checked'</span>;
</span><span id="1503" class="l">            } <span class="php-keyword1">elseif</span> ( <span class="php-keyword2">is_array</span>( <span class="php-var">$options</span> ) &amp;&amp; <span class="php-keyword1">empty</span>( <span class="php-var">$options</span> ) ) {
</span><span id="1504" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$value</span>[<span class="php-quote">'default'</span>] ) &amp;&amp; <span class="php-keyword1">true</span> === <span class="php-var">$value</span>[<span class="php-quote">'default'</span>] ) {
</span><span id="1505" class="l">                    <span class="php-var">$checked</span> = <span class="php-quote">'checked'</span>;
</span><span id="1506" class="l">                }
</span><span id="1507" class="l">            }
</span><span id="1508" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;div class=&quot;checkbox&quot;&gt;&lt;label&gt;&lt;input type=&quot;%1$s&quot; value=&quot;%2$s&quot; name=&quot;%3$s[]&quot; id=&quot;%4$s&quot;%5$s&gt;%6$s&lt;/label&gt;&lt;/div&gt;'</span>,
</span><span id="1509" class="l">                esc_attr( <span class="php-var">$type</span> ),
</span><span id="1510" class="l">                esc_attr( <span class="php-var">$key</span> ),
</span><span id="1511" class="l">                esc_attr( <span class="php-var">$name</span> ),
</span><span id="1512" class="l">                esc_attr( <span class="php-var">$id</span> ),
</span><span id="1513" class="l">                esc_html( <span class="php-var">$checked</span> ),
</span><span id="1514" class="l">                esc_html( <span class="php-var">$text</span> )
</span><span id="1515" class="l">            );
</span><span id="1516" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$desc</span> ) {
</span><span id="1517" class="l">                <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p class=&quot;description&quot;&gt;%1$s&lt;/p&gt;'</span>,
</span><span id="1518" class="l">                    esc_html( <span class="php-var">$desc</span> )
</span><span id="1519" class="l">                );
</span><span id="1520" class="l">            }
</span><span id="1521" class="l">        }
</span><span id="1522" class="l">    }
</span><span id="1523" class="l">
</span><span id="1524" class="l">    <span class="php-comment">/**
</span></span><span id="1525" class="l"><span class="php-comment">    * Display for a dropdown
</span></span><span id="1526" class="l"><span class="php-comment">    *
</span></span><span id="1527" class="l"><span class="php-comment">    * @param array $args
</span></span><span id="1528" class="l"><span class="php-comment">    */</span>
</span><span id="1529" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> display_select( <span class="php-var">$args</span> ) {
</span><span id="1530" class="l">        <span class="php-var">$type</span> = <span class="php-var">$args</span>[<span class="php-quote">'type'</span>];
</span><span id="1531" class="l">        <span class="php-var">$id</span>   = <span class="php-var">$args</span>[<span class="php-quote">'label_for'</span>];
</span><span id="1532" class="l">        <span class="php-var">$name</span> = <span class="php-var">$args</span>[<span class="php-quote">'name'</span>];
</span><span id="1533" class="l">        <span class="php-var">$desc</span> = <span class="php-var">$args</span>[<span class="php-quote">'desc'</span>];
</span><span id="1534" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword1">isset</span>( <span class="php-var">$args</span>[<span class="php-quote">'constant'</span>] ) || ! <span class="php-keyword2">defined</span>( <span class="php-var">$args</span>[<span class="php-quote">'constant'</span>] ) ) {
</span><span id="1535" class="l">            <span class="php-var">$current_value</span> = get_option( <span class="php-var">$name</span> );
</span><span id="1536" class="l">
</span><span id="1537" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;div class=&quot;select&quot;&gt;&lt;select id=&quot;%1$s&quot; name=&quot;%2$s&quot;&gt;&lt;option value=&quot;&quot;&gt;- '</span> . __( <span class="php-quote">'Select one'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ) . <span class="php-quote">' -&lt;/option&gt;'</span>,
</span><span id="1538" class="l">                esc_attr( <span class="php-var">$id</span> ),
</span><span id="1539" class="l">                esc_attr( <span class="php-var">$name</span> )
</span><span id="1540" class="l">            );
</span><span id="1541" class="l">
</span><span id="1542" class="l">            <span class="php-keyword1">foreach</span> ( <span class="php-var">$args</span>[<span class="php-quote">'items'</span>] <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="1543" class="l">                <span class="php-var">$text</span>     = <span class="php-var">$value</span>[<span class="php-quote">'text'</span>];
</span><span id="1544" class="l">                <span class="php-var">$value</span>    = <span class="php-var">$value</span>[<span class="php-quote">'value'</span>];
</span><span id="1545" class="l">                <span class="php-var">$selected</span> = <span class="php-quote">''</span>;
</span><span id="1546" class="l">                <span class="php-keyword1">if</span> ( <span class="php-var">$key</span> === <span class="php-var">$current_value</span> || <span class="php-var">$value</span> === <span class="php-var">$current_value</span> ) {
</span><span id="1547" class="l">                    <span class="php-var">$selected</span> = <span class="php-quote">' selected'</span>;
</span><span id="1548" class="l">                }
</span><span id="1549" class="l">
</span><span id="1550" class="l">                <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;option value=&quot;%1$s&quot;%2$s&gt;%3$s&lt;/option&gt;'</span>,
</span><span id="1551" class="l">                    esc_attr( <span class="php-var">$value</span> ),
</span><span id="1552" class="l">                    esc_attr( <span class="php-var">$selected</span> ),
</span><span id="1553" class="l">                    esc_html( <span class="php-var">$text</span> )
</span><span id="1554" class="l">                );
</span><span id="1555" class="l">
</span><span id="1556" class="l">            }
</span><span id="1557" class="l">            <span class="php-keyword1">echo</span> <span class="php-quote">'&lt;/select&gt;'</span>;
</span><span id="1558" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$desc</span> ) {
</span><span id="1559" class="l">                <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p class=&quot;description&quot;&gt;%1$s&lt;/p&gt;'</span>,
</span><span id="1560" class="l">                    esc_html( <span class="php-var">$desc</span> )
</span><span id="1561" class="l">                );
</span><span id="1562" class="l">            }
</span><span id="1563" class="l">            <span class="php-keyword1">echo</span> <span class="php-quote">'&lt;/div&gt;'</span>;
</span><span id="1564" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1565" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;&lt;code&gt;%1$s&lt;/code&gt;&lt;/p&gt;'</span>,
</span><span id="1566" class="l">                esc_html__( <span class="php-quote">'Defined in wp-config.php'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> )
</span><span id="1567" class="l">            );
</span><span id="1568" class="l">        }
</span><span id="1569" class="l">    }
</span><span id="1570" class="l">
</span><span id="1571" class="l">    <span class="php-comment">/**
</span></span><span id="1572" class="l"><span class="php-comment">    * Dropdown formatted list of Salesforce API versions
</span></span><span id="1573" class="l"><span class="php-comment">    *
</span></span><span id="1574" class="l"><span class="php-comment">    * @return array $args
</span></span><span id="1575" class="l"><span class="php-comment">    */</span>
</span><span id="1576" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> version_options() {
</span><span id="1577" class="l">        <span class="php-var">$versions</span> = <span class="php-var">$this</span>-&gt;salesforce[<span class="php-quote">'sfapi'</span>]-&gt;get_api_versions();
</span><span id="1578" class="l">        <span class="php-var">$args</span>     = <span class="php-keyword1">array</span>();
</span><span id="1579" class="l">        <span class="php-keyword1">foreach</span> ( <span class="php-var">$versions</span>[<span class="php-quote">'data'</span>] <span class="php-keyword1">as</span> <span class="php-var">$key</span> =&gt; <span class="php-var">$value</span> ) {
</span><span id="1580" class="l">            <span class="php-var">$args</span>[] = <span class="php-keyword1">array</span>(
</span><span id="1581" class="l">                <span class="php-quote">'value'</span> =&gt; <span class="php-var">$value</span>[<span class="php-quote">'version'</span>],
</span><span id="1582" class="l">                <span class="php-quote">'text'</span>  =&gt; <span class="php-var">$value</span>[<span class="php-quote">'label'</span>] . <span class="php-quote">' ('</span> . <span class="php-var">$value</span>[<span class="php-quote">'version'</span>] . <span class="php-quote">')'</span>,
</span><span id="1583" class="l">            );
</span><span id="1584" class="l">        }
</span><span id="1585" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$args</span>;
</span><span id="1586" class="l">    }
</span><span id="1587" class="l">
</span><span id="1588" class="l">    <span class="php-comment">/**
</span></span><span id="1589" class="l"><span class="php-comment">    * Default display for &lt;a href&gt; links
</span></span><span id="1590" class="l"><span class="php-comment">    *
</span></span><span id="1591" class="l"><span class="php-comment">    * @param array $args
</span></span><span id="1592" class="l"><span class="php-comment">    */</span>
</span><span id="1593" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> display_link( <span class="php-var">$args</span> ) {
</span><span id="1594" class="l">        <span class="php-var">$label</span> = <span class="php-var">$args</span>[<span class="php-quote">'label'</span>];
</span><span id="1595" class="l">        <span class="php-var">$desc</span>  = <span class="php-var">$args</span>[<span class="php-quote">'desc'</span>];
</span><span id="1596" class="l">        <span class="php-var">$url</span>   = <span class="php-var">$args</span>[<span class="php-quote">'url'</span>];
</span><span id="1597" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$args</span>[<span class="php-quote">'link_class'</span>] ) ) {
</span><span id="1598" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;&lt;a class=&quot;%1$s&quot; href=&quot;%2$s&quot;&gt;%3$s&lt;/a&gt;&lt;/p&gt;'</span>,
</span><span id="1599" class="l">                esc_attr( <span class="php-var">$args</span>[<span class="php-quote">'link_class'</span>] ),
</span><span id="1600" class="l">                esc_url( <span class="php-var">$url</span> ),
</span><span id="1601" class="l">                esc_html( <span class="php-var">$label</span> )
</span><span id="1602" class="l">            );
</span><span id="1603" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1604" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;&lt;a href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt;&lt;/p&gt;'</span>,
</span><span id="1605" class="l">                esc_url( <span class="php-var">$url</span> ),
</span><span id="1606" class="l">                esc_html( <span class="php-var">$label</span> )
</span><span id="1607" class="l">            );
</span><span id="1608" class="l">        }
</span><span id="1609" class="l">
</span><span id="1610" class="l">        <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$desc</span> ) {
</span><span id="1611" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p class=&quot;description&quot;&gt;%1$s&lt;/p&gt;'</span>,
</span><span id="1612" class="l">                esc_html( <span class="php-var">$desc</span> )
</span><span id="1613" class="l">            );
</span><span id="1614" class="l">        }
</span><span id="1615" class="l">
</span><span id="1616" class="l">    }
</span><span id="1617" class="l">
</span><span id="1618" class="l">    <span class="php-comment">/**
</span></span><span id="1619" class="l"><span class="php-comment">    * Run a demo of Salesforce API call on the authenticate tab after WordPress has authenticated with it
</span></span><span id="1620" class="l"><span class="php-comment">    *
</span></span><span id="1621" class="l"><span class="php-comment">    * @param object $sfapi
</span></span><span id="1622" class="l"><span class="php-comment">    */</span>
</span><span id="1623" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> status( <span class="php-var">$sfapi</span> ) {
</span><span id="1624" class="l">
</span><span id="1625" class="l">        <span class="php-var">$versions</span> = <span class="php-var">$sfapi</span>-&gt;get_api_versions();
</span><span id="1626" class="l">
</span><span id="1627" class="l">        <span class="php-comment">// format this array into text so users can see the versions</span>
</span><span id="1628" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$versions</span>[<span class="php-quote">'cached'</span>] ) {
</span><span id="1629" class="l">            <span class="php-var">$versions_is_cached</span> = esc_html__( <span class="php-quote">'This list is cached, and'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1630" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1631" class="l">            <span class="php-var">$versions_is_cached</span> = esc_html__( <span class="php-quote">'This list is not cached, but'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1632" class="l">        }
</span><span id="1633" class="l">
</span><span id="1634" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$versions</span>[<span class="php-quote">'from_cache'</span>] ) {
</span><span id="1635" class="l">            <span class="php-var">$versions_from_cache</span> = esc_html__( <span class="php-quote">'items were loaded from the cache'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1636" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1637" class="l">            <span class="php-var">$versions_from_cache</span> = esc_html__( <span class="php-quote">'items were not loaded from the cache'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1638" class="l">        }
</span><span id="1639" class="l">
</span><span id="1640" class="l">        <span class="php-comment">// translators: 1) $versions_is_cached is the &quot;This list is/is not cached, and/but&quot; line, 2) $versions_from_cache is the &quot;items were/were not loaded from the cache&quot; line</span>
</span><span id="1641" class="l">        <span class="php-var">$versions_apicall_summary</span> = <span class="php-keyword2">sprintf</span>( esc_html__( <span class="php-quote">'Available Salesforce API versions. %1$s %2$s. This is not an authenticated request, so it does not touch the Salesforce token.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="1642" class="l">            <span class="php-var">$versions_is_cached</span>,
</span><span id="1643" class="l">            <span class="php-var">$versions_from_cache</span>
</span><span id="1644" class="l">        );
</span><span id="1645" class="l">
</span><span id="1646" class="l">        <span class="php-var">$contacts</span> = <span class="php-var">$sfapi</span>-&gt;query( <span class="php-quote">'SELECT Name, Id from Contact LIMIT 100'</span> );
</span><span id="1647" class="l">
</span><span id="1648" class="l">        <span class="php-comment">// format this array into html so users can see the contacts</span>
</span><span id="1649" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$contacts</span>[<span class="php-quote">'cached'</span>] ) {
</span><span id="1650" class="l">            <span class="php-var">$contacts_is_cached</span> = esc_html__( <span class="php-quote">'They are cached, and'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1651" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1652" class="l">            <span class="php-var">$contacts_is_cached</span> = esc_html__( <span class="php-quote">'They are not cached, but'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1653" class="l">        }
</span><span id="1654" class="l">
</span><span id="1655" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$contacts</span>[<span class="php-quote">'from_cache'</span>] ) {
</span><span id="1656" class="l">            <span class="php-var">$contacts_from_cache</span> = esc_html__( <span class="php-quote">'they were loaded from the cache'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1657" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1658" class="l">            <span class="php-var">$contacts_from_cache</span> = esc_html__( <span class="php-quote">'they were not loaded from the cache'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1659" class="l">        }
</span><span id="1660" class="l">
</span><span id="1661" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$contacts</span>[<span class="php-quote">'is_redo'</span>] ) {
</span><span id="1662" class="l">            <span class="php-var">$contacts_refreshed_token</span> = esc_html__( <span class="php-quote">'This request did require refreshing the Salesforce token'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1663" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1664" class="l">            <span class="php-var">$contacts_refreshed_token</span> = esc_html__( <span class="php-quote">'This request did not require refreshing the Salesforce token'</span>, <span class="php-quote">'object-sync-salesforce'</span> );
</span><span id="1665" class="l">        }
</span><span id="1666" class="l">
</span><span id="1667" class="l">        <span class="php-comment">// translators: 1) $contacts['data']['totalSize'] is the number of items loaded, 2) $contacts['data']['records'][0]['attributes']['type'] is the name of the Salesforce object, 3) $contacts_is_cached is the &quot;They are/are not cached, and/but&quot; line, 4) $contacts_from_cache is the &quot;they were/were not loaded from the cache&quot; line, 5) is the &quot;this request did/did not require refreshing the Salesforce token&quot; line</span>
</span><span id="1668" class="l">        <span class="php-var">$contacts_apicall_summary</span> = <span class="php-keyword2">sprintf</span>( esc_html__( <span class="php-quote">'Salesforce successfully returned %1$s %2$s records. %3$s %4$s. %5$s.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ),
</span><span id="1669" class="l">            absint( <span class="php-var">$contacts</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'totalSize'</span>] ),
</span><span id="1670" class="l">            esc_html( <span class="php-var">$contacts</span>[<span class="php-quote">'data'</span>][<span class="php-quote">'records'</span>][<span class="php-num">0</span>][<span class="php-quote">'attributes'</span>][<span class="php-quote">'type'</span>] ),
</span><span id="1671" class="l">            <span class="php-var">$contacts_is_cached</span>,
</span><span id="1672" class="l">            <span class="php-var">$contacts_from_cache</span>,
</span><span id="1673" class="l">            <span class="php-var">$contacts_refreshed_token</span>
</span><span id="1674" class="l">        );
</span><span id="1675" class="l">
</span><span id="1676" class="l">        <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/status.php'</span> );
</span><span id="1677" class="l">
</span><span id="1678" class="l">    }
</span><span id="1679" class="l">
</span><span id="1680" class="l">    <span class="php-comment">/**
</span></span><span id="1681" class="l"><span class="php-comment">    * Deauthorize WordPress from Salesforce.
</span></span><span id="1682" class="l"><span class="php-comment">    * This deletes the tokens from the database; it does not currently do anything in Salesforce
</span></span><span id="1683" class="l"><span class="php-comment">    * For this plugin at this time, that is the decision we are making: don't do any kind of authorization stuff inside Salesforce
</span></span><span id="1684" class="l"><span class="php-comment">    */</span>
</span><span id="1685" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> logout() {
</span><span id="1686" class="l">        <span class="php-var">$this</span>-&gt;access_token  = delete_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'access_token'</span> );
</span><span id="1687" class="l">        <span class="php-var">$this</span>-&gt;instance_url  = delete_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'instance_url'</span> );
</span><span id="1688" class="l">        <span class="php-var">$this</span>-&gt;refresh_token = delete_option( <span class="php-var">$this</span>-&gt;option_prefix . <span class="php-quote">'refresh_token'</span> );
</span><span id="1689" class="l">        <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;You have been logged out. You can use the &lt;a href=&quot;%1$s&quot;&gt;%2$s&lt;/a&gt; tab to log in again.&lt;/p&gt;'</span>,
</span><span id="1690" class="l">            esc_url( get_admin_url( <span class="php-keyword1">null</span>, <span class="php-quote">'options-general.php?page=object-sync-salesforce-admin&amp;tab=authorize'</span> ) ),
</span><span id="1691" class="l">            esc_html__( <span class="php-quote">'Authorize'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> )
</span><span id="1692" class="l">        );
</span><span id="1693" class="l">    }
</span><span id="1694" class="l">
</span><span id="1695" class="l">    <span class="php-comment">/**
</span></span><span id="1696" class="l"><span class="php-comment">    * Ajax call to clear the plugin cache.
</span></span><span id="1697" class="l"><span class="php-comment">    */</span>
</span><span id="1698" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> clear_sfwp_cache() {
</span><span id="1699" class="l">        <span class="php-var">$result</span>   = <span class="php-var">$this</span>-&gt;clear_cache( <span class="php-keyword1">true</span> );
</span><span id="1700" class="l">        <span class="php-var">$response</span> = <span class="php-keyword1">array</span>(
</span><span id="1701" class="l">            <span class="php-quote">'message'</span> =&gt; <span class="php-var">$result</span>[<span class="php-quote">'message'</span>],
</span><span id="1702" class="l">            <span class="php-quote">'success'</span> =&gt; <span class="php-var">$result</span>[<span class="php-quote">'success'</span>],
</span><span id="1703" class="l">        );
</span><span id="1704" class="l">        wp_send_json_success( <span class="php-var">$response</span> );
</span><span id="1705" class="l">    }
</span><span id="1706" class="l">
</span><span id="1707" class="l">    <span class="php-comment">/**
</span></span><span id="1708" class="l"><span class="php-comment">    * Clear the plugin's cache.
</span></span><span id="1709" class="l"><span class="php-comment">    * This uses the flush method contained in the WordPress cache to clear all of this plugin's cached data.
</span></span><span id="1710" class="l"><span class="php-comment">    */</span>
</span><span id="1711" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> clear_cache( <span class="php-var">$ajax</span> = <span class="php-keyword1">false</span> ) {
</span><span id="1712" class="l">        <span class="php-var">$result</span> = (bool) <span class="php-var">$this</span>-&gt;wordpress-&gt;sfwp_transients-&gt;<span class="php-keyword2">flush</span>();
</span><span id="1713" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$result</span> ) {
</span><span id="1714" class="l">            <span class="php-var">$message</span> = __( <span class="php-quote">'The plugin cache has been cleared.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="1715" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1716" class="l">            <span class="php-var">$message</span> = __( <span class="php-quote">'There was an error clearing the plugin cache. Try refreshing this page.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="1717" class="l">        }
</span><span id="1718" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">false</span> === <span class="php-var">$ajax</span> ) {
</span><span id="1719" class="l">            <span class="php-comment">// translators: parameter 1 is the result message</span>
</span><span id="1720" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;p&gt;%1$s&lt;/p&gt;'</span>, <span class="php-var">$message</span> );
</span><span id="1721" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1722" class="l">            <span class="php-keyword1">return</span> <span class="php-keyword1">array</span>(
</span><span id="1723" class="l">                <span class="php-quote">'message'</span> =&gt; <span class="php-var">$message</span>,
</span><span id="1724" class="l">                <span class="php-quote">'success'</span> =&gt; <span class="php-var">$result</span>,
</span><span id="1725" class="l">            );
</span><span id="1726" class="l">        }
</span><span id="1727" class="l">    }
</span><span id="1728" class="l">
</span><span id="1729" class="l">    <span class="php-comment">/**
</span></span><span id="1730" class="l"><span class="php-comment">    * Check WordPress Admin permissions
</span></span><span id="1731" class="l"><span class="php-comment">    * Check if the current user is allowed to access the Salesforce plugin options
</span></span><span id="1732" class="l"><span class="php-comment">    */</span>
</span><span id="1733" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> check_wordpress_admin_permissions() {
</span><span id="1734" class="l">
</span><span id="1735" class="l">        <span class="php-comment">// one programmatic way to give this capability to additional user roles is the</span>
</span><span id="1736" class="l">        <span class="php-comment">// object_sync_for_salesforce_roles_configure_salesforce hook</span>
</span><span id="1737" class="l">        <span class="php-comment">// it runs on activation of this plugin, and will assign the below capability to any role</span>
</span><span id="1738" class="l">        <span class="php-comment">// coming from the hook</span>
</span><span id="1739" class="l">
</span><span id="1740" class="l">        <span class="php-comment">// alternatively, other roles can get this capability in whatever other way you like</span>
</span><span id="1741" class="l">        <span class="php-comment">// point is: to administer this plugin, you need this capability</span>
</span><span id="1742" class="l">
</span><span id="1743" class="l">        <span class="php-keyword1">if</span> ( ! current_user_can( <span class="php-quote">'configure_salesforce'</span> ) ) {
</span><span id="1744" class="l">            <span class="php-keyword1">return</span> <span class="php-keyword1">false</span>;
</span><span id="1745" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1746" class="l">            <span class="php-keyword1">return</span> <span class="php-keyword1">true</span>;
</span><span id="1747" class="l">        }
</span><span id="1748" class="l">
</span><span id="1749" class="l">    }
</span><span id="1750" class="l">
</span><span id="1751" class="l">    <span class="php-comment">/**
</span></span><span id="1752" class="l"><span class="php-comment">    * Show what we know about this user's relationship to a Salesforce object, if any
</span></span><span id="1753" class="l"><span class="php-comment">    * @param object $user
</span></span><span id="1754" class="l"><span class="php-comment">    *
</span></span><span id="1755" class="l"><span class="php-comment">    */</span>
</span><span id="1756" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> show_salesforce_user_fields( <span class="php-var">$user</span> ) {
</span><span id="1757" class="l">        <span class="php-var">$get_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_GET, FILTER_SANITIZE_STRING );
</span><span id="1758" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">true</span> === <span class="php-var">$this</span>-&gt;check_wordpress_admin_permissions() ) {
</span><span id="1759" class="l">            <span class="php-var">$mapping</span>  = <span class="php-var">$this</span>-&gt;mappings-&gt;load_by_wordpress( <span class="php-quote">'user'</span>, <span class="php-var">$user</span>-&gt;ID );
</span><span id="1760" class="l">            <span class="php-var">$fieldmap</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;get_fieldmaps(
</span><span id="1761" class="l">                <span class="php-keyword1">null</span>, <span class="php-comment">// id field must be null for multiples</span>
</span><span id="1762" class="l">                <span class="php-keyword1">array</span>(
</span><span id="1763" class="l">                    <span class="php-quote">'wordpress_object'</span> =&gt; <span class="php-quote">'user'</span>,
</span><span id="1764" class="l">                )
</span><span id="1765" class="l">            );
</span><span id="1766" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$mapping</span>[<span class="php-quote">'id'</span>] ) &amp;&amp; ! <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'edit_salesforce_mapping'</span>] ) ) {
</span><span id="1767" class="l">                <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/user-profile-salesforce.php'</span> );
</span><span id="1768" class="l">            } <span class="php-keyword1">elseif</span> ( ! <span class="php-keyword1">empty</span>( <span class="php-var">$fieldmap</span> ) ) { <span class="php-comment">// is the user mapped to something already?</span>
</span><span id="1769" class="l">                <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'edit_salesforce_mapping'</span>] ) &amp;&amp; <span class="php-quote">'true'</span> === sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'edit_salesforce_mapping'</span>] ) ) {
</span><span id="1770" class="l">                    <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/user-profile-salesforce-change.php'</span> );
</span><span id="1771" class="l">                } <span class="php-keyword1">else</span> {
</span><span id="1772" class="l">                    <span class="php-keyword1">require_once</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'/../templates/admin/user-profile-salesforce-map.php'</span> );
</span><span id="1773" class="l">                }
</span><span id="1774" class="l">            }
</span><span id="1775" class="l">        }
</span><span id="1776" class="l">    }
</span><span id="1777" class="l">
</span><span id="1778" class="l">    <span class="php-comment">/**
</span></span><span id="1779" class="l"><span class="php-comment">    * If the user profile has been mapped to Salesforce, do it
</span></span><span id="1780" class="l"><span class="php-comment">    * @param int $user_id
</span></span><span id="1781" class="l"><span class="php-comment">    *
</span></span><span id="1782" class="l"><span class="php-comment">    */</span>
</span><span id="1783" class="l">    <span class="php-keyword1">public</span> <span class="php-keyword1">function</span> save_salesforce_user_fields( <span class="php-var">$user_id</span> ) {
</span><span id="1784" class="l">        <span class="php-var">$post_data</span> = <span class="php-keyword2">filter_input_array</span>( INPUT_POST, FILTER_SANITIZE_STRING );
</span><span id="1785" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_update_mapped_user'</span>] ) &amp;&amp; <span class="php-quote">'1'</span> === <span class="php-keyword2">rawurlencode</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_update_mapped_user'</span>] ) ) {
</span><span id="1786" class="l">            <span class="php-var">$mapping_object</span>                  = <span class="php-var">$this</span>-&gt;mappings-&gt;get_object_maps(
</span><span id="1787" class="l">                <span class="php-keyword1">array</span>(
</span><span id="1788" class="l">                    <span class="php-quote">'wordpress_id'</span>     =&gt; <span class="php-var">$user_id</span>,
</span><span id="1789" class="l">                    <span class="php-quote">'wordpress_object'</span> =&gt; <span class="php-quote">'user'</span>,
</span><span id="1790" class="l">                )
</span><span id="1791" class="l">            );
</span><span id="1792" class="l">            <span class="php-var">$mapping_object</span>[<span class="php-quote">'salesforce_id'</span>] = <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_id'</span>];
</span><span id="1793" class="l">
</span><span id="1794" class="l">            <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;update_object_map( <span class="php-var">$mapping_object</span>, <span class="php-var">$mapping_object</span>[<span class="php-quote">'id'</span>] );
</span><span id="1795" class="l">        } <span class="php-keyword1">elseif</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_create_mapped_user'</span>] ) &amp;&amp; <span class="php-quote">'1'</span> === <span class="php-keyword2">rawurlencode</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_create_mapped_user'</span>] ) ) {
</span><span id="1796" class="l">            <span class="php-comment">// if a Salesforce ID was entered</span>
</span><span id="1797" class="l">            <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_id'</span>] ) &amp;&amp; ! <span class="php-keyword1">empty</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_id'</span>] ) ) {
</span><span id="1798" class="l">                <span class="php-var">$mapping_object</span> = <span class="php-var">$this</span>-&gt;create_object_map( <span class="php-var">$user_id</span>, <span class="php-quote">'user'</span>, <span class="php-var">$post_data</span>[<span class="php-quote">'salesforce_id'</span>] );
</span><span id="1799" class="l">            } <span class="php-keyword1">elseif</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$post_data</span>[<span class="php-quote">'push_new_user_to_salesforce'</span>] ) ) {
</span><span id="1800" class="l">                <span class="php-comment">// otherwise, create a new record in Salesforce</span>
</span><span id="1801" class="l">                <span class="php-var">$result</span> = <span class="php-var">$this</span>-&gt;push_to_salesforce( <span class="php-quote">'user'</span>, <span class="php-var">$user_id</span> );
</span><span id="1802" class="l">            }
</span><span id="1803" class="l">        }
</span><span id="1804" class="l">    }
</span><span id="1805" class="l">
</span><span id="1806" class="l">    <span class="php-comment">/**
</span></span><span id="1807" class="l"><span class="php-comment">    * Render tabs for settings pages in admin
</span></span><span id="1808" class="l"><span class="php-comment">    * @param array $tabs
</span></span><span id="1809" class="l"><span class="php-comment">    * @param string $tab
</span></span><span id="1810" class="l"><span class="php-comment">    */</span>
</span><span id="1811" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> tabs( <span class="php-var">$tabs</span>, <span class="php-var">$tab</span> = <span class="php-quote">''</span> ) {
</span><span id="1812" class="l">
</span><span id="1813" class="l">        <span class="php-var">$get_data</span>        = <span class="php-keyword2">filter_input_array</span>( INPUT_GET, FILTER_SANITIZE_STRING );
</span><span id="1814" class="l">        <span class="php-var">$consumer_key</span>    = <span class="php-var">$this</span>-&gt;login_credentials[<span class="php-quote">'consumer_key'</span>];
</span><span id="1815" class="l">        <span class="php-var">$consumer_secret</span> = <span class="php-var">$this</span>-&gt;login_credentials[<span class="php-quote">'consumer_secret'</span>];
</span><span id="1816" class="l">        <span class="php-var">$callback_url</span>    = <span class="php-var">$this</span>-&gt;login_credentials[<span class="php-quote">'callback_url'</span>];
</span><span id="1817" class="l">
</span><span id="1818" class="l">        <span class="php-var">$current_tab</span> = <span class="php-var">$tab</span>;
</span><span id="1819" class="l">        <span class="php-keyword1">echo</span> <span class="php-quote">'&lt;h2 class=&quot;nav-tab-wrapper&quot;&gt;'</span>;
</span><span id="1820" class="l">        <span class="php-keyword1">foreach</span> ( <span class="php-var">$tabs</span> <span class="php-keyword1">as</span> <span class="php-var">$tab_key</span> =&gt; <span class="php-var">$tab_caption</span> ) {
</span><span id="1821" class="l">            <span class="php-var">$active</span> = <span class="php-var">$current_tab</span> === <span class="php-var">$tab_key</span> ? <span class="php-quote">' nav-tab-active'</span> : <span class="php-quote">''</span>;
</span><span id="1822" class="l">            <span class="php-keyword1">if</span> ( <span class="php-quote">'settings'</span> === <span class="php-var">$tab_key</span> || ( <span class="php-keyword1">isset</span>( <span class="php-var">$consumer_key</span> ) &amp;&amp; <span class="php-keyword1">isset</span>( <span class="php-var">$consumer_secret</span> ) &amp;&amp; ! <span class="php-keyword1">empty</span>( <span class="php-var">$consumer_key</span> ) &amp;&amp; ! <span class="php-keyword1">empty</span>( <span class="php-var">$consumer_secret</span> ) ) ) {
</span><span id="1823" class="l">                <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( <span class="php-quote">'&lt;a class=&quot;nav-tab%1$s&quot; href=&quot;%2$s&quot;&gt;%3$s&lt;/a&gt;'</span>,
</span><span id="1824" class="l">                    esc_attr( <span class="php-var">$active</span> ),
</span><span id="1825" class="l">                    esc_url( <span class="php-quote">'?page=object-sync-salesforce-admin&amp;tab='</span> . <span class="php-var">$tab_key</span> ),
</span><span id="1826" class="l">                    esc_html( <span class="php-var">$tab_caption</span> )
</span><span id="1827" class="l">                );
</span><span id="1828" class="l">            }
</span><span id="1829" class="l">        }
</span><span id="1830" class="l">        <span class="php-keyword1">echo</span> <span class="php-quote">'&lt;/h2&gt;'</span>;
</span><span id="1831" class="l">
</span><span id="1832" class="l">        <span class="php-keyword1">if</span> ( <span class="php-keyword1">isset</span>( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] ) ) {
</span><span id="1833" class="l">            <span class="php-var">$tab</span> = sanitize_key( <span class="php-var">$get_data</span>[<span class="php-quote">'tab'</span>] );
</span><span id="1834" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1835" class="l">            <span class="php-var">$tab</span> = <span class="php-quote">''</span>;
</span><span id="1836" class="l">        }
</span><span id="1837" class="l">    }
</span><span id="1838" class="l">
</span><span id="1839" class="l">    <span class="php-comment">/**
</span></span><span id="1840" class="l"><span class="php-comment">    * Clear schedule
</span></span><span id="1841" class="l"><span class="php-comment">    * This clears the schedule if the user clicks the button
</span></span><span id="1842" class="l"><span class="php-comment">    */</span>
</span><span id="1843" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> clear_schedule( <span class="php-var">$schedule_name</span> = <span class="php-quote">''</span> ) {
</span><span id="1844" class="l">        <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$schedule_name</span> ) {
</span><span id="1845" class="l">            <span class="php-var">$schedule</span> = <span class="php-var">$this</span>-&gt;schedule( <span class="php-var">$schedule_name</span> );
</span><span id="1846" class="l">            <span class="php-var">$schedule</span>-&gt;cancel_by_name( <span class="php-var">$schedule_name</span> );
</span><span id="1847" class="l">            <span class="php-comment">// translators: $schedule_name is the name of the current queue. Defaults: salesforce_pull, salesforce_push, salesforce</span>
</span><span id="1848" class="l">            <span class="php-keyword1">echo</span> <span class="php-keyword2">sprintf</span>( esc_html__( <span class="php-quote">'You have cleared the %s schedule.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ), esc_html( <span class="php-var">$schedule_name</span> ) );
</span><span id="1849" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1850" class="l">            <span class="php-keyword1">echo</span> esc_html__( <span class="php-quote">'You need to specify the name of the schedule you want to clear.'</span>, <span class="php-quote">'object-sync-for-salesforce'</span> );
</span><span id="1851" class="l">        }
</span><span id="1852" class="l">    }
</span><span id="1853" class="l">
</span><span id="1854" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> get_schedule_count( <span class="php-var">$schedule_name</span> = <span class="php-quote">''</span> ) {
</span><span id="1855" class="l">        <span class="php-keyword1">if</span> ( <span class="php-quote">''</span> !== <span class="php-var">$schedule_name</span> ) {
</span><span id="1856" class="l">            <span class="php-var">$schedule</span> = <span class="php-var">$this</span>-&gt;schedule( <span class="php-var">$schedule_name</span> );
</span><span id="1857" class="l">            <span class="php-keyword1">return</span> <span class="php-var">$this</span>-&gt;schedule-&gt;count_queue_items( <span class="php-var">$schedule_name</span> );
</span><span id="1858" class="l">        } <span class="php-keyword1">else</span> {
</span><span id="1859" class="l">            <span class="php-keyword1">return</span> <span class="php-quote">'unknown'</span>;
</span><span id="1860" class="l">        }
</span><span id="1861" class="l">    }
</span><span id="1862" class="l">
</span><span id="1863" class="l">    <span class="php-comment">/**
</span></span><span id="1864" class="l"><span class="php-comment">    * Load the schedule class
</span></span><span id="1865" class="l"><span class="php-comment">    */</span>
</span><span id="1866" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> schedule( <span class="php-var">$schedule_name</span> ) {
</span><span id="1867" class="l">        <span class="php-keyword1">if</span> ( ! <span class="php-keyword2">class_exists</span>( <span class="php-quote">'Object_Sync_Sf_Schedule'</span> ) &amp;&amp; <span class="php-keyword2">file_exists</span>( plugin_dir_path( __FILE__ ) . <span class="php-quote">'../vendor/autoload.php'</span> ) ) {
</span><span id="1868" class="l">            <span class="php-keyword1">require_once</span> plugin_dir_path( __FILE__ ) . <span class="php-quote">'../vendor/autoload.php'</span>;
</span><span id="1869" class="l">            <span class="php-keyword1">require_once</span> plugin_dir_path( __FILE__ ) . <span class="php-quote">'../classes/schedule.php'</span>;
</span><span id="1870" class="l">        }
</span><span id="1871" class="l">        <span class="php-var">$schedule</span>       = <span class="php-keyword1">new</span> Object_Sync_Sf_Schedule( <span class="php-var">$this</span>-&gt;wpdb, <span class="php-var">$this</span>-&gt;version, <span class="php-var">$this</span>-&gt;login_credentials, <span class="php-var">$this</span>-&gt;slug, <span class="php-var">$this</span>-&gt;wordpress, <span class="php-var">$this</span>-&gt;salesforce, <span class="php-var">$this</span>-&gt;mappings, <span class="php-var">$schedule_name</span>, <span class="php-var">$this</span>-&gt;logging, <span class="php-var">$this</span>-&gt;schedulable_classes );
</span><span id="1872" class="l">        <span class="php-var">$this</span>-&gt;schedule = <span class="php-var">$schedule</span>;
</span><span id="1873" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$schedule</span>;
</span><span id="1874" class="l">    }
</span><span id="1875" class="l">
</span><span id="1876" class="l">    <span class="php-comment">/**
</span></span><span id="1877" class="l"><span class="php-comment">    * Create an object map between a WordPress object and a Salesforce object
</span></span><span id="1878" class="l"><span class="php-comment">    *
</span></span><span id="1879" class="l"><span class="php-comment">    * @param int $wordpress_id
</span></span><span id="1880" class="l"><span class="php-comment">    *   Unique identifier for the WordPress object
</span></span><span id="1881" class="l"><span class="php-comment">    * @param string $wordpress_object
</span></span><span id="1882" class="l"><span class="php-comment">    *   What kind of object is it?
</span></span><span id="1883" class="l"><span class="php-comment">    * @param string $salesforce_id
</span></span><span id="1884" class="l"><span class="php-comment">    *   Unique identifier for the Salesforce object
</span></span><span id="1885" class="l"><span class="php-comment">    * @param string $action
</span></span><span id="1886" class="l"><span class="php-comment">    *   Did we push or pull?
</span></span><span id="1887" class="l"><span class="php-comment">    *
</span></span><span id="1888" class="l"><span class="php-comment">    * @return int $wpdb-&gt;insert_id
</span></span><span id="1889" class="l"><span class="php-comment">    *   This is the database row for the map object
</span></span><span id="1890" class="l"><span class="php-comment">    *
</span></span><span id="1891" class="l"><span class="php-comment">    */</span>
</span><span id="1892" class="l">    <span class="php-keyword1">private</span> <span class="php-keyword1">function</span> create_object_map( <span class="php-var">$wordpress_id</span>, <span class="php-var">$wordpress_object</span>, <span class="php-var">$salesforce_id</span>, <span class="php-var">$action</span> = <span class="php-quote">''</span> ) {
</span><span id="1893" class="l">        <span class="php-comment">// Create object map and save it</span>
</span><span id="1894" class="l">        <span class="php-var">$mapping_object</span> = <span class="php-var">$this</span>-&gt;mappings-&gt;create_object_map(
</span><span id="1895" class="l">            <span class="php-keyword1">array</span>(
</span><span id="1896" class="l">                <span class="php-quote">'wordpress_id'</span>      =&gt; <span class="php-var">$wordpress_id</span>, <span class="php-comment">// wordpress unique id</span>
</span><span id="1897" class="l">                <span class="php-quote">'salesforce_id'</span>     =&gt; <span class="php-var">$salesforce_id</span>, <span class="php-comment">// salesforce unique id. we don't care what kind of object it is at this point</span>
</span><span id="1898" class="l">                <span class="php-quote">'wordpress_object'</span>  =&gt; <span class="php-var">$wordpress_object</span>, <span class="php-comment">// keep track of what kind of wp object this is</span>
</span><span id="1899" class="l">                <span class="php-quote">'last_sync'</span>         =&gt; current_time( <span class="php-quote">'mysql'</span> ),
</span><span id="1900" class="l">                <span class="php-quote">'last_sync_action'</span>  =&gt; <span class="php-var">$action</span>,
</span><span id="1901" class="l">                <span class="php-quote">'last_sync_status'</span>  =&gt; <span class="php-var">$this</span>-&gt;mappings-&gt;status_success,
</span><span id="1902" class="l">                <span class="php-quote">'last_sync_message'</span> =&gt; __( <span class="php-quote">'Mapping object updated via function: '</span>, <span class="php-quote">'object-sync-for-salesforce'</span> ) . __FUNCTION__,
</span><span id="1903" class="l">            )
</span><span id="1904" class="l">        );
</span><span id="1905" class="l">
</span><span id="1906" class="l">        <span class="php-keyword1">return</span> <span class="php-var">$mapping_object</span>;
</span><span id="1907" class="l">
</span><span id="1908" class="l">    }
</span><span id="1909" class="l">
</span><span id="1910" class="l">}
</span><span id="1911" class="l"></span></code></pre>

	<div id="footer">
		Object Sync for Salesforce API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
</div>
<script src="resources/combined.js?accf70cfac0fe15b4c80f6039ece408b240e9042"></script>
<script src="elementlist.js?04aa35b40ab3986ede0da77d700f9b59bb72cde5"></script>
</body>
</html>
